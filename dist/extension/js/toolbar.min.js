/*
 * orange-confort-plus - version 5.0.0-beta.0 - 07/04/2025
 * Enhance user experience on web sites
 * Â© 2014 - 2025 Orange SA
 */
(function(){"use strict";var t=window.Document.prototype.createElement,n=window.Document.prototype.createElementNS,i=window.Document.prototype.importNode,s=window.Document.prototype.prepend,a=window.Document.prototype.append,o=window.DocumentFragment.prototype.prepend,l=window.DocumentFragment.prototype.append,r=window.Node.prototype.cloneNode,c=window.Node.prototype.appendChild,u=window.Node.prototype.insertBefore,p=window.Node.prototype.removeChild,h=window.Node.prototype.replaceChild,m=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),v=window.Element.prototype.attachShadow,y=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),E=window.Element.prototype.getAttribute,C=window.Element.prototype.setAttribute,I=window.Element.prototype.removeAttribute,A=window.Element.prototype.toggleAttribute,_=window.Element.prototype.getAttributeNS,k=window.Element.prototype.setAttributeNS,x=window.Element.prototype.removeAttributeNS,w=window.Element.prototype.insertAdjacentElement,F=window.Element.prototype.insertAdjacentHTML,$=window.Element.prototype.prepend,D=window.Element.prototype.append,B=window.Element.prototype.before,O=window.Element.prototype.after,z=window.Element.prototype.replaceWith,H=window.Element.prototype.remove,q=window.HTMLElement,j=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),G=window.HTMLElement.prototype.insertAdjacentElement,ee=window.HTMLElement.prototype.insertAdjacentHTML,te=new Set;function ra(t){var n=te.has(t);return t=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(t),!n&&t}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach((function(t){return te.add(t)}));var ne=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function J(t){var n=t.isConnected;if(void 0!==n)return n;if(ne(t))return!0;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document))}function K(t){var n=t.children;if(n)return Array.prototype.slice.call(n);for(n=[],t=t.firstChild;t;t=t.nextSibling)t.nodeType===Node.ELEMENT_NODE&&n.push(t);return n}function L(t,n){for(;n&&n!==t&&!n.nextSibling;)n=n.parentNode;return n&&n!==t?n.nextSibling:null}function M(t,n,i){for(var s=t;s;){if(s.nodeType===Node.ELEMENT_NODE){var a=s;n(a);var o=a.localName;if("link"===o&&"import"===a.getAttribute("rel")){if(s=a.import,void 0===i&&(i=new Set),s instanceof Node&&!i.has(s))for(i.add(s),s=s.firstChild;s;s=s.nextSibling)M(s,n,i);s=L(t,a);continue}if("template"===o){s=L(t,a);continue}if(a=a.__CE_shadowRoot)for(a=a.firstChild;a;a=a.nextSibling)M(a,n,i)}s=s.firstChild?s.firstChild:L(t,s)}}function N(){var t=!(null==se||!se.noDocumentConstructionObserver),n=!(null==se||!se.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=n,this.I=!t}function P(t,n,i,s){var a=window.ShadyDOM;if(t.shadyDomFastWalk&&a&&a.inUse){if(n.nodeType===Node.ELEMENT_NODE&&i(n),n.querySelectorAll)for(t=a.nativeMethods.querySelectorAll.call(n,"*"),n=0;n<t.length;n++)i(t[n])}else M(n,i,s)}function Q(t,n){t.j&&P(t,n,(function(n){return R(t,n)}))}function R(t,n){if(t.j&&!n.__CE_patched){n.__CE_patched=!0;for(var i=0;i<t.m.length;i++)t.m[i](n);for(i=0;i<t.g.length;i++)t.g[i](n)}}function S(t,n){var i=[];for(P(t,n,(function(t){return i.push(t)})),n=0;n<i.length;n++){var s=i[n];1===s.__CE_state?t.connectedCallback(s):T(t,s)}}function U(t,n){var i=[];for(P(t,n,(function(t){return i.push(t)})),n=0;n<i.length;n++){var s=i[n];1===s.__CE_state&&t.disconnectedCallback(s)}}function V(t,n,i){var s=(i=void 0===i?{}:i).J,a=i.upgrade||function(n){return T(t,n)},o=[];for(P(t,n,(function(n){if(t.j&&R(t,n),"link"===n.localName&&"import"===n.getAttribute("rel")){var i=n.import;i instanceof Node&&(i.__CE_isImportDocument=!0,i.__CE_registry=document.__CE_registry),i&&"complete"===i.readyState?i.__CE_documentLoadHandled=!0:n.addEventListener("load",(function(){var i=n.import;if(!i.__CE_documentLoadHandled){i.__CE_documentLoadHandled=!0;var o=new Set;s&&(s.forEach((function(t){return o.add(t)})),o.delete(i)),V(t,i,{J:o,upgrade:a})}}))}else o.push(n)}),s),n=0;n<o.length;n++)a(o[n])}function T(t,n){try{var i=n.ownerDocument,s=i.__CE_registry,a=s&&(i.defaultView||i.__CE_isImportDocument)?W(s,n.localName):void 0;if(a&&void 0===n.__CE_state){a.constructionStack.push(n);try{try{if(new a.constructorFunction!==n)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{a.constructionStack.pop()}}catch(t){throw n.__CE_state=2,t}if(n.__CE_state=1,n.__CE_definition=a,a.attributeChangedCallback&&n.hasAttributes()){var o=a.observedAttributes;for(a=0;a<o.length;a++){var l=o[a],r=n.getAttribute(l);null!==r&&t.attributeChangedCallback(n,l,null,r,null)}}J(n)&&t.connectedCallback(n)}}catch(t){X(t)}}function va(i,s,a,o){var l=s.__CE_registry;if(l&&(null===o||"http://www.w3.org/1999/xhtml"===o)&&(l=W(l,a)))try{var r=new l.constructorFunction;if(void 0===r.__CE_state||void 0===r.__CE_definition)throw Error("Failed to construct '"+a+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==r.namespaceURI)throw Error("Failed to construct '"+a+"': The constructed element's namespace must be the HTML namespace.");if(r.hasAttributes())throw Error("Failed to construct '"+a+"': The constructed element must not have any attributes.");if(null!==r.firstChild)throw Error("Failed to construct '"+a+"': The constructed element must not have any children.");if(null!==r.parentNode)throw Error("Failed to construct '"+a+"': The constructed element must not have a parent node.");if(r.ownerDocument!==s)throw Error("Failed to construct '"+a+"': The constructed element's owner document is incorrect.");if(r.localName!==a)throw Error("Failed to construct '"+a+"': The constructed element's local name is incorrect.");return r}catch(l){return X(l),s=null===o?t.call(s,a):n.call(s,o,a),Object.setPrototypeOf(s,HTMLUnknownElement.prototype),s.__CE_state=2,s.__CE_definition=void 0,R(i,s),s}return R(i,s=null===o?t.call(s,a):n.call(s,o,a)),s}function X(t){var n="",i="",s=0,a=0;t instanceof Error?(n=t.message,i=t.sourceURL||t.fileName||"",s=t.line||t.lineNumber||0,a=t.column||t.columnNumber||0):n="Uncaught "+String(t);var o=void 0;void 0===ErrorEvent.prototype.initErrorEvent?o=new ErrorEvent("error",{cancelable:!0,message:n,filename:i,lineno:s,colno:a,error:t}):((o=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,n,i,s),o.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===o.error&&Object.defineProperty(o,"error",{configurable:!0,enumerable:!0,get:function(){return t}}),window.dispatchEvent(o),o.defaultPrevented||console.error(t)}function wa(){var t=this;this.g=void 0,this.F=new Promise((function(n){t.l=n}))}function xa(t){var n=document;this.l=void 0,this.h=t,this.g=n,V(this.h,this.g),"loading"===this.g.readyState&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function ya(t){t.l&&t.l.disconnect()}function Y(t){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(t){return t()},this.i=!1,this.v=[],this.h=t,this.D=t.I?new xa(t):void 0}function za(t,n){if(!ra(n))throw new SyntaxError("The element name '"+n+"' is not valid.");if(W(t,n))throw Error("A custom element with name '"+n+"' has already been defined.");if(t.A)throw Error("A custom element is already being defined.")}function Ba(t,n,i){var s;t.A=!0;try{var a=i.prototype;if(!(a instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var e=function(t){var n=a[t];if(void 0!==n&&!(n instanceof Function))throw Error("The '"+t+"' callback must be a function.");return n},o=e("connectedCallback"),l=e("disconnectedCallback"),r=e("adoptedCallback"),c=(s=e("attributeChangedCallback"))&&i.observedAttributes||[]}catch(t){throw t}finally{t.A=!1}return i={localName:n,constructorFunction:i,connectedCallback:o,disconnectedCallback:l,adoptedCallback:r,attributeChangedCallback:s,observedAttributes:c,constructionStack:[]},t.u.set(n,i),t.C.set(i.constructorFunction,i),i}function Aa(t){if(!1!==t.i){t.i=!1;for(var n=[],i=t.v,s=new Map,a=0;a<i.length;a++)s.set(i[a],[]);for(V(t.h,document,{upgrade:function(i){if(void 0===i.__CE_state){var a=i.localName,o=s.get(a);o?o.push(i):t.u.has(a)&&n.push(i)}}}),a=0;a<n.length;a++)T(t.h,n[a]);for(a=0;a<i.length;a++){for(var o=i[a],l=s.get(o),r=0;r<l.length;r++)T(t.h,l[r]);(o=t.B.get(o))&&o.resolve(void 0)}i.length=0}}function W(t,n){var i=t.u.get(n);if(i)return i;if(i=t.s.get(n)){t.s.delete(n);try{return Ba(t,n,i())}catch(t){X(t)}}}function Z(t,n,i){function f(n){return function(i){for(var s=[],a=0;a<arguments.length;++a)s[a]=arguments[a];a=[];for(var o=[],l=0;l<s.length;l++){var r=s[l];if(r instanceof Element&&J(r)&&o.push(r),r instanceof DocumentFragment)for(r=r.firstChild;r;r=r.nextSibling)a.push(r);else a.push(r)}for(n.apply(this,s),s=0;s<o.length;s++)U(t,o[s]);if(J(this))for(s=0;s<a.length;s++)(o=a[s])instanceof Element&&S(t,o)}}void 0!==i.prepend&&(n.prepend=f(i.prepend)),void 0!==i.append&&(n.append=f(i.append))}N.prototype.connectedCallback=function(t){var n=t.__CE_definition;if(n.connectedCallback)try{n.connectedCallback.call(t)}catch(t){X(t)}},N.prototype.disconnectedCallback=function(t){var n=t.__CE_definition;if(n.disconnectedCallback)try{n.disconnectedCallback.call(t)}catch(t){X(t)}},N.prototype.attributeChangedCallback=function(t,n,i,s,a){var o=t.__CE_definition;if(o.attributeChangedCallback&&-1<o.observedAttributes.indexOf(n))try{o.attributeChangedCallback.call(t,n,i,s,a)}catch(t){X(t)}},wa.prototype.resolve=function(t){if(this.g)throw Error("Already resolved.");this.g=t,this.l(t)},xa.prototype.G=function(t){var n=this.g.readyState;for("interactive"!==n&&"complete"!==n||ya(this),n=0;n<t.length;n++)for(var i=t[n].addedNodes,s=0;s<i.length;s++)V(this.h,i[s])},Y.prototype.H=function(t,n){var i=this;if(!(n instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");za(this,t),this.s.set(t,n),this.v.push(t),this.i||(this.i=!0,this.o((function(){return Aa(i)})))},Y.prototype.define=function(t,n){var i=this;if(!(n instanceof Function))throw new TypeError("Custom element constructors must be functions.");za(this,t),Ba(this,t,n),this.v.push(t),this.i||(this.i=!0,this.o((function(){return Aa(i)})))},Y.prototype.upgrade=function(t){V(this.h,t)},Y.prototype.get=function(t){if(t=W(this,t))return t.constructorFunction},Y.prototype.whenDefined=function(t){if(!ra(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var n=this.B.get(t);if(n)return n.F;n=new wa,this.B.set(t,n);var i=this.u.has(t)||this.s.has(t);return t=-1===this.v.indexOf(t),i&&t&&n.resolve(void 0),n.F},Y.prototype.polyfillWrapFlushCallback=function(t){this.D&&ya(this.D);var n=this.o;this.o=function(i){return t((function(){return n(i)}))}},Y.prototype.define=Y.prototype.define,Y.prototype.upgrade=Y.prototype.upgrade,Y.prototype.get=Y.prototype.get,Y.prototype.whenDefined=Y.prototype.whenDefined,Y.prototype.polyfillDefineLazy=Y.prototype.H,Y.prototype.polyfillWrapFlushCallback=Y.prototype.polyfillWrapFlushCallback;var ie={},se=window.customElements;function Ia(){var te=new N;!function(n){function b(){var i=this.constructor,s=document.__CE_registry.C.get(i);if(!s)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var a=s.constructionStack;if(0===a.length)return a=t.call(document,s.localName),Object.setPrototypeOf(a,i.prototype),a.__CE_state=1,a.__CE_definition=s,R(n,a),a;var o=a.length-1,l=a[o];if(l===ie)throw Error("Failed to construct '"+s.localName+"': This element was already constructed.");return a[o]=ie,Object.setPrototypeOf(l,i.prototype),R(n,l),l}b.prototype=q.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:b}),window.HTMLElement=b}(te),function(t){Document.prototype.createElement=function(n){return va(t,this,n,null)},Document.prototype.importNode=function(n,s){return n=i.call(this,n,!!s),this.__CE_registry?V(t,n):Q(t,n),n},Document.prototype.createElementNS=function(n,i){return va(t,this,i,n)},Z(t,Document.prototype,{prepend:s,append:a})}(te),Z(te,DocumentFragment.prototype,{prepend:o,append:l}),function(t){function b(n,i){Object.defineProperty(n,"textContent",{enumerable:i.enumerable,configurable:!0,get:i.get,set:function(n){if(this.nodeType===Node.TEXT_NODE)i.set.call(this,n);else{var s=void 0;if(this.firstChild){var a=this.childNodes,o=a.length;if(0<o&&J(this)){s=Array(o);for(var l=0;l<o;l++)s[l]=a[l]}}if(i.set.call(this,n),s)for(n=0;n<s.length;n++)U(t,s[n])}}})}Node.prototype.insertBefore=function(n,i){if(n instanceof DocumentFragment){var s=K(n);if(n=u.call(this,n,i),J(this))for(i=0;i<s.length;i++)S(t,s[i]);return n}return s=n instanceof Element&&J(n),i=u.call(this,n,i),s&&U(t,n),J(this)&&S(t,n),i},Node.prototype.appendChild=function(n){if(n instanceof DocumentFragment){var i=K(n);if(n=c.call(this,n),J(this))for(var s=0;s<i.length;s++)S(t,i[s]);return n}return i=n instanceof Element&&J(n),s=c.call(this,n),i&&U(t,n),J(this)&&S(t,n),s},Node.prototype.cloneNode=function(n){return n=r.call(this,!!n),this.ownerDocument.__CE_registry?V(t,n):Q(t,n),n},Node.prototype.removeChild=function(n){var i=n instanceof Element&&J(n),s=p.call(this,n);return i&&U(t,n),s},Node.prototype.replaceChild=function(n,i){if(n instanceof DocumentFragment){var s=K(n);if(n=h.call(this,n,i),J(this))for(U(t,i),i=0;i<s.length;i++)S(t,s[i]);return n}s=n instanceof Element&&J(n);var a=h.call(this,n,i),o=J(this);return o&&U(t,i),s&&U(t,n),o&&S(t,n),a},m&&m.get?b(Node.prototype,m):function(t,n){t.j=!0,t.m.push(n)}(t,(function(t){b(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],n=this.firstChild;n;n=n.nextSibling)n.nodeType!==Node.COMMENT_NODE&&t.push(n.textContent);return t.join("")},set:function(t){for(;this.firstChild;)p.call(this,this.firstChild);null!=t&&""!==t&&c.call(this,document.createTextNode(t))}})}))}(te),function(t){function b(n,i){Object.defineProperty(n,"innerHTML",{enumerable:i.enumerable,configurable:!0,get:i.get,set:function(n){var s=this,a=void 0;if(J(this)&&(a=[],P(t,this,(function(t){t!==s&&a.push(t)}))),i.set.call(this,n),a)for(var o=0;o<a.length;o++){var l=a[o];1===l.__CE_state&&t.disconnectedCallback(l)}return this.ownerDocument.__CE_registry?V(t,this):Q(t,this),n}})}function d(n,i){n.insertAdjacentElement=function(n,s){var a=J(s);return n=i.call(this,n,s),a&&U(t,s),J(n)&&S(t,s),n}}function f(n,i){function g(n,i){for(var s=[];n!==i;n=n.nextSibling)s.push(n);for(i=0;i<s.length;i++)V(t,s[i])}n.insertAdjacentHTML=function(t,n){if("beforebegin"===(t=t.toLowerCase())){var s=this.previousSibling;i.call(this,t,n),g(s||this.parentNode.firstChild,this)}else if("afterbegin"===t)s=this.firstChild,i.call(this,t,n),g(this.firstChild,s);else if("beforeend"===t)s=this.lastChild,i.call(this,t,n),g(s||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");s=this.nextSibling,i.call(this,t,n),g(this.nextSibling,s)}}}v&&(Element.prototype.attachShadow=function(n){if(n=v.call(this,n),t.j&&!n.__CE_patched){n.__CE_patched=!0;for(var i=0;i<t.m.length;i++)t.m[i](n)}return this.__CE_shadowRoot=n}),y&&y.get?b(Element.prototype,y):j&&j.get?b(HTMLElement.prototype,j):function(t,n){t.j=!0,t.g.push(n)}(t,(function(t){b(t,{enumerable:!0,configurable:!0,get:function(){return r.call(this,!0).innerHTML},set:function(t){var i="template"===this.localName,s=i?this.content:this,a=n.call(document,this.namespaceURI,this.localName);for(a.innerHTML=t;0<s.childNodes.length;)p.call(s,s.childNodes[0]);for(t=i?a.content:a;0<t.childNodes.length;)c.call(s,t.childNodes[0])}})})),Element.prototype.setAttribute=function(n,i){if(1!==this.__CE_state)return C.call(this,n,i);var s=E.call(this,n);C.call(this,n,i),i=E.call(this,n),t.attributeChangedCallback(this,n,s,i,null)},Element.prototype.setAttributeNS=function(n,i,s){if(1!==this.__CE_state)return k.call(this,n,i,s);var a=_.call(this,n,i);k.call(this,n,i,s),s=_.call(this,n,i),t.attributeChangedCallback(this,i,a,s,n)},Element.prototype.removeAttribute=function(n){if(1!==this.__CE_state)return I.call(this,n);var i=E.call(this,n);I.call(this,n),null!==i&&t.attributeChangedCallback(this,n,i,null,null)},A&&(Element.prototype.toggleAttribute=function(n,i){if(1!==this.__CE_state)return A.call(this,n,i);var s=E.call(this,n);return null!==s!==(i=A.call(this,n,i))&&t.attributeChangedCallback(this,n,s,i?"":null,null),i}),Element.prototype.removeAttributeNS=function(n,i){if(1!==this.__CE_state)return x.call(this,n,i);var s=_.call(this,n,i);x.call(this,n,i);var a=_.call(this,n,i);s!==a&&t.attributeChangedCallback(this,i,s,a,n)},G?d(HTMLElement.prototype,G):w&&d(Element.prototype,w),ee?f(HTMLElement.prototype,ee):F&&f(Element.prototype,F),Z(t,Element.prototype,{prepend:$,append:D}),function(t){function b(n){return function(i){for(var s=[],a=0;a<arguments.length;++a)s[a]=arguments[a];a=[];for(var o=[],l=0;l<s.length;l++){var r=s[l];if(r instanceof Element&&J(r)&&o.push(r),r instanceof DocumentFragment)for(r=r.firstChild;r;r=r.nextSibling)a.push(r);else a.push(r)}for(n.apply(this,s),s=0;s<o.length;s++)U(t,o[s]);if(J(this))for(s=0;s<a.length;s++)(o=a[s])instanceof Element&&S(t,o)}}var n=Element.prototype;void 0!==B&&(n.before=b(B)),void 0!==O&&(n.after=b(O)),void 0!==z&&(n.replaceWith=function(n){for(var i=[],s=0;s<arguments.length;++s)i[s]=arguments[s];s=[];for(var a=[],o=0;o<i.length;o++){var l=i[o];if(l instanceof Element&&J(l)&&a.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)s.push(l);else s.push(l)}for(o=J(this),z.apply(this,i),i=0;i<a.length;i++)U(t,a[i]);if(o)for(U(t,this),i=0;i<s.length;i++)(a=s[i])instanceof Element&&S(t,a)}),void 0!==H&&(n.remove=function(){var n=J(this);H.call(this),n&&U(t,this)})}(t)}(te),window.CustomElementRegistry=Y,te=new Y(te),document.__CE_registry=te,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:te})}se&&!se.forcePolyfill&&"function"==typeof se.define&&"function"==typeof se.get||Ia(),window.__CE_installPolyfill=Ia}).call(self);const PREFIX="cplus-",JSON_NAME="modeOfUse",DEFAULT_VALUE="noModifications",APP_NAME=`${PREFIX}app-root`,PAGE_HOME="home",PAGE_MODES="modes",PAGE_SETTINGS="settings",PAGE_EDIT_SETTING="edit-setting",FOCUS_SIZE_BIG="4px",FOCUS_SIZE_HUGE="10px",CURSOR_SIZE_BIG=56,CURSOR_SIZE_HUGE=128,SCROLL_SIZE_BIG="32px",SCROLL_SIZE_HUGE="48px",CLICK_FACILITE_BIG_ZONE="bigZone",CLICK_FACILITE_LONG_CLICK="longClick",CLICK_FACILITE_AUTO_CLICK="autoClick",CONTAINER_BUTTONS_ID=`${PREFIX}container-buttons`,TEXT_COLOR_SPAN_CLASS=`${PREFIX}colored-text`;let filesServiceIsInstantiated,i18nServiceIsInstantiated,pathServiceIsInstantiated,iconsServiceIsInstantiated,localStorageServiceIsInstantiated,categoriesServiceIsInstantiated,domServiceIsInstantiated,modeOfUseServiceIsInstantiated,pauseServiceIsInstantiated,routeServiceIsInstantiated,capitalLettersServiceIsInstantiated,clearlyLinksServiceIsInstantiated,clickFaciliteServiceIsInstantiated,colorContrastServiceIsInstantiated,cursorAspectServiceIsInstantiated,deleteBackgroundImagesServiceIsInstantiated,deleteLayoutServiceIsInstantiated,focusAspectServiceIsInstantiated,fontFamilyServiceIsInstantiated,linkStyleServiceIsInstantiated,magnifierServiceIsInstantiated,marginAlignServiceIsInstantiated,navigationAutoServiceIsInstantiated,navigationButtonsServiceIsInstantiated,readAloudServiceIsInstantiated,readingGuideServiceIsInstantiated,restartTopLeftServiceIsInstantiated,scrollAspectServiceIsInstantiated,scrollTypeServiceIsInstantiated,skipToContentServiceIsInstantiated,stopAnimationsServiceIsInstantiated,textSizeServiceIsInstantiated,textSpacingServiceIsInstantiated,textColorServiceIsInstantiated,zoomServiceIsInstantiated,stringServiceIsInstantiated,stylesServiceIsInstantiated;class FilesService{constructor(){if(filesServiceIsInstantiated)throw new Error("FilesService is already instantiated.");filesServiceIsInstantiated=!0}getJSONFile(t){return fetch(chrome.runtime.getURL(`assets/json/${t}.json`)).then((t=>t.json())).catch((n=>(console.error(`Error when retrieving ${t}.json: ${n}.`),n)))}}class I18nService{locale="en";constructor(){if(i18nServiceIsInstantiated)throw new Error("I18nService is already instantiated.");i18nServiceIsInstantiated=!0,this.locale=chrome.i18n.getUILanguage()}getMessage=(t,n=[])=>{if(t&&!t.includes("undefined")){if(!(n.length>0&&n.some((t=>t?.includes("undefined")))))return chrome.i18n.getMessage(t,n);console.warn(`At least one substitution string for I18nService getMessage() is undefined. Message: "${t}". Substitutions: "${n}".`)}else console.warn(`Part of argument for I18nService getMessage() is undefined. Message: "${t}".`)};translate(t){const n=t.querySelectorAll("[data-i18n]");for(const t of n)t.innerHTML=this.getMessage(t.dataset?.i18n);const i=t.querySelectorAll("[data-i18n-title]");for(const t of i)t.title=this.getMessage(t.dataset?.i18nTitle)}}class PathService{path="";constructor(){if(pathServiceIsInstantiated)throw new Error("PathService is already instantiated.");pathServiceIsInstantiated=!0,this.path=chrome.runtime.getURL("/")}}class IconsService{constructor(){if(iconsServiceIsInstantiated)throw new Error("IconsService is already instantiated.");iconsServiceIsInstantiated=!0}get path(){return""}loadSprite(t){fetch(chrome.runtime.getURL("assets/icons/orange-icons-sprite.svg")).then((t=>t.text())).then((n=>{const i=document.createElement("div");i.innerHTML=n,i.hidden=!0,t.insertBefore(i,t.firstChild)}))}}class LocalStorageService{hostname="";tabId;constructor(){if(localStorageServiceIsInstantiated)throw new Error("LocalStorageService is already instantiated.");localStorageServiceIsInstantiated=!0,this.hostname=window.location.hostname,chrome.runtime.sendMessage({getTabId:!0}).then((t=>{this.tabId=t.tabId})).catch((t=>console.error(t)))}setItem(t,n){chrome.storage.local.set({[`${PREFIX}${t}-${this.hostname}`]:n}),chrome.storage.local.set({[`latest-${PREFIX}${t}`]:n});let i=new CustomEvent(`storage-${t}`,{bubbles:!0});window.dispatchEvent(i),["is-opened","is-paused"].includes(t)&&this.tabId&&chrome.storage.local.set({[`${PREFIX}${t}-${this.tabId}`]:n})}getItem(t){return["is-opened","is-paused"].includes(t)&&this.tabId?chrome.storage.local.get([`${PREFIX}${t}-${this.tabId}`]).then((n=>{if(n[`${PREFIX}${t}-${this.tabId}`])return new Promise(((i,s)=>{i(n[`${PREFIX}${t}-${this.tabId}`]),s(new Error(`Could not get ${PREFIX}${t}-${this.tabId} in storage.`))}))})):chrome.storage.local.get([`${PREFIX}${t}-${this.hostname}`]).then((n=>n[`${PREFIX}${t}-${this.hostname}`]?new Promise(((i,s)=>{i(n[`${PREFIX}${t}-${this.hostname}`]),s(new Error(`Could not get ${PREFIX}${t}-${this.hostname} in storage.`))})):chrome.storage.local.get([`latest-${PREFIX}${t}`]).then((n=>new Promise(((i,s)=>{i(n[`latest-${PREFIX}${t}`]),s(new Error(`Could not get latest-${PREFIX}${t} in storage.`))}))))))}removeItem(t){chrome.storage.local.remove([`${PREFIX}${t}-${this.hostname}`])}}class CategoriesService{selectedMode;settingAccordions=[{name:"app-text",open:!1},{name:"app-layout",open:!1},{name:"app-picture-video",open:!1},{name:"app-sound",open:!1},{name:"app-navigation",open:!1}];constructor(){if(categoriesServiceIsInstantiated)throw new Error("CategoriesService is already instantiated.");categoriesServiceIsInstantiated=!0}openCategory=t=>{let n="allClosed";const i=this.settingAccordions.findIndex((n=>n.name===t.toLowerCase()));this.settingAccordions.forEach(((t,s)=>{t.open=s===i&&!t.open,t.open&&(n=t.name)})),localStorageServiceInstance.setItem("current-category",n)};openMainCategory=t=>{let n;return localStorageServiceInstance.getItem("current-category").then((i=>(i?n=i:this.selectedMode!==t&&(this.selectedMode=t,n="visionPlus"===t?"app-layout":"app-text"),this.settingAccordions.forEach(((t,i)=>{t.open=t.name===n})),this.settingAccordions)))}}class DomService{excludedElements=`${APP_NAME}, script`;constructor(){if(domServiceIsInstantiated)throw new Error("DomService is already instantiated.");domServiceIsInstantiated=!0}getFocusableElements=()=>{const t="[inert],[inert] *",n='[tabindex^="-"]',i=":disabled",s=[`a[href]:not(${t},${n}`,`area[href]:not(${t},${n}`,`input:not([type="hidden"],[type="radio"],${t},${n},${i}`,`input[type="radio"]:not(${t},${n},${i}`,`select:not(${t},${n},${i}`,`textarea:not(${t},${n},${i}`,`button:not(${t},${n},${i}`,`details:not(${t} > summary:first-of-type,${n}`,`iframe:not(${t},${n}`,`audio[controls]:not(${t},${n}`,`video[controls]:not(${t},${n}`,`[contenteditable]:not(${t},${n}`,`[tabindex]:not(${t},${n}`];return Array.from(document.querySelectorAll(s.join(","))).filter((t=>!t.disabled&&t.tabIndex>=0))};addButtonsInDom=t=>{let n,i=document.createDocumentFragment(),s=document.querySelector(APP_NAME)?.shadowRoot?.querySelector("app-toolbar")?.classList.contains("close")?"2em":"26em";if(document.querySelector(`#${CONTAINER_BUTTONS_ID}`))n=document.querySelector(`#${CONTAINER_BUTTONS_ID}`);else{n=document.createElement("div"),n.setAttribute("id",CONTAINER_BUTTONS_ID);let t=`\n\t\t\t\t#${CONTAINER_BUTTONS_ID} {\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tgap: 1em;\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\tbottom: 1em;\n\t\t\t\t\tright: ${s};\n\t\t\t\t\tz-index: calc(infinity);\n\t\t\t\t}\n\n\t\t\t\t#${CONTAINER_BUTTONS_ID} button {\n\t\t\t\t\tbackground: #f16e00;\n\t\t\t\t\tcolor: #000;\n\t\t\t\t\tborder: 1px solid currentColor;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tpadding: 1em 2em;\n\t\t\t\t}\n\n\t\t\t\t#${CONTAINER_BUTTONS_ID} button:hover {\n\t\t\t\t\tbackground: #000;\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t}\n\n\t\t\t\t#${CONTAINER_BUTTONS_ID} button:active {\n\t\t\t\t\tbackground: #fff;\n\t\t\t\t\tcolor: #000;\n\t\t\t\t}\n\n\t\t\t\t#${CONTAINER_BUTTONS_ID} button:focus {\n\t\t\t\t\toutline: 3px solid #000;\n    \t\t\toutline-offset: 2px;\n\t\t\t\t}\n\t\t\t`;stylesServiceInstance.setStyle("container-buttons",t)}let a=document.createElement("button");a.setAttribute("id",`${CONTAINER_BUTTONS_ID}__${t}`),a.type="button",a.tabIndex=-1,a.innerText=i18nServiceInstance.getMessage(t),n.appendChild(a),i.appendChild(n),document.body.appendChild(i)};removeButtonsInDom=t=>{document.querySelector(`#${CONTAINER_BUTTONS_ID}__${t}`)?.remove(),0===document.querySelector(`#${CONTAINER_BUTTONS_ID}`)?.children.length&&(document.querySelector(`#${CONTAINER_BUTTONS_ID}`)?.remove(),stylesServiceInstance.removeStyle("container-buttons"))}}class ModeOfUseService{constructor(){if(modeOfUseServiceIsInstantiated)throw new Error("ModeOfUseService is already instantiated.");modeOfUseServiceIsInstantiated=!0}setSelectedMode=t=>{localStorageServiceInstance.getItem(JSON_NAME).then((n=>{let i=n;i.selectedMode===t?filesServiceInstance.getJSONFile("modes-of-use").then((n=>{let s;n.modes.forEach((t=>{Object.keys(t)[0]===i.selectedMode&&(s=t)})),i.modes.forEach(((t,n)=>{Object.keys(t)[0]===i.selectedMode&&(i.modes[n]=s)})),i.selectedMode=t,localStorageServiceInstance.setItem(JSON_NAME,i)})):(i.selectedMode=t,localStorageServiceInstance.setItem(JSON_NAME,i))}))};getSelectedMode(t){let n;return t.modes.forEach((i=>{Object.entries(i)[0][0]===t.selectedMode&&(n=i)})),JSON.stringify(n)}setSettingValue=(t,n,i=!1)=>{let s=!1;return localStorageServiceInstance.getItem(JSON_NAME).then((a=>{let o=a;return o.modes.forEach((a=>{if(Object.keys(a)[0]===o.selectedMode){let l=Object.entries(a)[0][1],r=l.find((n=>stringServiceInstance.normalizeSettingName(Object.keys(n)[0])===stringServiceInstance.normalizeSettingName(t))),c=Object.entries(r)[0][1],u=c.values.split(","),p=l.indexOf(r);l.splice(p,1),i&&u[3]&&(u.pop(),c.values=u.toString()),c.valueSelected=n,l.push(r),localStorageServiceInstance.setItem(JSON_NAME,o),s=!0}})),s})).catch((t=>(console.error("Your setting could not be saved."),s)))};getSetting(t){let n;return localStorageServiceInstance.getItem(JSON_NAME).then((i=>{let s=i;return s.modes.forEach((i=>{if(Object.keys(i)[0]===s.selectedMode){let s=Object.entries(i)[0][1];n=Object.entries(s.find((n=>stringServiceInstance.normalizeSettingName(Object.keys(n)[0])===stringServiceInstance.normalizeSettingName(t))))[0][1]}})),n})).catch((t=>(console.error("Values of this setting could not be return."),n)))}addSettingCustomValue=(t,n,i)=>{let s=!1;return localStorageServiceInstance.getItem(JSON_NAME).then((a=>{let o=a;return o.modes.forEach((a=>{if(Object.keys(a)[0]===o.selectedMode){let l=Object.entries(a)[0][1],r=Object.entries(l.find((n=>stringServiceInstance.normalizeSettingName(Object.keys(n)[0])===stringServiceInstance.normalizeSettingName(t))))[0][1],c=r.values.split(",");r&&(c[3]=i,r.valueSelected=n,r.values=c.toString(),localStorageServiceInstance.setItem(JSON_NAME,o),s=!0)}})),s})).catch((t=>(console.error("The custom value of this setting could not be saved."),s)))}}class PauseService{settingsServices=[];constructor(){if(pauseServiceIsInstantiated)throw new Error("PauseService is already instantiated.");pauseServiceIsInstantiated=!0,this.settingsServices=[{name:"capitalLetters",instanceService:capitalLettersServiceInstance.setCapitalLetters.bind(this),value:DEFAULT_VALUE},{name:"clearlyLinks",instanceService:clearlyLinksServiceInstance.setClearlyLinks.bind(this),value:DEFAULT_VALUE},{name:"clickFacilite",instanceService:clickFaciliteServiceInstance.setClickFacilite.bind(this),value:DEFAULT_VALUE},{name:"colorContrast",instanceService:colorContrastServiceInstance.setColorsContrasts.bind(this),value:DEFAULT_VALUE},{name:"cursorAspect",instanceService:cursorAspectServiceInstance.setCursor.bind(this),value:DEFAULT_VALUE},{name:"deleteBackgroundImages",instanceService:deleteBackgroundImagesServiceInstance.setDeleteBackgroundImages.bind(this),value:DEFAULT_VALUE},{name:"focusAspect",instanceService:focusAspectServiceInstance.setFocus.bind(this),value:DEFAULT_VALUE},{name:"fontFamily",instanceService:fontFamilyServiceInstance.setFontFamily.bind(this),value:DEFAULT_VALUE},{name:"linkStyle",instanceService:linkStyleServiceInstance.setLinkStyle.bind(this),value:DEFAULT_VALUE},{name:"magnifier",instanceService:magnifierServiceInstance.setMagnifier.bind(this),value:DEFAULT_VALUE},{name:"marginAlign",instanceService:marginAlignServiceInstance.setMargin.bind(this),value:DEFAULT_VALUE},{name:"navigationAuto",instanceService:navigationAutoServiceInstance.setNavigationAuto.bind(this),value:DEFAULT_VALUE},{name:"navigationButtons",instanceService:navigationButtonsServiceInstance.setNavigationButtons.bind(this),value:DEFAULT_VALUE},{name:"readAloud",instanceService:readAloudServiceInstance.setReadAloud.bind(this),value:DEFAULT_VALUE},{name:"readingGuide",instanceService:readingGuideServiceInstance.setReadingMaskGuide.bind(this),value:DEFAULT_VALUE},{name:"restartTopLeft",instanceService:restartTopLeftServiceInstance.setRestartTopLeft.bind(this),value:DEFAULT_VALUE},{name:"scroll",instanceService:scrollAspectServiceInstance.setScrollAspect.bind(this),value:DEFAULT_VALUE},{name:"skipToContent",instanceService:skipToContentServiceInstance.setSkipToContent.bind(this),value:DEFAULT_VALUE},{name:"stopAnimations",instanceService:stopAnimationsServiceInstance.setStopAnimations.bind(this),value:DEFAULT_VALUE},{name:"textSize",instanceService:textSizeServiceInstance.setFontSize.bind(this),value:DEFAULT_VALUE},{name:"textSpacing",instanceService:textSpacingServiceInstance.setSpacingText.bind(this),value:DEFAULT_VALUE},{name:"textColor",instanceService:textColorServiceInstance.setTextColor.bind(this),value:DEFAULT_VALUE},{name:"zoom",instanceService:zoomServiceInstance.setZoom.bind(this),value:DEFAULT_VALUE}]}pauseSettings=t=>{JSON.parse(t).forEach((t=>{let n=Object.values(t)[0];this.settingsServices.forEach((i=>{i.name===Object.keys(t)[0]&&(i.value=this.getSelectedValue(n)),i.instanceService(DEFAULT_VALUE)}))}))};getSelectedValue=t=>t.values.split(",")[t.valueSelected];playSettings=()=>{this.settingsServices.forEach((t=>{t.instanceService(t.value)}))}}class RouteService{currentRoute;historyRoute=[];toolbar=null;routes=["home","modes","settings","edit-setting"];constructor(){if(routeServiceIsInstantiated)throw new Error("RouteService is already instantiated.");routeServiceIsInstantiated=!0}initPages=(t,n=!1)=>(this.toolbar=t,localStorageServiceInstance.getItem("current-route").then((t=>this.routes.some((n=>t===n))?(this.navigate(t,n),t):(this.navigate("home"),"home"))));navigate=(t,n=!1)=>{n?(this.loadRoute(t),this.setCurrentRoute(t)):t!==this.currentRoute&&(this.routes.forEach((n=>{n===t?this.loadRoute(n):n===this.currentRoute&&this.toolbar.querySelector(`app-${n}`)?.remove()})),this.setCurrentRoute(t))};setHistoryAndHeader=t=>{const n=this.toolbar.querySelector("#header");switch(t){case"home":routeServiceInstance.historyRoute=[],n?.setAttribute("data-display","primary"),n?.setAttribute("data-page-title",""),n?.setAttribute("data-prev-btn","");break;case"settings":routeServiceInstance.historyRoute=["home"],n?.setAttribute("data-display","secondary"),n?.setAttribute("data-page-title","pageTitleSettings"),n?.setAttribute("data-page-icon","Settings"),n?.setAttribute("data-prev-btn","backToHome");break;case"edit-setting":routeServiceInstance.historyRoute=["home","settings"],n?.setAttribute("data-display","secondary"),n?.setAttribute("data-page-title","pageTitleEditSetting"),n?.setAttribute("data-page-icon","Settings"),n?.setAttribute("data-prev-btn","backToSettings");break;case"modes":routeServiceInstance.historyRoute=["home"],n?.setAttribute("data-display","secondary"),n?.setAttribute("data-page-title","pageTitleModes"),n?.setAttribute("data-page-icon",""),n?.setAttribute("data-prev-btn","backToHome")}};loadRoute=t=>{const n=`<app-${t}></app-${t}>`;this.toolbar.insertAdjacentHTML("beforeend",n);const i=this.toolbar.querySelector(`app-${t}`);i18nServiceInstance.translate(i)};setCurrentRoute=t=>{this.setHistoryAndHeader(t),this.currentRoute=t,localStorageServiceInstance.setItem("current-route",t)}}class CapitalLettersService{constructor(){if(capitalLettersServiceIsInstantiated)throw new Error("CapitalLettersService is already instantiated.");capitalLettersServiceIsInstantiated=!0}setCapitalLetters=t=>{let n="";switch(t){case"uppercase":n=`\n\t\t\t\t*:not(${APP_NAME}), *:not(${APP_NAME})::before, *:not(${APP_NAME})::after {\n\t\t\t\t\ttext-transform: uppercase !important;\n\t\t\t\t}\n\t\t\t`,stylesServiceInstance.setStyle("capital-letters",n);break;case"capitalize":n=`\n\t\t\t\t*:not(${APP_NAME}), *:not(${APP_NAME})::before, *:not(${APP_NAME})::after {\n\t\t\t\t\ttext-transform: capitalize !important;\n\t\t\t\t}\n\t\t\t`,stylesServiceInstance.setStyle("capital-letters",n);break;default:stylesServiceInstance.removeStyle("capital-letters")}}}class BodySelectorService{getBodyElements(){return document.body.querySelectorAll(`:not(script):not(${APP_NAME})`)}getTextNodes(t){const n=[],i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT);for(;i.nextNode();)n.push(i.currentNode);return n}isAlreadyEdited(t,n){return t.parentNode instanceof HTMLElement&&t.parentNode.classList.contains(n)}resetToDefaultBody=t=>{document.querySelectorAll(t.map((t=>`.${t}`)).join(", ")).forEach((t=>{const n=document.createTextNode(t.textContent);t.replaceWith(n)}));const n=document.body;this.concatTextNodes(n)};concatTextNodes=t=>{let n=t.firstChild;for(;n;){if(n.nodeType===Node.ELEMENT_NODE&&this.concatTextNodes(n),n.nodeType===Node.TEXT_NODE)for(;n.nextSibling&&n.nextSibling.nodeType===Node.TEXT_NODE;)n.textContent+=n.nextSibling.textContent,n.parentNode.removeChild(n.nextSibling);n=n.nextSibling}}}class ClearlyLinksService{constructor(){if(clearlyLinksServiceIsInstantiated)throw new Error("ClearlyLinksService is already instantiated.");clearlyLinksServiceIsInstantiated=!0}setClearlyLinks=t=>{let n="";switch(t){case"bold_underline":n="\n\t\t\t\t\ta:any-link {\n\t\t\t\t\t\tfont-weight: bold !important;\n\t\t\t\t\t\ttext-decoration: underline !important;\n\t\t\t\t\t}",stylesServiceInstance.setStyle("clearly-links",n),this.resetInverseBorder();break;case"bold_boxed":n="\n\t\t\t\t\ta:any-link {\n\t\t\t\t\t\tfont-weight: bold !important;\n\t\t\t\t\t\tborder: 2px solid black !important;\n\t\t\t\t\t}",stylesServiceInstance.setStyle("clearly-links",n),this.applyInverseBorder();break;default:stylesServiceInstance.removeStyle("clearly-links"),this.resetInverseBorder()}};applyInverseBorder=()=>{document.querySelectorAll("a").forEach((t=>{const n=this.getEffectiveBackgroundColor(t).match(/\d+/g);if(n){const i=n.map((t=>("0"+parseInt(t).toString(16)).slice(-2))).join(""),s=this.invertedColor(i);t.style.setProperty("border-color",s,"important")}}))};getEffectiveBackgroundColor=t=>{let n=t;for(;n;){const t=window.getComputedStyle(n).backgroundColor,i=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*(\d*\.?\d+)?\)/);if(i&&0!==(i[4]?parseFloat(i[4]):1))return t;n=n.parentElement}return"rgb(255, 255, 255)"};invertedColor=t=>(t=t.replace("#",""),`#${((1<<24)+(255-parseInt(t.substring(0,2),16)<<16)+(255-parseInt(t.substring(2,4),16)<<8)+(255-parseInt(t.substring(4,6),16))).toString(16).slice(1).toUpperCase()}`);resetInverseBorder=()=>{document.querySelectorAll("a").forEach((t=>{t.style.removeProperty("borderColor")}))}}class ClickFaciliteService{selectedElt;delay;isClicking=!1;clickableElements=["A","INPUT","SELECT","OPTION","TEXTAREA","LABEL","BUTTON"];timer=null;handlerClickFacilite;constructor(){if(clickFaciliteServiceIsInstantiated)throw new Error("ClickFaciliteService is already instantiated.");clickFaciliteServiceIsInstantiated=!0,this.handlerClickFacilite=this.createHandlerClickFacilite()}setClickFacilite=t=>{let n=t.split("_")[0];switch(this.delay=1e3*parseInt(t.split("_")[1]?.replace(/\D/g,""),10),n){case"bigZone":this.resetEventClick(),scrollAspectServiceInstance.setScrollAspect("bigScroll"),scrollTypeServiceInstance.setScrollType(DEFAULT_VALUE);break;case"longClick":this.resetEventClick(),scrollAspectServiceInstance.setScrollAspect("bigScroll"),scrollTypeServiceInstance.setScrollType("scrollOnClick"),this.longClick();break;case"autoClick":this.resetEventClick(),scrollAspectServiceInstance.setScrollAspect("bigScroll"),scrollTypeServiceInstance.setScrollType("scrollOnMouseover"),this.autoClick();break;default:scrollAspectServiceInstance.setScrollAspect(DEFAULT_VALUE),scrollTypeServiceInstance.setScrollType(DEFAULT_VALUE),this.resetEventClick()}};getClickableElt=t=>{let n=t.target,i=n.closest(this.clickableElements.join(","));return this.clickableElements.includes(n.nodeName)?n:i||n};longClick=()=>{document.addEventListener("click",this.handlerClickFacilite),document.addEventListener("mousedown",this.handlerClickFacilite),document.addEventListener("mouseup",this.handlerClickFacilite)};autoClick=()=>{document.addEventListener("mouseover",this.handlerClickFacilite),document.addEventListener("mouseout",this.handlerClickFacilite)};resetEventClick=()=>{document.removeEventListener("click",this.handlerClickFacilite),document.removeEventListener("mouseover",this.handlerClickFacilite),document.removeEventListener("mouseout",this.handlerClickFacilite),document.removeEventListener("mousedown",this.handlerClickFacilite),document.removeEventListener("mouseup",this.handlerClickFacilite)};doClick=t=>{if(this.clickableElements.includes(t.nodeName))switch(t.nodeName){case"A":case"AREA":this.clickLink(t);break;case"INPUT":this.clickInput(t);break;case"SELECT":case"TEXTAREA":t.focus();break;case"OPTION":this.selectOption(t);break;case"LABEL":document.getElementById(t.htmlFor).click();break;default:t.click()}else t.onclick&&null!==t.onclick?t.onclick():t.click()};clickLink=t=>{t.href&&""!==t.href&&(window.location=t.href)};clickInput=t=>{switch(t.focus(),t.type){case"radio":t.checked=!0;break;case"checkbox":t.checked=!t.checked}};selectOption=t=>{let n=t.closest("SELECT")?.options;for(var i=0;i<n.length;i++)n[i].text===t.text?(n[i].selected=!0,t.focus()):n[i].selected=!1};createHandlerClickFacilite=()=>t=>{switch(t.type){case"click":t.preventDefault();break;case"mousedown":case"mouseover":this.setTimeoutClick(t);break;case"mouseup":case"mouseout":this.clearTimeout()}};setTimeoutClick=t=>{this.timer=setTimeout((()=>{this.doClick(this.getClickableElt(t))}),this.delay)};clearTimeout=()=>{null!==this.timer&&clearTimeout(this.timer)}}class ColorContrastService{colorContrastDictionnary=[{name:DEFAULT_VALUE,cursor:DEFAULT_VALUE,focus:DEFAULT_VALUE,scroll:DEFAULT_VALUE,link:DEFAULT_VALUE},{name:"reinforcedContrasts",cursor:"big_black",focus:"big_black",scroll:"big_black",link:"darkblue_orange_brown"},{name:"ivory_black",cursor:"big_ivory",focus:"big_ivory",scroll:"big_ivory",link:"lightblue_orange_lightgreen"},{name:"black_ivory",cursor:"big_black",focus:"big_black",scroll:"big_black",link:"darkblue_orange_brown"},{name:"white_red",cursor:"big_white",focus:"big_white",scroll:"big_white",link:"yellow_darkblue_lightgreen"},{name:"black_yellow",cursor:"big_black",focus:"big_black",scroll:"big_black",link:"darkblue_purple_darkgreen"},{name:"white_blue",cursor:"big_white",focus:"big_white",scroll:"big_white",link:"yellow_orange_lightgreen"},{name:"yellow_blue",cursor:"big_yellow",focus:"big_yellow",scroll:"big_yellow",link:"white_darkgreen_lightgreen"},{name:"black_green",cursor:"big_black",focus:"big_black",scroll:"big_black",link:"yellow_orange_blue"}];matrixFilter="\n\t\t0.8,   0.2,   0,     0, 0\n    0.258, 0.742, 0,     0, 0\n    0,     0.142, 0.858, 0, 0\n    0,     0,     0,     1, 0";svgFilterDaltonism=`<svg xmlns="http://www.w3.org/2000/svg"><filter id="daltonism"><feColorMatrix in="SourceGraphic" type="matrix" values="${this.matrixFilter.replace(/\s+/g," ").trim()}"/></filter></svg>`;styleFilterDaltonism=`\n\t\thtml body > *:not(${APP_NAME}) {\n\t\t\tfilter: url('data:image/svg+xml;utf8,${this.svgFilterDaltonism}#daltonism');\n\t\t}\n\t`;constructor(){if(colorContrastServiceIsInstantiated)throw new Error("ColorContrastService is already instantiated.");colorContrastServiceIsInstantiated=!0}setColorsContrasts=t=>{switch(stylesServiceInstance.removeStyle("color-contrast"),stylesServiceInstance.removeStyle("filter-daltonism"),this.setServices(DEFAULT_VALUE),t){case DEFAULT_VALUE:break;case"daltonism":stylesServiceInstance.setStyle("filter-daltonism",this.styleFilterDaltonism);break;default:let n,i;"reinforcedContrasts"===t?(n="#000",i="#fff",this.setServices("reinforcedContrasts")):(n=t?.split("_")[0],i=t?.split("_")[1],this.setServices(`${n}_${i}`)),this.setColorContrastStyle(n,i)}};setColorContrastStyle=(t,n)=>{let i=`\n\t\t\t* {\n\t\t\t\tcolor: ${t} !important;\n\t\t\t\tbackground-color: ${n} !important;\n\t\t\t}\n\n\t\t\tfieldset,\n\t\t\tbutton {\n\t\t\t\tborder-color: ${t} !important;\n\t\t\t}\n\n\t\t\tinput, td, th {\n\t\t\t\tborder: 2px solid ${t} !important;\n\t\t\t}\n\n\t\t\ttd, th {\n\t\t\t\tpadding: .2em !important;\n\t\t\t}\n\n\t\t\ttable {\n\t\t\t\tborder-collapse: collapse !important;\n\t\t\t}\n\t\t`;stylesServiceInstance.setStyle("color-contrast",i)};setServices=t=>{const n=this.colorContrastDictionnary.find((n=>n.name===t));cursorAspectServiceInstance.setCursor(n?.cursor),focusAspectServiceInstance.setFocus(n?.focus),scrollAspectServiceInstance.setScrollAspect(n?.scroll),linkStyleServiceInstance.setLinkStyle(n?.link)}}class CursorAspectService{colorCursorValues=[{fill:"white",stroke:"black"},{fill:"ivory",stroke:"black"},{fill:"blue",stroke:"white"},{fill:"red",stroke:"black"},{fill:"yellow",stroke:"black"},{fill:"green",stroke:"white"},{fill:"black",stroke:"white"}];constructor(){if(cursorAspectServiceIsInstantiated)throw new Error("CursorAspectService is already instantiated.");cursorAspectServiceIsInstantiated=!0}drawCursor=(t,n,i,s)=>{let a=this.colorCursorValues.find((t=>t.fill===i))?.stroke,o="";switch(t){case"pointer":o="M43.074 4C52.2 4 52.2 13.064 52.2 13.064v52.368-21.653s1.014-9.063 10.14-9.063c9.127 0 10.141 8.56 10.141 8.56v23.666-15.106s2.535-8.056 9.633-8.056c7.099 0 9.126 8.056 9.126 8.056v19.638-9.064s2.029-8.56 10.141-8.56S110 62.41 110 62.41V99.17c-1.014 9.567-11.661 19.806-21.802 23.162-6.084 2.015-31.434 2.015-39.547 1.008-8.112-1.008-19.342-9.463-24.843-20.142C13.967 84.095 6.779 70.803 4.54 64.425c-2.12-6.043 2.535-10.575 4.563-11.582 2.028-1.007 7.099-2.743 13.69 4.028 5.152 5.293 10.647 17.12 10.647 17.12V13.065S33.948 4 43.074 4Z";break;case"text":o="M14.857 69.158h7.857v39.053c0 4.053-3.442 7.473-7.857 7.473H8.286c-2.844 0-5.286 2.235-5.286 5.158C3 123.765 5.442 126 8.286 126h6.571c5.134 0 9.793-2.029 13.143-5.319 3.35 3.29 8.009 5.319 13.143 5.319h6.571c2.844 0 5.286-2.235 5.286-5.158 0-2.923-2.442-5.158-5.286-5.158h-6.571c-4.415 0-7.857-3.42-7.857-7.473V69.158h7.857c2.843 0 5.286-2.235 5.286-5.158 0-2.923-2.443-5.158-5.286-5.158h-7.857V19.79c0-4.054 3.442-7.474 7.857-7.474h6.571c2.844 0 5.286-2.235 5.286-5.158C53 4.235 50.558 2 47.714 2h-6.571C36.009 2 31.35 4.03 28 7.319 24.65 4.029 19.991 2 14.857 2H8.286C5.442 2 3 4.235 3 7.158c0 2.923 2.442 5.158 5.286 5.158h6.571c4.415 0 7.857 3.42 7.857 7.473v39.053h-7.857c-2.843 0-5.286 2.235-5.286 5.158 0 2.923 2.443 5.158 5.286 5.158Z";break;default:o="M5 6.2a1 1 0 0 1 1.7-.8l76.5 66a1 1 0 0 1-.6 1.8l-32.1 2.5a1 1 0 0 0-.8 1.4l17.8 36.8a1 1 0 0 1-.5 1.3l-17 7.4c-.5.2-1 0-1.3-.5l-17-36.8a1 1 0 0 0-1.6-.4L6.6 103.5a1 1 0 0 1-1.6-.7V6.2Z"}return`<svg width="${n}" height="${n}" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><path fill="${i}" d="${o}" stroke="${a}" stroke-width="${s}"/></svg>`};setCursor=t=>{if(t===DEFAULT_VALUE)stylesServiceInstance.removeStyle("cursor-aspect");else if(t){let n=t.split("_")[1]===DEFAULT_VALUE?"black":t.split("_")[1],i="bigCursor"===t.split("_")[0]?56:128,s=`\n\t\t\t\t*:not(${APP_NAME}) {\n\t\t\t\t\tcursor: url('data:image/svg+xml;utf8,${this.drawCursor("default",i,n,6)}') 0 0, default !important;\n\t\t\t\t}\n\n\t\t\t\ta:link,\n\t\t\t\ta:visited,\n\t\t\t\tbutton {\n\t\t\t\t\tcursor: url('data:image/svg+xml;utf8,${this.drawCursor("pointer",i,n,6)}') ${i/3} 0, pointer !important;\n\t\t\t\t}\n\n\t\t\t\th1, h2, h3, h4, h5, h6,\n\t\t\t\tp, ul, ol, dl, blockquote,\n\t\t\t\tpre, td, th,\n\t\t\t\tinput, textarea, legend {\n\t\t\t\t\tcursor: url('data:image/svg+xml;utf8,${this.drawCursor("text",i,n,4)}') ${i/4} ${i/4}, text !important;\n\t\t\t\t}\n\t\t\t`;stylesServiceInstance.setStyle("cursor-aspect",s)}}}class DeleteBackgroundImagesService{listImgElements;classDeleteBackgroundImg=`${PREFIX}delete-background-img`;classDeleteForegroundImg=`${PREFIX}delete-foreground-img`;classSpanImage=`${PREFIX}delete-background-images__span`;styleDeleteBackgroundImages=`\n\t\t.${this.classDeleteBackgroundImg},\n\t\t.${this.classDeleteBackgroundImg}:before,\n\t\t.${this.classDeleteBackgroundImg}:after {\n\t\t\tbackground-image: none !important;\n\t\t\tbackground-color: white;\n\t\t\tcolor: black;\n\t\t}\n\n\t\t.${this.classDeleteBackgroundImg} * {\n\t\t\tcolor: black;\n\t\t}\n\t`;styleDeleteForegroundImages=`\n\t\t.${this.classSpanImage} {\n\t\t\tfont-size: 1rem;\n\t\t}\n\n\t\t.${this.classDeleteForegroundImg} {\n\t\t\tvisibility: hidden !important;\n\t\t}\n\t`;styleDeleteTransparencyEffects="\n\t\t*, *::before, *::after {\n\t\t\topacity: 1 !important;\n\t\t\tfilter: none !important\n\t\t}\n\t";constructor(){if(deleteBackgroundImagesServiceIsInstantiated)throw new Error("DeleteBackgroundImagesService is already instantiated.");deleteBackgroundImagesServiceIsInstantiated=!0}setDeleteBackgroundImages=t=>{this.resetStyleDeleteBackground(),t!==DEFAULT_VALUE&&this.setStyleDeleteBackground(t)};setStyleDeleteBackground=t=>{let n="";t.match(/[A-Z]?[a-z]+/g).forEach((t=>{switch(t.toLowerCase()){case"background":n+=this.styleDeleteBackgroundImages,Array.from(document.querySelectorAll(`*:not(${domServiceInstance.excludedElements})`)).forEach((t=>{"none"===window.getComputedStyle(t).getPropertyValue("background-image")&&"none"===window.getComputedStyle(t,"::before").getPropertyValue("background-image")&&"none"===window.getComputedStyle(t,"::after").getPropertyValue("background-image")||t.classList.add(this.classDeleteBackgroundImg)}));break;case"foreground":n+=this.styleDeleteForegroundImages,document.querySelectorAll("img, svg, canvas, area").forEach((t=>{t.classList.add(this.classDeleteForegroundImg);let n=this.getAccessibleLabel(t);if(""!==n){let i=document.createElement("span");i.classList.add(this.classSpanImage),i.textContent=`${i18nServiceInstance.getMessage("textContentImageHidden")} ${n}`,t.parentNode.insertBefore(i,t)}}));break;case"transparent":n+=this.styleDeleteTransparencyEffects}})),stylesServiceInstance.setStyle("delete-background-images",n)};getAccessibleLabel=t=>{if(t.alt||t.ariaLabel||document.querySelector(`#${t.getAttribute("aria-labelledby")}`)?.textContent)return t.alt||t.ariaLabel||document.querySelector(`#${t.getAttribute("aria-labelledby")}`)?.textContent;{let n=[];return t.querySelector("title")?n.push(t.querySelector("title").textContent):t.querySelector("desc")?n.push(t.querySelector("desc").textContent):t.querySelector("text")&&n.push(t.querySelector("text").textContent),n.join(" ")}};resetStyleDeleteBackground=()=>{stylesServiceInstance.removeStyle("delete-background-images"),document.querySelectorAll(`.${this.classSpanImage}`).forEach((t=>{t.remove()})),document.querySelectorAll(`.${this.classDeleteForegroundImg}`).forEach((t=>{t.classList.remove(this.classDeleteForegroundImg)})),document.querySelectorAll(`.${this.classDeleteBackgroundImg}`).forEach((t=>{t.classList.remove(this.classDeleteBackgroundImg)}))}}class DeleteLayoutService{storedStyles=[];constructor(){if(deleteLayoutServiceIsInstantiated)throw new Error("DeleteLayoutService is already instantiated.");deleteLayoutServiceIsInstantiated=!0}setDeleteLayout=t=>{if(this.storedStyles?.forEach((t=>{t.parent.appendChild(t.stylesheet)})),t!==DEFAULT_VALUE){const t=document.querySelectorAll('link[rel="stylesheet"], style');Array.from(t).filter((t=>{if(!t.id.startsWith(PREFIX)){const n={stylesheet:t,parent:t.parentElement};this.storedStyles.push(n),t.remove()}}))}}}class FocusAspectService{constructor(){if(focusAspectServiceIsInstantiated)throw new Error("FocusAspectService is already instantiated.");focusAspectServiceIsInstantiated=!0}setFocus=t=>{if(t===DEFAULT_VALUE)stylesServiceInstance.removeStyle("focus-aspect");else if(t){const[n,i]=t.split("_");let s=`\n\t\t\t\t*:focus, *:focus-visible {\n\t\t\t\t\toutline-style: solid !important;\n\t\t\t\t\t${n!==DEFAULT_VALUE?`outline-width: ${"big"===n?"4px":"10px"} !important;`:""}\n\t\t\t\t\t${i!==DEFAULT_VALUE?`outline-color: ${i} !important;`:""}\n\t\t\t\t}\n\t\t\t`;stylesServiceInstance.setStyle("focus-aspect",s)}}}class FontFamilyService{fontDictionnary=[{name:"AccessibleDfA",size:"91.125%",folder:"accessibleDfA",files:[{name:"AccessibleDfA-Bold.woff2",style:"normal",weight:"700"},{name:"AccessibleDfA-Italic.woff2",style:"italic",weight:"400"},{name:"AccessibleDfA-Regular.woff2",style:"normal",weight:"400"}]},{name:"B612Mono",size:"75%",folder:"B612",files:[{name:"B612Mono-Bold.woff2",style:"normal",weight:"700"},{name:"B612Mono-BoldItalic.woff2",style:"italic",weight:"700"},{name:"B612Mono-Italic.woff2",style:"italic",weight:"400"},{name:"B612Mono-Regular.woff2",style:"normal",weight:"400"}]},{name:"Airbus",size:"100%",folder:"airbus",files:[{name:"Airbus-Special.woff2",style:"normal",weight:"400"}]},{name:"ComicSansMS",size:"100%",folder:"comic",files:[{name:"comic-Sans-MS.woff2",style:"normal",weight:"400"}]},{name:"LexendDeca",size:"92%",folder:"lexendDeca",files:[{name:"LexendDeca-Black.woff2",style:"normal",weight:"900"},{name:"LexendDeca-Bold.woff2",style:"normal",weight:"700"},{name:"LexendDeca-ExtraBold.woff2",style:"normal",weight:"800"},{name:"LexendDeca-ExtraLight.woff2",style:"normal",weight:"200"},{name:"LexendDeca-Light.woff2",style:"normal",weight:"300"},{name:"LexendDeca-Medium.woff2",style:"normal",weight:"500"},{name:"LexendDeca-Regular.woff2",style:"normal",weight:"400"},{name:"LexendDeca-SemiBold.woff2",style:"normal",weight:"600"},{name:"LexendDeca-Thin.woff2",style:"normal",weight:"100"}]},{name:"Luciole",size:"87.5%",folder:"luciole",files:[{name:"Luciole-Bold-Italic.woff2",style:"italic",weight:"700"},{name:"Luciole-Bold.woff2",style:"normal",weight:"700"},{name:"Luciole-Regular-Italic.woff2",style:"italic",weight:"400"},{name:"Luciole-Regular.woff2",style:"normal",weight:"400"}]},{name:"SylexiadSans",size:"125%",folder:"sylexiadSans",files:[{name:"SylexiadSansMedium-BoldItalic.woff2",style:"italic",weight:"700"},{name:"SylexiadSansMedium-Bold.woff2",style:"normal",weight:"700"},{name:"SylexiadSansMedium-Italic.woff2",style:"italic",weight:"400"},{name:"SylexiadSansMedium.woff2",style:"normal",weight:"400"},{name:"SylexiadSansSpacedMed-BoldItalic.woff2",style:"italic",weight:"700"},{name:"SylexiadSansSpacedMed-Bold.woff2",style:"normal",weight:"700"},{name:"SylexiadSansSpacedMed-Italic.woff2",style:"italic",weight:"400"},{name:"SylexiadSansSpacedMed.woff2",style:"normal",weight:"400"},{name:"SylexiadSansSpacedThin-BoldItalic.woff2",style:"italic",weight:"700"},{name:"SylexiadSansSpacedThin-Bold.woff2",style:"normal",weight:"700"},{name:"SylexiadSansSpacedThin-Italic.woff2",style:"italic",weight:"400"},{name:"SylexiadSansSpacedThin.woff2",style:"normal",weight:"400"},{name:"SylexiadSansThin-BoldItalic.woff2",style:"italic",weight:"700"},{name:"SylexiadSansThin-Bold.woff2",style:"normal",weight:"700"},{name:"SylexiadSansThin-Italic.woff2",style:"italic",weight:"400"},{name:"SylexiadSansThin.woff2",style:"normal",weight:"400"}]},{name:"Verdana",size:"87.5%",folder:"verdana",files:[{name:"Verdana-Bold-Italic.woff2",style:"italic",weight:"700"},{name:"Verdana-Bold.woff2",style:"normal",weight:"700"},{name:"Verdana-Italic.woff2",style:"italic",weight:"400"},{name:"Verdana.woff2",style:"normal",weight:"400"}]}];constructor(){if(fontFamilyServiceIsInstantiated)throw new Error("FontFamilyService is already instantiated.");fontFamilyServiceIsInstantiated=!0}setFontFamily=t=>{if(stylesServiceInstance.removeStyle("font-family"),t!==DEFAULT_VALUE){let n=[];this.fontDictionnary.forEach((t=>{for(const i of t.files)n.push(`\n\t\t\t\t\t\t@font-face {\n\t\t\t\t\t\t\tfont-family:"${t.name}";\n\t\t\t\t\t\t\tsrc: local("${t.name}"), url("${appPath}assets/fonts/${t.folder}/${i.name}");\n\t\t\t\t\t\t\tfont-style: ${i.style};\n\t\t\t\t\t\t\tfont-weight: ${i.weight};\n\t\t\t\t\t\t\tfont-display: swap;\n\t\t\t\t\t\t\tsize-adjust: ${t.size};\n\t\t\t\t\t\t}`)})),n.push(`* { font-family: ${t} !important; }`),stylesServiceInstance.setStyle("font-family",n.join(""))}}}class LinkStyleService{constructor(){if(linkStyleServiceIsInstantiated)throw new Error("LinkStyleService is already instantiated.");linkStyleServiceIsInstantiated=!0}setLinkStyle=t=>{if(t===DEFAULT_VALUE)stylesServiceInstance.removeStyle("link");else if(t){const[n,i,s]=t.split("_");let a=`${n!==DEFAULT_VALUE?`a:link { color: ${n} !important; }`:""} ${s!==DEFAULT_VALUE?`a:visited { color: ${s} !important; }`:""} ${i!==DEFAULT_VALUE?`a:active, a:hover, a:focus { color: ${i} !important; }`:""}`;stylesServiceInstance.setStyle("link",a)}}}class MagnifierService{zoom;handler;magnifierWidth=300;magnifierHeight=300;magnifierTransition=300;ofs_x;ofs_y;pos_x;pos_y;magnifier;magnifierContent;magnifierBody;observerObj;syncTimeout;magnifierClickTimer;styleMagnifier=`\n\t\t#${PREFIX}magnifier {\n\t\t\tbackground-color: white;\n\t\t\tborder: 1px solid black;\n\t\t\tborder-radius: 0.5em;\n\t\t\twidth: ${this.magnifierWidth}px;\n\t\t\theight: ${this.magnifierHeight}px;\n\t\t\tposition: fixed;\n\t\t\toverflow: hidden;\n\t\t\tpointer-events: none;\n\t\t\ttransition: box-shadow ease ${this.magnifierTransition}ms;\n\t\t\tz-index: calc(infinity);\n\t\t}\n\n\t\t#${PREFIX}magnifier-content {\n\t\t\tdisplay: block;\n\t\t\tmargin-left: 0;\n\t\t\tmargin-top: 0;\n\t\t\tpadding-top: 0;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\toverflow: visible;\n\t\t\ttransform-origin: left top;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t#${PREFIX}magnifier-glass {\n\t\t\tbackground-color: white;\n\t\t\topacity: 0 !important;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tcursor: move;\n\t\t}\n\t`;constructor(){if(magnifierServiceIsInstantiated)throw new Error("MagnifierService is already instantiated.");magnifierServiceIsInstantiated=!0,this.handler=this.createHandler()}setMagnifier=t=>{t===DEFAULT_VALUE?(stylesServiceInstance.removeStyle("magnifier"),document.querySelector(`#${PREFIX}magnifier`)?.remove(),this.unBindDOMObserver()):(stylesServiceInstance.setStyle("magnifier",this.styleMagnifier),this.zoom=parseInt(t.replace(/\D/g,""),10),this.initMagnifier())};initMagnifier=()=>{document.querySelector(`#${PREFIX}magnifier`)||this.setMagnifierElements(),this.magnifier=document.querySelector(`#${PREFIX}magnifier`),this.magnifierContent=document.querySelector(`#${PREFIX}magnifier-content`),window.addEventListener("resize",this.handler,!1),window.addEventListener("scroll",this.handler,!0),window.addEventListener("scrollend",this.handler,!0),window.addEventListener("pointerdown",this.handler),window.addEventListener("pointerup",this.handler),this.magnifierContent.style.transform=`scale(${this.zoom})`,this.makeDraggable(),this.setPosition(this.magnifier,250,250),this.syncContent(),this.bindDOMObserver()};setMagnifierElements=()=>{let t=document.createDocumentFragment();const n=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div");n.setAttribute("id",`${PREFIX}magnifier`),i.setAttribute("id",`${PREFIX}magnifier-content`),s.setAttribute("id",`${PREFIX}magnifier-glass`),n.appendChild(i),n.appendChild(s),t.appendChild(n),document.body.insertBefore(t,document.querySelector(APP_NAME))};setPosition=(t,n,i)=>{t.style.left=`${n}px`,t.style.top=`${i}px`};syncContent=()=>{this.prepareContent(),this.syncViewport(),this.syncScrollBars()};prepareContent=()=>{this.magnifierContent.innerHTML="";const t=document.body,n=t.cloneNode(!0),i=t.style.backgroundColor;i&&(this.magnifier.style.backgroundColor=i),n.style.cursor="auto",n.style.paddingTop="0px",n.style.position="relative",n.setAttribute("unselectable","on");const s=t.querySelectorAll("canvas"),a=n.querySelectorAll("canvas");if(s.length>0&&s.length===a.length)for(let t=0;t<s.length;t++){let n=a[t].getContext("2d");try{n?.drawImage(s[t],0,0)}catch(t){console.error(t)}}this.removeSelectors(n,"script"),this.removeSelectors(n,"audio"),this.removeSelectors(n,"video"),this.removeSelectors(n,APP_NAME),this.removeSelectors(n,`#${PREFIX}magnifier`),this.magnifierContent.appendChild(n),this.magnifierContent.style.width=`${document.body.clientWidth}px`,this.magnifierContent.style.height=`${document.body.clientHeight}px`,this.magnifierBody=this.magnifierContent.querySelector("body"),this.magnifier?.classList.add(`${PREFIX}magnifier-ignore-class`),this.magnifierContent?.classList.add(`${PREFIX}magnifier-ignore-class`),this.magnifierBody?.classList.add(`${PREFIX}magnifier-ignore-class`),this.magnifierBody.querySelectorAll("*").forEach((t=>{t.classList.add(`${PREFIX}magnifier-ignore-class`)}))};syncViewport=()=>{const t=this.magnifier?.offsetLeft,n=this.magnifier?.offsetTop,i=document.body.scrollLeft,s=document.body.scrollTop,a=-t*this.zoom-i*this.zoom-(this.zoom-1)*(this.magnifierWidth/2),o=-n*this.zoom-s*this.zoom-(this.zoom-1)*(this.magnifierHeight/2);this.setPosition(this.magnifierContent,a,o)};syncScrollBars=()=>{if(null!==this.magnifierBody){const t=window.scrollX||document.documentElement.scrollLeft,n=window.scrollY||document.documentElement.scrollTop;this.setPosition(this.magnifierBody,-t,-n)}};stopSyncScrollBars=()=>{null!==this.magnifierBody&&(this.magnifierBody=null),null!==this.magnifier&&(this.magnifier=null)};removeSelectors=(t,n)=>{const i=t.querySelectorAll(n);if(i.length>0)for(let t=0;t<i.length;t++)i[t].parentNode?.removeChild(i[t])};syncContentQueued=()=>{window.clearTimeout(this.syncTimeout),this.syncTimeout=window.setTimeout(this.syncContent.bind(this),100)};domChanged=()=>{this.syncContentQueued()};unBindDOMObserver=()=>{this.observerObj&&(this.observerObj.disconnect(),this.observerObj=null)};bindDOMObserver=()=>{this.observerObj=new MutationObserver((t=>{for(let n=0;n<t.length;n++)this.magnifier=document.querySelector(`#${PREFIX}magnifier`),t[n].target?.parentElement?.classList?.contains(`${PREFIX}magnifier-ignore-class`)||t[n].target?.firstChild?.parentElement?.classList?.contains(`${PREFIX}magnifier-ignore-class`)||this.domChanged()})),this.observerObj.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","width","height","style"],attributeOldValue:!0,characterDataOldValue:!0})};makeDraggable=()=>{this.magnifier.style.cursor="move",this.magnifier.addEventListener("pointermove",this.handler)};downHandler=t=>{this.magnifier=document.querySelector(`#${PREFIX}magnifier`);const n=t.pageX||t.touches&&t.touches[0].pageX,i=t.pageY||t.touches&&t.touches[0].pageY;this.ofs_x=this.magnifier?.getBoundingClientRect().left-this.magnifier?.offsetLeft,this.ofs_y=this.magnifier?.getBoundingClientRect().top-this.magnifier?.offsetTop,this.pos_x=n-(this.magnifier?.getBoundingClientRect().left+window.scrollX||document.documentElement.scrollLeft),this.pos_y=i-(this.magnifier?.getBoundingClientRect().top+window.scrollY||document.documentElement.scrollTop)};moveHandler=t=>{if(null!==this.magnifier){const n=t.pageX||t.touches&&t.touches[0].pageX,i=t.pageY||t.touches&&t.touches[0].pageY,s=n-this.pos_x-this.ofs_x-(window.scrollX||document.documentElement.scrollLeft),a=i-this.pos_y-this.ofs_y-(window.scrollY||document.documentElement.scrollTop);this.setPosition(this.magnifier,s,a),this.syncViewport()}};upHandler=()=>{null!==this.magnifier&&(this.magnifier=null)};resizeWindow=()=>{let t;t&&clearTimeout(t),t=setTimeout((()=>{this.stopSyncScrollBars()}),100),this.syncContent()};pointerIsInMagnifier=t=>{const{clientX:n,clientY:i}=t,{offsetLeft:s,offsetTop:a}=this.magnifier;return n>s&&n<s+this.magnifierWidth&&i>a&&i<a+this.magnifierHeight};setMovingStyle=()=>{this.magnifier.style.pointerEvents="auto",this.magnifier.style.boxShadow="0 0 20px 10px rgba(0,0,0, 0.25)"};setStaticStyle=()=>{this.magnifier.style.pointerEvents=null,this.magnifier.style.boxShadow=null};createHandler=()=>t=>{switch(t.type){case"resize":this.magnifierBody=this.magnifierContent.querySelector("body"),this.resizeWindow();break;case"scroll":this.magnifierBody=this.magnifierContent.querySelector("body"),this.syncScrollBars();break;case"scrollend":this.stopSyncScrollBars();break;case"pointerdown":this.downHandler(t),this.magnifierClickTimer=setTimeout((()=>{this.magnifier&&this.pointerIsInMagnifier(t)&&(document.body.style.userSelect="none",this.setMovingStyle())}),this.magnifierTransition);break;case"pointermove":this.moveHandler(t);break;case"pointerup":document.body.style.userSelect=null,this.magnifier&&(this.setStaticStyle(),clearTimeout(this.magnifierClickTimer)),this.upHandler()}}}class MarginAlignService{alignLeftStyle="\n\t\tp {\n\t\t\ttext-align: left !important;\n\t\t}\n\t";marginStyle="\n\t\tp, h1, h2, h3, h4, h5, h6 {\n\t\t\tposition: relative;\n\t\t\ttext-align: left !important;\n\t\t\tmargin-left: 1lh !important;\n\t\t}\n\n\t\tp *, h1 *, h2 *, h3 *, h4 *, h5 *, h6 * {\n\t\t\tmargin-left: 0 !important;\n\t\t}\n\t";marginLeftStyle=`\n\t\t${this.marginStyle}\n\n\t\tp:before, h1:before, h2:before, h3:before, h4:before, h5:before, h6:before {\n\t\t\tcontent: "";\n\t\t\tbackground: currentColor;\n\t\t\tborder-radius: 10px;\n\t\t\twidth: 12px;\n\t\t\theight: 100%;\n\t\t\tposition: absolute;\n\t\t\tleft: -24px;\n\t\t}\n\t`;marginListStyle=`\n\t\t${this.marginStyle}\n\n\t\tul, ol {\n\t\t\tlist-style-position: initial !important;\n\t\t\tlist-style-image: none !important;\n\t\t\tlist-style-type: decimal !important;\n\t\t}\n\n\t\tp:before, h1:before, h2:before, h3:before, h4:before, h5:before, h6:before {\n\t\t\tcontent: "";\n\t\t\tbackground: radial-gradient(ellipse at center, currentColor 10%, currentColor 30%, transparent 30%);\n\t\t\tbackground-repeat: repeat-y;\n\t\t\tbackground-position-x: right;\n\t\t\tbackground-size: 1lh 1lh;\n\t\t\twidth: 1lh;\n\t\t\theight: 100%;\n\t\t\tposition: absolute;\n\t\t\tleft: -1lh;\n\t\t}\n\t`;constructor(){if(marginAlignServiceIsInstantiated)throw new Error("MarginAlignService is already instantiated.");marginAlignServiceIsInstantiated=!0}setMargin=t=>{switch(stylesServiceInstance.removeStyle("align-left"),stylesServiceInstance.removeStyle("margin-left"),stylesServiceInstance.removeStyle("margin-list"),t){case"alignLeft":stylesServiceInstance.setStyle("align-left",this.alignLeftStyle);break;case"marginLeft":stylesServiceInstance.setStyle("margin-left",this.marginLeftStyle);break;case"marginList":stylesServiceInstance.setStyle("margin-list",this.marginListStyle)}}}class NavigationAutoService{currentFocusElt;currentIndex;handler;timer=null;constructor(){if(navigationAutoServiceIsInstantiated)throw new Error("NavigationAutoService is already instantiated.");navigationAutoServiceIsInstantiated=!0,this.handler=this.createHandler()}setNavigationAuto=t=>{if(window.removeEventListener("focus",this.handler),this.clearIntervalFocus(),t!==DEFAULT_VALUE){window.addEventListener("focus",this.handler,!0);let n=1e3*parseInt(t.split("_")[1]?.replace(/\D/g,""),10);this.setIntervalFocus(n)}};focusElement=()=>{const t=domServiceInstance.getFocusableElements();let n=0;this.currentFocusElt&&(n=(t.indexOf(this.currentFocusElt)+1)%t.length);const i=t[n];i?.focus(),this.currentFocusElt=i};setIntervalFocus=t=>{this.timer=setInterval((()=>{this.focusElement()}),t)};clearIntervalFocus=()=>{null!==this.timer&&(clearInterval(this.timer),this.timer=null)};createHandler(){return t=>{t.currentTarget&&(this.currentFocusElt=t.currentTarget)}}}class NavigationButtonsService{currentFocusElt;handlerNavigationButtons;constructor(){if(navigationButtonsServiceIsInstantiated)throw new Error("NavigationButtonsService is already instantiated.");navigationButtonsServiceIsInstantiated=!0,this.handlerNavigationButtons=this.createHandlerNavigationButtons()}buttonsList=["tab","shiftTab","click","escape"];setNavigationButtons=t=>{this.resetNavigationButtons(),t!==DEFAULT_VALUE&&(this.getFocusedElement(),this.addNavigationButtons())};resetNavigationButtons=()=>{this.buttonsList.forEach((t=>{domServiceInstance.removeButtonsInDom(t)})),document.removeEventListener("click",this.handlerNavigationButtons),document.removeEventListener("focusout",this.handlerNavigationButtons)};addNavigationButtons=()=>{this.buttonsList.forEach((t=>{domServiceInstance.addButtonsInDom(t),document.querySelector(`#${CONTAINER_BUTTONS_ID}__${t}`).addEventListener("mousedown",(n=>{n.preventDefault(),n.stopPropagation(),this.simulateKeyEvent(t)}))}))};simulateKeyEvent=t=>{switch(t){case"tab":this.focusElement("next");break;case"shiftTab":this.focusElement("previous");break;case"click":this.currentFocusElt?.click();break;case"escape":this.simulateKeydownEscape()}};focusElement=t=>{const n=domServiceInstance.getFocusableElements();let i=0;if(this.currentFocusElt){const s=n.indexOf(this.currentFocusElt);i="next"===t?s+1:s-1,i=i>n.length-1?0:i<0?n.length-1:i}const s=n[i];s?.focus(),this.currentFocusElt=s};getFocusedElement=()=>{document.addEventListener("focus",this.handlerNavigationButtons)};simulateKeydownEscape=()=>{var t=new KeyboardEvent("keydown",{key:"Escape",keyCode:27,code:"Escape",which:27,bubbles:!0,cancelable:!0});document.dispatchEvent(t)};createHandlerNavigationButtons=()=>t=>{"focusout"===t.type&&(this.currentFocusElt=t.currentTarget)}}class ReadAloudService extends BodySelectorService{handler;tooltipReadAloud;readAloudTooltipId=`${PREFIX}read-aloud-tooltip`;readAloudSpan=`${PREFIX}read-aloud-span`;regexWord=/\S+\s*[.,!?]*/g;regexSentence=/[^\.!\?]+[\.!\?]+["']?|.+$/g;classReadAloud=`\n\t\t#${this.readAloudTooltipId} {\n\t\t\tposition: fixed;\n\t\t\tbackground-color: rgba(0, 0, 0, 0.7);\n\t\t\tcolor: white;\n\t\t\tborder: 1px solid currentColor;\n\t\t\twidth: fit-content;\n\t\t\tpadding: 1em;\n\t\t\tpointer-events: none;\n\t\t\tz-index: calc(infinity);\n\t\t\ttransform: translate(75px, 50%);\n\t\t}\n\n\t\th1, h2, h3, h4, h5, h6,\n\t\tp, ul, ol, dl, blockquote,\n\t\tpre, td, th,\n\t\tinput, textarea, legend {\n\t\t\tcursor: url('data:image/svg+xml;utf8,<svg width="24" height="24" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><path fill="black" d="M114.821 60.554c0 33.882-26.402 56.278-56.846 56.278-6.216 0-21.82-2.872-25.265-5.743C26.394 117.406 9.168 122 9.168 122c-.374-.298.176-1.564 1.067-3.613 1.913-4.401 5.396-12.415 4.675-22.229C6.87 85.822 4 74.911 4 60.554 4 30.108 28.105 6 58.55 6c32.73 0 56.271 24.693 56.271 54.554Zm-28.55 4.38a3.532 3.532 0 1 1 0-7.064 3.532 3.532 0 0 1 0 7.063Zm-27.075 0a3.532 3.532 0 1 1 0-7.064 3.532 3.532 0 0 1 0 7.063Zm-30.607-3.532a3.532 3.532 0 1 0 7.063 0 3.532 3.532 0 0 0-7.063 0Z" stroke="white" stroke-width="6"/></svg>') 24 24, text !important;\n\t\t}\n\t`;constructor(){if(super(),readAloudServiceIsInstantiated)throw new Error("ReadAloudService is already instantiated.");readAloudServiceIsInstantiated=!0,this.handler=this.createHandler()}setReadAloud=t=>{if(this.resetBody(),t===DEFAULT_VALUE)this.resetReadAloud();else{switch(t){case"word":this.setBodyToSpeech(this.regexWord);break;case"sentence":this.setBodyToSpeech(this.regexSentence);break;case"all":document.addEventListener("focusin",this.handler)}this.setTooltip(),document.addEventListener("pointerdown",this.handler),document.addEventListener("keydown",this.handler),document.addEventListener("contextmenu",this.handler)}textColorServiceInstance.textColorIsActive&&textColorServiceInstance.setTextColor("active")};setBodyToSpeech=t=>{this.getBodyElements().forEach((n=>{this.getTextNodes(n).forEach((n=>{const i=n.nodeValue;if(i&&!this.isAlreadyEdited(n,this.readAloudSpan)){const s=n.parentNode,a=this.createFragmentForText(i,t);s&&(s.insertBefore(a,n),s.removeChild(n))}}))}))};createFragmentForText(t,n){const i=document.createDocumentFragment(),s=t.match(n);return s?.length>0&&s?.forEach(((t,n)=>{const a=document.createElement("span");a.classList.add(this.readAloudSpan),a.textContent=t,i.appendChild(a),n<s.length-1&&i.appendChild(document.createTextNode(" "))})),i}resetBody=()=>{this.tooltipReadAloud?.remove(),this.resetToDefaultBody([this.readAloudSpan,TEXT_COLOR_SPAN_CLASS])};resetReadAloud=()=>{stylesServiceInstance.removeStyle("read-aloud"),document.removeEventListener("pointermove",this.handler),document.removeEventListener("pointerdown",this.handler),document.removeEventListener("keydown",this.handler),document.removeEventListener("contextmenu",this.handler),document.removeEventListener("focusin",this.handler)};setTooltip=()=>{const t=document.createDocumentFragment(),n=document.createElement("div");n.setAttribute("id",this.readAloudTooltipId),n.textContent=i18nServiceInstance.getMessage("readAloud_tooltip"),t.appendChild(n),document.body.insertBefore(t,document.body.firstChild),stylesServiceInstance.setStyle("read-aloud",this.classReadAloud),this.tooltipReadAloud=document.querySelector(`#${this.readAloudTooltipId}`),document.addEventListener("pointermove",this.handler)};getInnerText=t=>t.classList.contains("cplus-colored-text")?t.parentElement.innerText:t.innerText;createHandler=()=>t=>{switch(t.type){case"pointermove":this.tooltipReadAloud.style.left=t.pageX-(window.scrollX||document.documentElement.scrollLeft)+"px",this.tooltipReadAloud.style.top=t.pageY-(window.scrollY||document.documentElement.scrollTop)+"px";break;case"pointerdown":speechSynthesis.speak(new SpeechSynthesisUtterance(this.getInnerText(t.target)));break;case"keydown":"Escape"!==t.key&&"Esc"!==t.key||speechSynthesis.cancel();break;case"contextmenu":speechSynthesis.cancel();break;case"focusin":speechSynthesis.speak(new SpeechSynthesisUtterance(document.activeElement.innerText))}}}class ReadingGuideService{guideType="";sizeGuide=40;handler;verticalGuideID=`${PREFIX}vertical-guide-elt`;maskTopEltID=`${PREFIX}mask-guide__top-elt`;maskBottomEltID=`${PREFIX}mask-guide__bottom-elt`;closeTextID=`${PREFIX}mask-guide__close-text`;classRuleGuide=`\n\t\t#${this.verticalGuideID} {\n\t\t\tborder-left: 4px solid black;\n\t\t\tbackground: white;\n\t\t\theight: 100%;\n\t\t\twidth: 6px;\n\t\t\tposition: fixed;\n\t\t\ttop: 0;\n\t\t\tz-index: calc(infinity);\n\t\t}\n\t`;classMaskGuide=`\n\t\t#${this.maskTopEltID},\n\t\t#${this.maskBottomEltID} {\n\t\t\tbackground: rgba(0, 0, 0, 0.5) !important;\n\t\t\tposition: fixed;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tz-index: calc(infinity);\n\t\t}\n\t\t#${this.maskTopEltID} {\n\t\t\ttop: 0;\n\t\t}\n\t\t#${this.maskBottomEltID} {\n\t\t\tbottom: 0;\n\t\t}\n\n\t\t#${this.closeTextID} {\n\t\t\tbackground: rgba(255, 255, 255, 0.4) !important;\n\t\t\tpadding: 0.25em 1em;\n\t\t\tposition: fixed;\n\t\t\tleft: 0;\n\t\t\tline-height: 2em;\n\t\t\ttransform: translate(0, -100%);\n\t\t\tz-index: calc(infinity);\n\t\t}\n\t`;constructor(){if(readingGuideServiceIsInstantiated)throw new Error("ReadingGuideService is already instantiated.");readingGuideServiceIsInstantiated=!0,this.handler=this.createHandler()}setReadingMaskGuide=t=>{switch(t){case"ruleGuide":this.resetGuide(),this.guideType="rule",this.setGuide();break;case"maskGuide":this.resetGuide(),this.guideType="mask",this.setGuide();break;default:this.resetGuide()}};setGuide=()=>{let t="";if("rule"===this.guideType?t=this.classRuleGuide:"mask"===this.guideType&&(t=this.classMaskGuide),stylesServiceInstance.setStyle("reading-guide",t),"rule"===this.guideType){const t=document.createElement("div");t.setAttribute("id",`${this.verticalGuideID}`),document.body.insertBefore(t,document.querySelector(APP_NAME))}else if("mask"===this.guideType){const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("span");t.setAttribute("id",`${this.maskTopEltID}`),n.setAttribute("id",`${this.maskBottomEltID}`),i.setAttribute("id",`${this.closeTextID}`),i.innerText=i18nServiceInstance.getMessage("readingGuide_closeMask"),document.body.insertBefore(t,document.querySelector(APP_NAME)),document.body.insertBefore(n,document.querySelector(APP_NAME)),document.body.insertBefore(i,document.querySelector(APP_NAME))}document.addEventListener("mousemove",this.handler),document.addEventListener("keydown",this.handler)};resetGuide=()=>{this.guideType="",stylesServiceInstance.removeStyle("reading-guide"),document.querySelector(`#${this.verticalGuideID}`)?.remove(),document.querySelector(`#${this.maskTopEltID}`)?.remove(),document.querySelector(`#${this.maskBottomEltID}`)?.remove(),document.querySelector(`#${this.closeTextID}`)?.remove(),document.removeEventListener("keydown",this.handler),document.removeEventListener("mousemove",this.handler)};createHandler=()=>t=>{switch(t.type){case"mousemove":"rule"===this.guideType?document.querySelector(`#${PREFIX}vertical-guide-elt`).style.left=`${t.x+2}px`:"mask"===this.guideType&&(document.querySelector(`#${this.maskTopEltID}`).style.height=t.y-this.sizeGuide+"px",document.querySelector(`#${this.maskBottomEltID}`).style.height=window.innerHeight-t.y-this.sizeGuide+"px",document.querySelector(`#${this.closeTextID}`).style.top=t.y-this.sizeGuide+"px"),t.stopPropagation();break;case"keydown":"Escape"!==t.key&&"Esc"!==t.key||this.resetGuide()}}}class RestartTopLeftService{firstElement;constructor(){if(restartTopLeftServiceIsInstantiated)throw new Error("RestartTopLeftService is already instantiated.");restartTopLeftServiceIsInstantiated=!0}setRestartTopLeft=t=>{this.firstElement?.remove(),t!==DEFAULT_VALUE&&this.addAndFocusFirstElement()};addAndFocusFirstElement=()=>{this.firstElement=document.createElement("a"),document.body.insertBefore(this.firstElement,document.querySelector(APP_NAME)),this.firstElement.scrollIntoView({behavior:"smooth",block:"start"})}}class ScrollAspectService{scrollColor="";scrollColorHover="";scrollBorderColor="";scrollWidth="";scrollColorValues=[{color:"white",hover:"lightgrey",border:"black"},{color:"blue",hover:"darkblue",border:"blue"},{color:"red",hover:"darkred",border:"red"},{color:"yellow",hover:"gold",border:"yellow"},{color:"green",hover:"darkgreen",border:"green"},{color:"black",hover:"darkgrey",border:"black"}];constructor(){if(scrollAspectServiceIsInstantiated)throw new Error("ScrollAspectService is already instantiated.");scrollAspectServiceIsInstantiated=!0}setScrollAspect=t=>{if(stylesServiceInstance.removeStyle("scroll-aspect"),document.body.classList.remove(`${PREFIX}big-scroll`),t!==DEFAULT_VALUE){switch(document.body.classList.add(`${PREFIX}big-scroll`),t?.split("_")[0]){case"big":this.scrollWidth="32px";break;case"huge":this.scrollWidth="48px";break;default:this.scrollWidth="auto"}this.scrollColor=t?.split("_")[1]?t?.split("_")[1]:"lightgrey";let n=this.scrollColorValues.find((t=>t.color===this.scrollColor))?.hover,i=this.scrollColorValues.find((t=>t.color===this.scrollColor))?.border;this.scrollColorHover=n||"grey",this.scrollBorderColor=i||"grey",this.setScrollClass()}};setScrollClass=()=>{let t=`\n\t\t\t\thtml {\n\t\t\t\t\toverflow: initial !important;\n\t\t\t\t}\n\n\t\t\t\t.d-none {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t/* WebKit (Chrome, Safari) */\n\t\t\t\t.${PREFIX}big-scroll::-webkit-scrollbar,\n\t\t\t\t.${PREFIX}big-scroll *::-webkit-scrollbar {\n\t\t\t\t\twidth: ${this.scrollWidth};\n\t\t\t\t}\n\t\t\t\t.${PREFIX}big-scroll::-webkit-scrollbar-thumb,\n\t\t\t\t.${PREFIX}big-scroll *::-webkit-scrollbar-thumb {\n\t\t\t\t\tbackground-color: ${this.scrollColor};\n\t\t\t\t\tborder: 1px solid ${this.scrollBorderColor};\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\twidth: ${this.scrollWidth};\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t\t.${PREFIX}big-scroll::-webkit-scrollbar-thumb:hover,\n\t\t\t\t.${PREFIX}big-scroll *::-webkit-scrollbar-thumb:hover {\n\t\t\t\t\tbackground-color: ${this.scrollColorHover};\n\t\t\t\t}\n\n\t\t\t\t/* Firefox */\n\t\t\t\t@-moz-document url-prefix() {\n\t\t\t\t\t.${PREFIX}big-scroll,\n\t\t\t\t\t.${PREFIX}big-scroll * {\n\t\t\t\t\t\tscrollbar-width: auto;\n\t\t\t\t\t\tscrollbar-color: ${this.scrollColor} transparent;\n\t\t\t\t\t}\n\t\t\t\t\t.${PREFIX}big-scroll:hover,\n\t\t\t\t\t.${PREFIX}big-scroll *:hover {\n\t\t\t\t\t\tscrollbar-color: ${this.scrollColorHover} transparent;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`;stylesServiceInstance.setStyle("scroll-aspect",t)}}class ScrollTypeService{btnState="";scrollSteps=100;scrollTimer=50;constructor(){if(scrollTypeServiceIsInstantiated)throw new Error("ScrollTypeService is already instantiated.");scrollTypeServiceIsInstantiated=!0}setScrollType=t=>{this.btnState=t,this.setBtnScroll()};setBtnScroll=()=>{const t=[{name:"scroll_up",interval:void 0},{name:"scroll_down",interval:void 0}];t.forEach((t=>{domServiceInstance.removeButtonsInDom(t.name)})),this.btnState!==DEFAULT_VALUE&&t.forEach((t=>{domServiceInstance.addButtonsInDom(t.name);let n=document.querySelector(`#${CONTAINER_BUTTONS_ID}__${t.name}`),i=(t.name.includes("up")?-1:t.name.includes("down")?1:0)*this.scrollSteps;"scrollOnMouseover"===this.btnState?(n?.addEventListener("mouseover",(n=>{t.interval=setInterval((function(){window.scrollBy(0,i)}),this.scrollTimer)})),n?.addEventListener("mouseleave",(n=>{clearInterval(t.interval)}))):n?.addEventListener("click",(t=>{window.scrollBy(0,i)}))}))}}class SkipToContentService{constructor(){if(skipToContentServiceIsInstantiated)throw new Error("SkipToContentService is already instantiated.");skipToContentServiceIsInstantiated=!0}setSkipToContent=t=>{t!==DEFAULT_VALUE&&this.goToMain()};goToMain=()=>{let t;t=document.querySelector("main")||document.querySelector('[role="main"]')||document.querySelector('[id="main"]')||document.querySelector('[class="main"]')||document.querySelector('[id="content"]')||document.querySelector('[class="content"]'),t&&(t.tabIndex=-1,t.focus())}}class StopAnimationsService{imgClass=`${PREFIX}stop-animations--img`;canvasClass=`${PREFIX}stop-animations--canvas`;mediaClass=`${PREFIX}stop-animations--media`;constructor(){if(stopAnimationsServiceIsInstantiated)throw new Error("StopAnimationsService is already instantiated.");stopAnimationsServiceIsInstantiated=!0}styleStopAnimations="\n\t\t*, *::before, *::after {\n\t\t\tanimation: none !important;\n\t\t\tanimation-fill-mode: forwards !important;\n\t\t\ttransition: none !important;\n\t\t\ttransition-duration: 0.00001s !important;\n\t\t}\n\t";setStopAnimations=t=>{this.unFreezeAllAnimations(),stylesServiceInstance.removeStyle("stop-animations"),t!==DEFAULT_VALUE&&(stylesServiceInstance.setStyle("stop-animations",this.styleStopAnimations),this.freezeAllAnimations())};freezeAnimation=t=>{const n=t.width,i=t.height,s=t.alt;let a=document.createElement("canvas");a.width=n,a.height=i,a.title=s,a.classList.add(this.canvasClass),a.setAttribute("aria-hidden","true"),t.classList.add(this.imgClass);let freeze=()=>{a.getContext("2d").drawImage(t,0,0,n,i),a.style.position="absolute",t.parentNode.insertBefore(a,t),t.style.opacity=0};t.complete?freeze():t.addEventListener("load",freeze,!0)};freezeAllAnimations=()=>{document.querySelectorAll('img:is([src$=".gif"], [src$=".png"], [src$=".webp"], [src$=".avif"])').forEach((t=>{this.freezeAnimation(t)})),document.querySelectorAll("audio, video").forEach((t=>{t.paused||(t.classList.add(this.mediaClass),t.pause())}))};unFreezeAllAnimations=()=>{document.querySelectorAll(`.${this.canvasClass}`).forEach((t=>{t.remove()})),document.querySelectorAll(`.${this.imgClass}`).forEach((t=>{t.style.opacity=1})),document.querySelectorAll(`.${this.mediaClass}`).forEach((t=>{t.classList.remove(this.mediaClass),t.play()}))}}class TextSizeService{constructor(){if(textSizeServiceIsInstantiated)throw new Error("TextSizeService is already instantiated.");textSizeServiceIsInstantiated=!0}setFontSize=t=>{const n=Number(t),i=t===DEFAULT_VALUE?null:`${t}%`;document.documentElement.style.fontSize=i;const s=!isNaN(n)&&n>=130?""+.75*n/100:DEFAULT_VALUE;document.documentElement.style.lineHeight=s;const a=n>=200?"active":DEFAULT_VALUE;deleteLayoutServiceInstance.setDeleteLayout(a)}}class TextSpacingService{constructor(){if(textSpacingServiceIsInstantiated)throw new Error("TextSpacingService is already instantiated.");textSpacingServiceIsInstantiated=!0}setSpacingText=t=>{const n=[{name:"spacingTextSmall",wordSpacing:".10em",lineHeight:"2em",letterSpacing:".0625em"},{name:"spacingTextBig",wordSpacing:".25em",lineHeight:"2.5em",letterSpacing:".25em"},{name:"spacingTextHuge",wordSpacing:".5em",lineHeight:"3em",letterSpacing:".5em"}];if(t===DEFAULT_VALUE)stylesServiceInstance.removeStyle("text-spacing");else{let i=n?.find((n=>n.name===t)),s=`\n\t\t\t\t*:not(${APP_NAME}) {\n\t\t\t\t\tword-spacing: ${i.wordSpacing} !important;\n\t\t\t\t\tline-height: ${i.lineHeight} !important;\n\t\t\t\t\tletter-spacing: ${i.letterSpacing} !important;\n\t\t\t\t}\n\t\t\t`;stylesServiceInstance.setStyle("text-spacing",s)}}}class TextColorService extends BodySelectorService{groupsToColorize=["an","ou","us"];textColorIsActive=!1;constructor(){if(super(),textColorServiceIsInstantiated)throw new Error("TextColorService is already instantiated.");textColorServiceIsInstantiated=!0}setTextColor=t=>{this.textColorIsActive=!1,this.resetToDefaultBody([TEXT_COLOR_SPAN_CLASS]),t!==DEFAULT_VALUE&&(this.colorizeTextNodesForTextColor(),this.textColorIsActive=!0)};colorizeTextNodesForTextColor(){this.getBodyElements().forEach((t=>{this.getTextNodes(t).forEach((t=>{const n=t.nodeValue;if(n&&!this.isAlreadyEdited(t,TEXT_COLOR_SPAN_CLASS)){const i=t.parentNode,s=this.createFragmentForText(n);i&&(i.insertBefore(s,t),i.removeChild(t))}}))}))}createFragmentForText(t){const n=document.createDocumentFragment(),i=new RegExp(`(${this.groupsToColorize.join("|")})`,"g");let s,a=0;for(;null!==(s=i.exec(t));){const i=s[0],o=s.index;o>a&&n.appendChild(document.createTextNode(t.slice(a,o)));const l=document.createElement("span");l.classList.add(TEXT_COLOR_SPAN_CLASS),l.style.color="red",l.textContent=i,n.appendChild(l),a=o+i.length}return a<t.length&&n.appendChild(document.createTextNode(t.slice(a))),n}}class ZoomService{constructor(){if(zoomServiceIsInstantiated)throw new Error("ZoomService is already instantiated.");zoomServiceIsInstantiated=!0}setZoom=t=>{const n=Number(t),i=t===DEFAULT_VALUE?null:(n/100).toString(),s=t===DEFAULT_VALUE?null:(100/n).toString(),a=`\n\t\tbody {\n\t\t\tzoom: ${i};\n\t\t}\n\t\tcplus-app-root, body > [id^=${PREFIX}]{\n\t\t\tzoom: ${s} !important;\n\t\t}\n\t\t`;stylesServiceInstance.setStyle("zoom",a);const o=n>=300?"active":DEFAULT_VALUE;deleteLayoutServiceInstance.setDeleteLayout(o)}}class StringService{constructor(){if(stringServiceIsInstantiated)throw new Error("StringService is already instantiated.");stringServiceIsInstantiated=!0}normalizeID(t){return t?.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f\s]/g,"").split("-").join("")}normalizeSettingName(t){return t?.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().replace("app-","").normalize("NFD").replace(/[\u0300-\u036f\s]/g,"")}normalizeSettingCamelCase(t){return t?.replace("app-","").normalize("NFD").replace(/[\u0300-\u036f\s]/g,"").replace(/-./g,(t=>t[1].toUpperCase()))}capitalizeFirstLetter=t=>t.charAt(0).toUpperCase()+t.slice(1)}class StylesService{prefixStyle=`${PREFIX}style-`;constructor(){if(stylesServiceIsInstantiated)throw new Error("StylesService is already instantiated.");stylesServiceIsInstantiated=!0}setStyle=(t,n)=>{if(0===document.querySelectorAll(`#${this.prefixStyle}${t}`).length){let i=document.createElement("style");i.setAttribute("id",`${this.prefixStyle}${t}`),i.innerHTML=n,document.head.appendChild(i)}else document.querySelector(`#${this.prefixStyle}${t}`).innerHTML=n};removeStyle=t=>{document.querySelector(`#${this.prefixStyle}${t}`)?.remove()}}const pathServiceInstance=new PathService;Object.freeze(pathServiceInstance);const appPath=pathServiceInstance.path,domServiceInstance=new DomService;Object.freeze(domServiceInstance);const i18nServiceInstance=new I18nService;Object.freeze(i18nServiceInstance);const iconsServiceInstance=new IconsService;Object.freeze(iconsServiceInstance);const filesServiceInstance=new FilesService;Object.freeze(filesServiceInstance);const modeOfUseServiceInstance=new ModeOfUseService;Object.freeze(modeOfUseServiceInstance);const stylesServiceInstance=new StylesService;Object.freeze(stylesServiceInstance);const stringServiceInstance=new StringService;Object.freeze(stringServiceInstance);const categoriesServiceInstance=new CategoriesService;Object.seal(categoriesServiceInstance);const localStorageServiceInstance=new LocalStorageService;Object.seal(localStorageServiceInstance);const routeServiceInstance=new RouteService;Object.seal(routeServiceInstance);const capitalLettersServiceInstance=new CapitalLettersService;Object.seal(capitalLettersServiceInstance);const clearlyLinksServiceInstance=new ClearlyLinksService;Object.seal(clearlyLinksServiceInstance);const clickFaciliteServiceInstance=new ClickFaciliteService;Object.seal(clickFaciliteServiceInstance);const colorContrastServiceInstance=new ColorContrastService;Object.seal(colorContrastServiceInstance);const cursorAspectServiceInstance=new CursorAspectService;Object.seal(cursorAspectServiceInstance);const deleteBackgroundImagesServiceInstance=new DeleteBackgroundImagesService;Object.seal(deleteBackgroundImagesServiceInstance);const deleteLayoutServiceInstance=new DeleteLayoutService;Object.seal(deleteLayoutServiceInstance);const focusAspectServiceInstance=new FocusAspectService;Object.seal(focusAspectServiceInstance);const fontFamilyServiceInstance=new FontFamilyService;Object.seal(fontFamilyServiceInstance);const linkStyleServiceInstance=new LinkStyleService;Object.seal(linkStyleServiceInstance);const magnifierServiceInstance=new MagnifierService;Object.seal(magnifierServiceInstance);const marginAlignServiceInstance=new MarginAlignService;Object.seal(marginAlignServiceInstance);const navigationAutoServiceInstance=new NavigationAutoService;Object.seal(navigationAutoServiceInstance);const navigationButtonsServiceInstance=new NavigationButtonsService;Object.seal(navigationButtonsServiceInstance);const readAloudServiceInstance=new ReadAloudService;Object.seal(readAloudServiceInstance);const readingGuideServiceInstance=new ReadingGuideService;Object.seal(readingGuideServiceInstance);const restartTopLeftServiceInstance=new RestartTopLeftService;Object.seal(restartTopLeftServiceInstance);const scrollAspectServiceInstance=new ScrollAspectService;Object.seal(scrollAspectServiceInstance);const scrollTypeServiceInstance=new ScrollTypeService;Object.seal(scrollTypeServiceInstance);const skipToContentServiceInstance=new SkipToContentService;Object.seal(skipToContentServiceInstance);const stopAnimationsServiceInstance=new StopAnimationsService;Object.seal(stopAnimationsServiceInstance);const textSizeServiceInstance=new TextSizeService;Object.seal(textSizeServiceInstance);const textSpacingServiceInstance=new TextSpacingService;Object.seal(textSpacingServiceInstance);const textColorServiceInstance=new TextColorService;Object.seal(textColorServiceInstance);const zoomServiceInstance=new ZoomService;Object.seal(zoomServiceInstance);const pauseServiceInstance=new PauseService;Object.freeze(pauseServiceInstance);const template=document.createElement("template");template.innerHTML=`\n<div data-bs-theme="light" style="display:none">\n\t<button type="button" class="btn btn-icon btn-primary btn-lg sc-confort-plus" id="confort" data-i18n-title="mainButton">\n\t\t<span class="visually-hidden" data-i18n="mainButton"></span>\n\t\t<app-icon data-size="3em" data-name="Accessibility"></app-icon>\n\t\t<span id="pause-indicator" class="sc-confort-plus--paused">\n\t\t\t<app-icon data-size="0.75em" data-name="Pause"></app-icon>\n\t\t</span>\n\t</button>\n\t<app-toolbar class="bg-body position-fixed top-0 end-0" id="${PREFIX}toolbar"></app-toolbar>\n</div>\n`;class AppComponent extends HTMLElement{confortPlusBtn=null;confortPlusToolbar=null;closeBtn=null;pauseIndicator=null;link;handler;constructor(){super(),this.attachShadow({mode:"open"}),this?.shadowRoot?.appendChild(template.content.cloneNode(!0)),this.link=document.createElement("link"),this.link.rel="stylesheet",this.link.href=`${appPath}css/styles.min.css`,this.link.onload=()=>{this?.shadowRoot?.querySelector("[data-bs-theme]").removeAttribute("style")},this.shadowRoot?.appendChild(this.link),this.handler=this.createHandler()}connectedCallback(){iconsServiceInstance.loadSprite(this.shadowRoot),setTimeout((()=>{i18nServiceInstance.translate(this.shadowRoot)})),this.confortPlusBtn=this?.shadowRoot?.getElementById("confort"),this.closeBtn=this?.shadowRoot?.getElementById("close-toolbar"),this.pauseIndicator=this?.shadowRoot?.getElementById("pause-indicator"),this.confortPlusToolbar=this?.shadowRoot?.getElementById(`${PREFIX}toolbar`),this.confortPlusBtn&&this.confortPlusToolbar&&(localStorageServiceInstance.getItem("is-opened").then((t=>{"true"===t?this.showToolbar():this.hideToolbar()})),this.setPauseIndicator(),this.confortPlusToolbar.addEventListener("closeEvent",this.handler),this.confortPlusBtn.addEventListener("click",this.handler))}disconnectedCallback(){this.confortPlusToolbar?.removeEventListener("closeEvent",this.handler),this.confortPlusBtn?.removeEventListener("click",this.handler)}createHandler=()=>t=>{switch(t.type){case"closeEvent":this.hideToolbar();break;case"click":this.showToolbar()}};showToolbar=()=>{this.setContainerButtonsPosition("21em"),this.confortPlusToolbar.classList.remove("close"),this.confortPlusBtn.classList.add("d-none"),this.closeBtn?.focus(),localStorageServiceInstance.setItem("is-opened","true")};hideToolbar=()=>{this.setContainerButtonsPosition("2em"),this.confortPlusToolbar.classList.add("close"),this.confortPlusBtn.classList.remove("d-none"),this.confortPlusBtn?.focus(),localStorageServiceInstance.setItem("is-opened","false"),this.setPauseIndicator()};setContainerButtonsPosition=t=>{document.querySelector(`#${CONTAINER_BUTTONS_ID}`)&&(document.querySelector(`#${CONTAINER_BUTTONS_ID}`).style.right=t)};setPauseIndicator=()=>{localStorageServiceInstance.getItem("is-paused").then((t=>{this.pauseIndicator.hidden=!0!==t}))}}customElements.define(APP_NAME,AppComponent);class AbstractSetting extends HTMLElement{static observedAttributes=["data-values"];settingBtn=null;modalBtn=null;canEdit=!1;activesValues;separator=",";name="";handler;callback;constructor(){super(),this.canEdit="true"===this.dataset?.canEdit||this.canEdit,this.name=stringServiceInstance.normalizeSettingName(this.tagName),this.handler=this.createHandler()}connectedCallback(){this.settingBtn=this.querySelector("app-btn-setting"),this.modalBtn=this.querySelector("app-btn-modal"),this.settingBtn?.setAttribute("data-name",this.name),this.modalBtn?.setAttribute("data-name",this.name),this.setSettingBtn(this.activesValues),this.canEdit&&this.modalBtn?.classList.remove("d-none"),this.settingBtn?.addEventListener("changeSettingEvent",this.handler)}disconnectedCallback(){this.modalBtn?.removeEventListener("clickModalEvent",this.handler),this.settingBtn?.removeEventListener("changeSettingEvent",this.handler)}attributeChangedCallback(t,n,i){"data-values"===t&&(this.activesValues=JSON.parse(i),this.setSettingBtn(this.activesValues),this.callback&&this.callback(this.activesValues?.values.split(",")[this.activesValues?.valueSelected]))}setSettingBtn=t=>{this.settingBtn?.setAttribute("data-values",t?.values),this.settingBtn?.setAttribute("data-active-value",t?.valueSelected.toString()),this.modalBtn?.setAttribute("data-value",i18nServiceInstance.getMessage(t?.values?.split(",")[t?.valueSelected]))};setCallback=t=>{this.callback=t};createHandler=()=>t=>{"changeSettingEvent"===t.type&&this.changeSettingEvent(t)};changeSettingEvent=t=>{let n=t.detail.index,i=t.detail.value;modeOfUseServiceInstance.setSettingValue(this.name,n).then((t=>{t||(this.callback(i),this.modalBtn?.setAttribute("data-value",i18nServiceInstance.getMessage(i)))}))}}const tmplCapitalLetters=document.createElement("template");tmplCapitalLetters.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class CapitalLettersComponent extends AbstractSetting{activesValues={values:"noModifications,uppercase,capitalize",valueSelected:0};constructor(){super(),this.setCallback(capitalLettersServiceInstance.setCapitalLetters.bind(this)),this.appendChild(tmplCapitalLetters.content.cloneNode(!0))}}customElements.define("app-capital-letters",CapitalLettersComponent);const tmplClearlyLinks=document.createElement("template");tmplClearlyLinks.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class ClearlyLinksComponent extends AbstractSetting{activesValues={values:"noModifications,bold_underline,bold_boxed",valueSelected:0};constructor(){super(),this.setCallback(clearlyLinksServiceInstance.setClearlyLinks.bind(this)),this.appendChild(tmplClearlyLinks.content.cloneNode(!0))}}customElements.define("app-clearly-links",ClearlyLinksComponent);const tmplClickFacilite=document.createElement("template");tmplClickFacilite.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class ClickFaciliteComponent extends AbstractSetting{activesValues={values:"noModifications,bigZone,longClick_delay2",valueSelected:0};constructor(){super(),this.setCallback(clickFaciliteServiceInstance.setClickFacilite.bind(this)),this.appendChild(tmplClickFacilite.content.cloneNode(!0))}}customElements.define("app-click-facilite",ClickFaciliteComponent);const tmplColorContrast=document.createElement("template");tmplColorContrast.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class ColorContrastComponent extends AbstractSetting{activesValues={values:"noModifications,reinforcedContrasts,ivory_black",valueSelected:0};constructor(){super(),this.setCallback(colorContrastServiceInstance.setColorsContrasts.bind(this)),this.appendChild(tmplColorContrast.content.cloneNode(!0))}}customElements.define("app-color-contrast",ColorContrastComponent);const tmplCursorAspect=document.createElement("template");tmplCursorAspect.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class CursorAspectComponent extends AbstractSetting{activesValues={values:"noModifications,big_black,huge_black",valueSelected:0};constructor(){super(),this.setCallback(cursorAspectServiceInstance.setCursor.bind(this)),this.appendChild(tmplCursorAspect.content.cloneNode(!0))}}customElements.define("app-cursor-aspect",CursorAspectComponent);const tmplDeleteBackgroundImages=document.createElement("template");tmplDeleteBackgroundImages.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class DeleteBackgroundImagesComponent extends AbstractSetting{activesValues={values:"noModifications,backgroundTransparent,backgroundForegroundTransparent",valueSelected:0};constructor(){super(),this.setCallback(deleteBackgroundImagesServiceInstance.setDeleteBackgroundImages.bind(this)),this.appendChild(tmplDeleteBackgroundImages.content.cloneNode(!0))}}customElements.define("app-delete-background-images",DeleteBackgroundImagesComponent);const tmplFocusAspect=document.createElement("template");tmplFocusAspect.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class FocusAspectComponent extends AbstractSetting{activesValues={values:"noModifications,big_black,huge_black",valueSelected:0};constructor(){super(),this.setCallback(focusAspectServiceInstance.setFocus.bind(this)),this.appendChild(tmplFocusAspect.content.cloneNode(!0))}}customElements.define("app-focus-aspect",FocusAspectComponent);const tmplFontFamily=document.createElement("template");tmplFontFamily.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class FontFamilyComponent extends AbstractSetting{activesValues={values:"noModifications,AccessibleDfA,Verdana",valueSelected:0};constructor(){super(),this.setCallback(fontFamilyServiceInstance.setFontFamily.bind(this)),this.appendChild(tmplFontFamily.content.cloneNode(!0))}}customElements.define("app-font-family",FontFamilyComponent);const tmplLinkStyle=document.createElement("template");tmplLinkStyle.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class LinkStyleComponent extends AbstractSetting{activesValues={values:"noModifications,darkblue_orange_brown,lightblue_orange_lightgreen",valueSelected:0};constructor(){super(),this.setCallback(linkStyleServiceInstance.setLinkStyle.bind(this)),this.appendChild(tmplLinkStyle.content.cloneNode(!0))}}customElements.define("app-link-style",LinkStyleComponent);const tmplMagnifier=document.createElement("template");tmplMagnifier.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class MagnifierComponent extends AbstractSetting{activesValues={values:"noModifications,zoom2,zoom5",valueSelected:0};constructor(){super(),this.setCallback(magnifierServiceInstance.setMagnifier.bind(this)),this.appendChild(tmplMagnifier.content.cloneNode(!0))}}customElements.define("app-magnifier",MagnifierComponent);const tmplMarginAlign=document.createElement("template");tmplMarginAlign.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class MarginAlignComponent extends AbstractSetting{activesValues={values:"noModifications,alignLeft,marginLeft",valueSelected:0};constructor(){super(),this.setCallback(marginAlignServiceInstance.setMargin.bind(this)),this.appendChild(tmplMarginAlign.content.cloneNode(!0))}}customElements.define("app-margin-align",MarginAlignComponent);const tmplNavigationAuto=document.createElement("template");tmplNavigationAuto.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class NavigationAutoComponent extends AbstractSetting{activesValues={values:"noModifications,autoFocus_delay2",valueSelected:0};constructor(){super(),this.setCallback(navigationAutoServiceInstance.setNavigationAuto.bind(this)),this.appendChild(tmplNavigationAuto.content.cloneNode(!0))}}customElements.define("app-navigation-auto",NavigationAutoComponent);const tmplNavigationButtons=document.createElement("template");tmplNavigationButtons.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class NavigationButtonsComponent extends AbstractSetting{activesValues={values:"noModifications,active",valueSelected:0};constructor(){super(),this.setCallback(navigationButtonsServiceInstance.setNavigationButtons.bind(this)),this.appendChild(tmplNavigationButtons.content.cloneNode(!0))}}customElements.define("app-navigation-buttons",NavigationButtonsComponent);const tmplReadAloud=document.createElement("template");tmplReadAloud.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class ReadAloudComponent extends AbstractSetting{activesValues={values:"noModifications,sentence,paragraph",valueSelected:0};constructor(){super(),this.setCallback(readAloudServiceInstance.setReadAloud.bind(this)),this.appendChild(tmplReadAloud.content.cloneNode(!0))}}customElements.define("app-read-aloud",ReadAloudComponent);const tmplReadingGuide=document.createElement("template");tmplReadingGuide.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class ReadingGuideComponent extends AbstractSetting{activesValues={values:"noModifications,ruleGuide,maskGuide",valueSelected:0};constructor(){super(),this.setCallback(readingGuideServiceInstance.setReadingMaskGuide.bind(this)),this.appendChild(tmplReadingGuide.content.cloneNode(!0))}}customElements.define("app-reading-guide",ReadingGuideComponent);const tmplRestartTopLeft=document.createElement("template");tmplRestartTopLeft.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class RestartTopLeftComponent extends AbstractSetting{activesValues={values:"noModifications,active",valueSelected:0};constructor(){super(),this.setCallback(restartTopLeftServiceInstance.setRestartTopLeft.bind(this)),this.appendChild(tmplRestartTopLeft.content.cloneNode(!0))}}customElements.define("app-restart-top-left",RestartTopLeftComponent);const tmplScrollAspect=document.createElement("template");tmplScrollAspect.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class ScrollAspectComponent extends AbstractSetting{activesValues={values:"noModifications,big_black,huge_black",valueSelected:0};constructor(){super(),this.setCallback(scrollAspectServiceInstance.setScrollAspect.bind(this)),this.appendChild(tmplScrollAspect.content.cloneNode(!0))}}customElements.define("app-scroll-aspect",ScrollAspectComponent);const tmplScrollType=document.createElement("template");tmplScrollType.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class ScrollTypeComponent extends AbstractSetting{activesValues={values:"noModifications,scrollOnMouseover",valueSelected:0};constructor(){super(),this.setCallback(scrollTypeServiceInstance.setScrollType.bind(this)),this.appendChild(tmplScrollType.content.cloneNode(!0))}}customElements.define("app-scroll-type",ScrollTypeComponent);const tmplSkipToContent=document.createElement("template");tmplSkipToContent.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class SkipToContentComponent extends AbstractSetting{activesValues={values:"noModifications,active",valueSelected:0};constructor(){super(),this.setCallback(skipToContentServiceInstance.setSkipToContent.bind(this)),this.appendChild(tmplSkipToContent.content.cloneNode(!0))}}customElements.define("app-skip-to-content",SkipToContentComponent);const tmplStopAnimations=document.createElement("template");tmplStopAnimations.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class StopAnimationsComponent extends AbstractSetting{activesValues={values:"noModifications,active",valueSelected:0};constructor(){super(),this.setCallback(stopAnimationsServiceInstance.setStopAnimations.bind(this)),this.appendChild(tmplStopAnimations.content.cloneNode(!0))}}customElements.define("app-stop-animations",StopAnimationsComponent);const tmplIncreaseTextSize=document.createElement("template");tmplIncreaseTextSize.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class IncreaseTextSizeComponent extends AbstractSetting{activesValues={values:"noModifications,110,130",valueSelected:0};constructor(){super(),this.setCallback(textSizeServiceInstance.setFontSize.bind(this)),this.appendChild(tmplIncreaseTextSize.content.cloneNode(!0))}}customElements.define("app-text-size",IncreaseTextSizeComponent);const tmplSpacingText=document.createElement("template");tmplSpacingText.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class TextSpacingComponent extends AbstractSetting{activesValues={values:"noModifications,spacingTextSmall,spacingTextBig",valueSelected:0};constructor(){super(),this.setCallback(textSpacingServiceInstance.setSpacingText.bind(this)),this.appendChild(tmplSpacingText.content.cloneNode(!0))}}customElements.define("app-text-spacing",TextSpacingComponent);const tmplTextColor=document.createElement("template");tmplTextColor.innerHTML='\n<div class="d-flex align-items-center gap-2">\n\t<app-btn-setting></app-btn-setting>\n</div>\n';class TextColorComponent extends AbstractSetting{activesValues={values:"noModifications,active",valueSelected:0};constructor(){super(),this.setCallback(textColorServiceInstance.setTextColor.bind(this)),this.appendChild(tmplTextColor.content.cloneNode(!0))}}customElements.define("app-text-color",TextColorComponent);const tmplZoom=document.createElement("template");tmplZoom.innerHTML='\n<div class="d-flex align-items-center gap-2 h-100">\n\t<app-btn-setting></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class ZoomComponent extends AbstractSetting{activesValues={values:"noModifications,130,200",valueSelected:0};constructor(){super(),this.setCallback(zoomServiceInstance.setZoom.bind(this)),this.appendChild(tmplZoom.content.cloneNode(!0))}}customElements.define("app-zoom",ZoomComponent);const btnModalLayout=document.createElement("template");btnModalLayout.innerHTML='\n\t<button type="button" class="btn btn-primary pe-4" data-i18n="moreChoice">\n\t</button>';class BtnModalComponent extends HTMLElement{static observedAttributes=["data-name","data-disabled"];modalBtn=null;settingName=null;indexValue=null;disabled=!1;handler;constructor(){super(),this.disabled="true"===this.dataset?.disabled||this.disabled,this.appendChild(btnModalLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.modalBtn=this.querySelector("button"),this.modalBtn?.addEventListener("click",this.handler),this.modalBtn.disabled=this.disabled}disconnectedCallback(){this.modalBtn?.removeEventListener("click",this.handler)}attributeChangedCallback(t,n,i){"data-name"===t&&(this.settingName=i)}setA11yName=t=>{let n=document.createElement("span");n.classList.add("visually-hidden"),n.innerText=t,this.modalBtn?.appendChild(n),this.modalBtn.setAttribute("title",t)};createHandler=()=>t=>{if("click"===t.type&&t.currentTarget===this.modalBtn){let t=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:"edit-setting",setting:this.settingName}});this.modalBtn?.dispatchEvent(t)}}}customElements.define("app-btn-modal",BtnModalComponent);const btnSettingLayout=document.createElement("template");btnSettingLayout.innerHTML='\n\t<button type="button" class="sc-btn-setting btn btn-primary border-0 flex-column align-items-start justify-content-between w-100 h-100 px-2 position-relative overflow-hidden">\n\t\t<span class="d-flex align-items-start gap-1">\n\t\t\t<app-icon data-size="1.5em"></app-icon>\n\t\t\t<span class="sc-btn-setting__name text-start lh-base"></span>\n\t\t</span>\n\t\t<span class="sc-btn-setting__values d-flex gap-1 align-items-center justify-content-center mt-2 mb-0 w-100"></span>\n\t\t<span class="sc-btn-setting__selected-value btn btn-primary border-0 position-absolute d-none w-100 h-100"></span>\n\t</button>\n\t<div class="tooltip bs-tooltip-top sc-btn-setting__tooltip d-none mt-2" role="tooltip">\n\t\t<div class="tooltip-inner text-bg-secondary fw-normal">\n\t\t\t<div class="sc-btn-setting__tooltip-instruction mb-2"></div>\n\t\t\t<div class="sc-btn-setting__tooltip-value"></div>\n  \t</div>\n\t</div>\n';class BtnSettingComponent extends HTMLElement{static observedAttributes=["data-values","data-active-value","data-name","data-disabled"];settingBtn=null;btnContentSlots=null;index=0;value;name;slot="";separator=",";settingsList=[];disabled=!1;tooltip=null;selectedValue=null;timeoutTooltip;timeoutSelectedValue;handler;constructor(){super(),this.disabled="true"===this.dataset?.disabled||this.disabled,this.appendChild(btnSettingLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.settingBtn=this.querySelector("button"),this.tooltip=this.querySelector(".tooltip"),this.selectedValue=this.querySelector(".sc-btn-setting__selected-value"),this.btnContentSlots=this.querySelector(".sc-btn-setting__values"),this.settingBtn.addEventListener("click",this.handler),this.settingBtn.addEventListener("focusin",this.handler),this.settingBtn.addEventListener("focusout",this.handler),this.settingBtn.addEventListener("mouseover",this.handler),this.settingBtn.addEventListener("mouseout",this.handler),this.setDisabledState()}disconnectedCallback(){this.settingBtn?.removeEventListener("click",this.handler),this.settingBtn?.removeEventListener("focusin",this.handler),this.settingBtn?.removeEventListener("focusout",this.handler),this.settingBtn?.removeEventListener("mouseover",this.handler),this.settingBtn?.removeEventListener("mouseout",this.handler)}attributeChangedCallback(t,n,i){if("data-values"===t&&(this.settingsList=i.split(this.separator)),"data-active-value"===t&&this.setIndex(Number(i)),"data-name"===t){const t=stringServiceInstance.normalizeSettingCamelCase(i);this.name=t;const n=this.querySelector(".sc-btn-setting__name"),s=this.querySelector(".sc-btn-setting__tooltip-instruction"),a=this.querySelector("app-icon");n.innerText=i18nServiceInstance.getMessage(`setting_${this.name}`),s.innerText=i18nServiceInstance.getMessage(`setting_${this.name}_instruction`),a?.setAttribute("data-name",this.name),this.setTitle()}"data-disabled"===t&&(this.disabled="true"===i,this.setDisabledState())}getValueLabel=t=>{if(t?.includes("_")){let n=[];return t.split("_").forEach((t=>{n.push(i18nServiceInstance.getMessage(t))})),i18nServiceInstance.getMessage(`${this.name}_values`,n)}return i18nServiceInstance.getMessage(`${this.name}_${t}`)};setTitle=()=>{const t=this.settingsList.length;if(t>0){const n=`<span class="fw-bold">${this.getValueLabel(this.value)}</span>`,i=t===this.index+1?0:this.index+1,s=this.getValueLabel(this.settingsList[i]);let a="";if("active"===n)a=i18nServiceInstance.getMessage("multiclicToggleOn");else if("active"===s)a=i18nServiceInstance.getMessage("multiclicToggleOff");else{const o=this.index+1;a=i18nServiceInstance.getMessage("multiclic",[n,String(o),String(t),s,String(i+1)])}this.querySelector(".sc-btn-setting__tooltip-value").innerHTML=a}};setIndex=t=>{if(t?.toString())this.index=t;else{let t=this.index+1;if(this.index=t>=this.settingsList.length?0:t,!this.settingsList[this.index]){let t=this.index+1;this.index=t>=this.settingsList.length?0:t}}0===this.index?this.settingBtn?.classList.add("sc-btn-setting--default"):this.settingBtn?.classList.remove("sc-btn-setting--default"),this.calculateList()};setDisabledState=()=>{this.settingBtn&&(this.settingBtn.disabled=this.disabled)};calculateList=()=>{this.slot="",this.settingsList.forEach(((t,n)=>{if(t){let i='<span class="sc-btn-setting__value rounded-circle"></span>';n===this.index&&(i='<span class="sc-btn-setting__value sc-btn-setting__current-value rounded-circle"></span>',this.value=t),this.slot=`${this.slot}${i}`}})),this.btnContentSlots.innerHTML=this.slot,this.setTitle()};showTooltip=()=>{this.hideTooltip(),this.timeoutTooltip=setTimeout((()=>{this.tooltip?.classList.remove("d-none"),this.settingBtn.classList.add("sc-btn-setting--show-tooltip")}),3e3)};hideTooltip=()=>{clearTimeout(this.timeoutTooltip),this.tooltip?.classList.add("d-none"),this.settingBtn.classList.remove("sc-btn-setting--show-tooltip")};showSelectedValue=()=>{this.selectedValue.innerText=this.getValueLabel(this.value),clearTimeout(this.timeoutSelectedValue),this.selectedValue?.classList.remove("d-none"),this.timeoutSelectedValue=setTimeout((()=>{this.selectedValue?.classList.add("d-none")}),3e3)};createHandler=()=>t=>{switch(t.type){case"click":this.setIndex(),this.showSelectedValue();let t=new CustomEvent("changeSettingEvent",{bubbles:!0,detail:{value:this.value,index:this.index}});this.settingBtn?.dispatchEvent(t);break;case"focusin":case"mouseover":this.showTooltip();break;case"focusout":case"mouseout":this.hideTooltip()}}}customElements.define("app-btn-setting",BtnSettingComponent);const headerLayout=document.createElement("template");headerLayout.innerHTML='\n\t<header class="d-flex justify-content-between bg-secondary px-3 py-2">\n\t\t<div class="d-flex align-items-center">\n\t\t\t<button id="prev-toolbar" type="button" class="btn btn-icon btn-inverse btn-secondary">\n\t\t\t\t<span class="visually-hidden"></span>\n\t\t\t\t<app-icon data-name="Form_Chevron_left"></app-icon>\n\t\t\t\t<app-icon id="mode-icon"></app-icon>\n\t\t\t</button>\n\n\t\t\t<span id="page-block-title" class="d-flex gap-1 align-items-center fs-6 fw-bold text-white ms-2">\n\t\t\t\t<app-icon id="page-icon" data-name="Settings"></app-icon>\n\t\t\t\t<span id="page-title"></span>\n\t\t\t</span>\n\n\t\t\t<span id="app-title" class="d-flex gap-1 align-items-center fs-3 fw-bold text-white">\n\t\t\t\t<app-icon data-name="Accessibility"></app-icon>\n\t\t\t\t<span data-i18n="mainTitle"></span>\n\t\t\t\t<span class="text-primary">+</span>\n\t\t\t</span>\n\t\t</div>\n\t\t<button id="close-toolbar" type="button" class="btn btn-icon btn-inverse btn-primary" data-i18n-title="close">\n\t\t\t\t<span class="visually-hidden" data-i18n="close"></span>\n\t\t\t\t<app-icon data-name="Reduire_C+"></app-icon>\n\t\t</button>\n\t</header>\n';class HeaderComponent extends HTMLElement{static observedAttributes=["data-display","data-page-title","data-page-icon","data-selected-mode","data-prev-btn"];closeBtn=null;prevBtn=null;appTitle=null;pageBlockTitle=null;pageTitle=null;modeIcon=null;pageIcon=null;display="primary";handler;constructor(){super(),this.appendChild(headerLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.closeBtn=this.querySelector("#close-toolbar"),this.prevBtn=this.querySelector("#prev-toolbar"),this.appTitle=this.querySelector("#app-title"),this.pageBlockTitle=this.querySelector("#page-block-title"),this.pageTitle=this.querySelector("#page-title"),this.modeIcon=this.querySelector("#mode-icon"),this.pageIcon=this.querySelector("#page-icon"),this.displayMode(this.display),this.closeBtn.addEventListener("click",this.handler),this.prevBtn?.addEventListener("click",this.handler)}disconnectedCallback(){this.closeBtn?.removeEventListener("click",this.handler),this.prevBtn?.removeEventListener("click",this.handler)}attributeChangedCallback(t,n,i){"data-display"===t&&this.displayMode(i),"data-page-title"===t&&i&&(this.pageTitle.innerText=i18nServiceInstance.getMessage(i)),"data-page-icon"===t&&(0===i.length?this.pageIcon.classList.add("d-none"):this.pageIcon?.setAttribute("data-name",i)),"data-selected-mode"===t&&this.modeIcon?.setAttribute("data-name",`${i}_border`),"data-prev-btn"===t&&i&&(this.prevBtn.title=i18nServiceInstance.getMessage(i),this.prevBtn.querySelector("span").innerText=i18nServiceInstance.getMessage(i))}displayMode=t=>{this.prevBtn?.classList.toggle("d-none","primary"===t),this.pageBlockTitle?.classList.toggle("d-none","primary"===t),this.appTitle?.classList.toggle("d-none","secondary"===t)};createHandler=()=>t=>{if("click"===t.type)switch(t.currentTarget){case this.closeBtn:this.closeButtonEvent();break;case this.prevBtn:this.prevButtonEvent()}};closeButtonEvent=()=>{let t=new CustomEvent("closeEvent",{bubbles:!0});this.closeBtn?.dispatchEvent(t)};prevButtonEvent=()=>{let t=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:routeServiceInstance.historyRoute[routeServiceInstance.historyRoute.length-1]}});this.prevBtn?.dispatchEvent(t)}}customElements.define("app-header",HeaderComponent);const iconLayout=document.createElement("template");iconLayout.innerHTML='<svg fill="currentColor" aria-hidden="true" focusable="false"><use/></svg>';class IconComponent extends HTMLElement{static observedAttributes=["data-name"];sprite="";icon="";size="1.5em";constructor(){super(),this.sprite=iconsServiceInstance.path,this.icon=this.dataset?.name||this.icon,this.size=this.dataset?.size||this.size,this.appendChild(iconLayout.content.cloneNode(!0))}connectedCallback(){let t=this.querySelector("svg");t?.setAttribute("width",this.size),t?.setAttribute("height",this.size);let n=this.querySelector("use");n?.setAttribute("href",`${this.sprite}#ic_${this.icon}`)}attributeChangedCallback(t,n,i){let s=this.querySelector("use");"data-name"===t&&s?.setAttribute("href",`${this.sprite}#ic_${i}`)}}customElements.define("app-icon",IconComponent);const selectEditValueLayout=document.createElement("template");selectEditValueLayout.innerHTML='\n\t<div class="d-flex flex-column" role="group">\n\t\t<div class="d-flex align-items-center justify-content-between gap-2">\n\t\t\t<button type="button" class="btn btn-icon btn-primary">\n\t\t\t\t<span class="visually-hidden" data-i18n="prevValue"></span>\n\t\t\t\t<app-icon data-name="Form_Chevron_left"></app-icon>\n\t\t\t</button>\n\t\t\t<output></output>\n\t\t\t<button type="button" class="btn btn-icon btn-primary">\n\t\t\t\t<span class="visually-hidden" data-i18n="nextValue"></span>\n\t\t\t\t<app-icon data-name="Form_Chevron_right"></app-icon>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n';class SelectEditValueComponent extends HTMLElement{static observedAttributes=["data-name","data-index","data-setting-values","data-label"];selectedValue=null;btnPrevValue=null;btnNextValue=null;name="";values=[];currentIndex=null;currentValue=null;handler;constructor(){super(),this.name=this.dataset?.name||this.name,this.appendChild(selectEditValueLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectedValue=this.querySelector("output"),this.btnPrevValue=this.querySelector("button:first-of-type"),this.btnNextValue=this.querySelector("button:last-of-type"),this.btnPrevValue?.addEventListener("click",this.handler),this.btnNextValue?.addEventListener("click",this.handler)}attributeChangedCallback(t,n,i){if("data-index"===t&&(this.currentIndex=Number(i),this.moveEditValue(this.currentIndex)),"data-setting-values"===t&&(this.values=i.split(",")),"data-label"===t){let t=this.querySelector('div[role="group"]'),n=document.createElement("label");n.innerText=i18nServiceInstance.getMessage(`${this.name}_label`),n.setAttribute("id",`${PREFIX}${stringServiceInstance.normalizeID(this.name)}`),t.insertBefore(n,t.firstChild),t.setAttribute("aria-labelledby",`${PREFIX}${stringServiceInstance.normalizeID(this.name)}`)}}moveEditValue=t=>{if(this.currentIndex=t,this.btnPrevValue.disabled=!1,this.btnNextValue.disabled=!1,this.currentIndex<=0?(this.currentIndex=0,this.btnPrevValue.disabled=!0,this.btnNextValue.disabled=!1):this.currentIndex>=this.values.length-1&&(this.currentIndex=this.values.length-1,this.btnPrevValue.disabled=!1,this.btnNextValue.disabled=!0),this.currentValue=this.values[this.currentIndex],this.currentValue?.includes("_")){let t=[];this.currentValue.split("_").forEach((n=>{t.push(i18nServiceInstance.getMessage(n))})),this.selectedValue.innerText=i18nServiceInstance.getMessage(`${this.name}_values`,t)}else{let t=`${this.name}_${this.currentValue}`;this.selectedValue.innerText=i18nServiceInstance.getMessage(t)}this.changeEditValue()};createHandler=()=>t=>{if("click"===t.type)switch(t.currentTarget){case this.btnPrevValue:this.moveEditValue(this.currentIndex-1);break;case this.btnNextValue:this.moveEditValue(this.currentIndex+1)}};changeEditValue=()=>{let t=new CustomEvent(`editSetting${stringServiceInstance.capitalizeFirstLetter(this.name)}`,{bubbles:!0,detail:{newValue:this.currentValue}});this.dispatchEvent(t)}}customElements.define("app-select-edit-value",SelectEditValueComponent);const selectModeLayout=document.createElement("template");selectModeLayout.innerHTML='\n\t<input type="radio" name="modes" class="sc-select-mode__input">\n\t<label class="d-flex flex-column align-items-start gap-1 p-2 sc-select-mode__label btn btn-tertiary">\n\t\t<div class="d-flex align-items-center gap-2 w-100">\n\t\t\t<app-icon data-size="2em"></app-icon>\n\t\t\t<span class="fs-5 text flex-fill"></span>\n\t\t</div>\n\t\t<span class="fs-6 fw-normal m-0 mb-3"></span>\n\t\t<button class="btn btn-primary" type="submit"></button>\n\t</label>\n';class SelectModeComponent extends HTMLElement{inputElement=null;submitBtnElement=null;iconElement=null;labelElement=null;textElement=null;descriptionElement=null;label="";checked=!1;disabled=!1;constructor(){super(),this.label=this.dataset?.label||this.label,this.checked="true"===this.dataset?.checked||this.checked,this.disabled="true"===this.dataset?.disabled||this.disabled,this.appendChild(selectModeLayout.content.cloneNode(!0))}connectedCallback(){this.inputElement=this.querySelector("input"),this.submitBtnElement=this.querySelector("button"),this.labelElement=this.querySelector("label"),this.iconElement=this.querySelector("app-icon"),this.textElement=this.querySelector("app-icon + span"),this.descriptionElement=this.querySelector("label > span"),this.inputElement.id=stringServiceInstance.normalizeID(this.label),this.inputElement.value=this.label,this.inputElement.checked=this.checked,this.inputElement.disabled=this.disabled,this.submitBtnElement.innerText=i18nServiceInstance.getMessage(this.checked?"resetThisMode":"validateThisMode"),this.submitBtnElement.title=this.checked?i18nServiceInstance.getMessage("resetThisModeTitle"):"",this.labelElement?.setAttribute("for",stringServiceInstance.normalizeID(this.label)),this.iconElement?.setAttribute("data-name",`${this.label}_border`),this.textElement.innerText=i18nServiceInstance.getMessage(`${this.label}Name`),this.descriptionElement.innerText=i18nServiceInstance.getMessage(`${this.label}Description`),this.checked&&this.setActiveState()}setActiveState=()=>{let t=document.createElement("span");t.classList.add("fs-5","text"),t.innerText=i18nServiceInstance.getMessage("activeMode"),this.querySelector("div").appendChild(t)}}customElements.define("app-select-mode",SelectModeComponent);const editSettingLayout=document.createElement("template");editSettingLayout.innerHTML='\n\t<div class="gap-1 p-3 text-body">\n\t\t<div class="d-flex align-items-center gap-2 mb-2">\n\t\t\t<app-icon id="edit-setting-icon" data-size="2em"></app-icon>\n\t\t\t<p id="edit-setting-title" class="fs-4 fw-bold mb-0"></p>\n\t\t</div>\n\n\t\t<p id="edit-setting-instruction" class="mb-4"></p>\n\n\t\t<app-edit-capital-letters class="sc-edit-setting__setting"></app-edit-capital-letters>\n\t\t<app-edit-clearly-links class="sc-edit-setting__setting"></app-edit-clearly-links>\n\t\t<app-edit-click-facilite class="sc-edit-setting__setting"></app-edit-click-facilite>\n\t\t<app-edit-color-contrast class="sc-edit-setting__setting"></app-edit-color-contrast>\n\t\t<app-edit-cursor-aspect class="sc-edit-setting__setting"></app-edit-cursor-aspect>\n\t\t<app-edit-delete-background-images class="sc-edit-setting__setting"></app-edit-delete-background-images>\n\t\t<app-edit-focus-aspect class="sc-edit-setting__setting"></app-edit-focus-aspect>\n\t\t<app-edit-font-family class="sc-edit-setting__setting"></app-edit-font-family>\n\t\t<app-edit-link-style class="sc-edit-setting__setting"></app-edit-link-style>\n\t\t<app-edit-magnifier class="sc-edit-setting__setting"></app-edit-magnifier>\n\t\t<app-edit-margin-align class="sc-edit-setting__setting"></app-edit-margin-align>\n\t\t<app-edit-navigation-auto class="sc-edit-setting__setting"></app-edit-navigation-auto>\n\t\t<app-edit-read-aloud class="sc-edit-setting__setting"></app-edit-read-aloud>\n\t\t<app-edit-reading-guide class="sc-edit-setting__setting"></app-edit-reading-guide>\n\t\t<app-edit-scroll-aspect class="sc-edit-setting__setting"></app-edit-scroll-aspect>\n\t\t<app-edit-scroll-type class="sc-edit-setting__setting"></app-edit-scroll-type>\n\t\t<app-edit-stop-animations class="sc-edit-setting__setting"></app-edit-stop-animations>\n\t\t<app-edit-text-size class="sc-edit-setting__setting"></app-edit-text-size>\n\t\t<app-edit-text-spacing class="sc-edit-setting__setting"></app-edit-text-spacing>\n\t\t<app-edit-zoom class="sc-edit-setting__setting"></app-edit-zoom>\n\t</div>\n';class EditSettingComponent extends HTMLElement{static observedAttributes=["data-setting"];settingIcon=null;settingTitle=null;settingInstruction=null;settingName=null;settingsDictionnary=[];constructor(){super(),this.appendChild(editSettingLayout.content.cloneNode(!0)),this.querySelectorAll(".sc-edit-setting__setting").forEach((t=>{t.classList.add("d-none"),this.settingsDictionnary.push({name:stringServiceInstance.normalizeSettingName(t.tagName),element:t.tagName})}))}connectedCallback(){this.settingIcon=this.querySelector("#edit-setting-icon"),this.settingTitle=this.querySelector("#edit-setting-title"),this.settingInstruction=this.querySelector("#edit-setting-instruction")}attributeChangedCallback(t,n,i){"data-setting"===t&&(this.settingName=stringServiceInstance.normalizeSettingCamelCase(i),this.settingIcon?.setAttribute("data-name",this.settingName),this.settingTitle.innerText=i18nServiceInstance.getMessage(`setting_${this.settingName}`),this.settingInstruction.innerText=i18nServiceInstance.getMessage(`setting_${this.settingName}_instruction`),this.displaySetting(`edit-${i}`),localStorageServiceInstance.setItem("current-setting",i))}displaySetting=t=>{this.querySelector(".sc-edit-setting__setting:not(.d-none)")?.classList.add("d-none");const n=this.settingsDictionnary.find((n=>t===n.name));this.querySelector(n.element).classList.remove("d-none")}}customElements.define("app-edit-setting",EditSettingComponent);const editClickFaciliteLayout=document.createElement("template");editClickFaciliteLayout.innerHTML=`\n\t<form class="d-flex flex-column gap-4">\n\t\t<app-select-edit-value id="${PREFIX}select-click-type" data-name="clickType"></app-select-edit-value>\n\t\t<app-select-edit-value id="${PREFIX}select-click-delay" class="d-none" data-name="clickDelay"></app-select-edit-value>\n\t</form>\n`;class EditClickFaciliteComponent extends HTMLElement{selectClickTypeElement=null;selectClickDelayElement=null;settingValues=null;clickTypeValue="";clickDelayValue="";clickTypeValues=[`clickType_${DEFAULT_VALUE}`,"clickType_bigZone","clickType_longClick","clickType_autoClick"];clickDelayValues=["clickDelay_delay1","clickDelay_delay2","clickDelay_delay3","clickDelay_delay6"];handler;constructor(){super(),this.appendChild(editClickFaciliteLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectClickTypeElement=this.querySelector(`#${PREFIX}select-click-type`),this.selectClickDelayElement=this.querySelector(`#${PREFIX}select-click-delay`),this.selectClickTypeElement.addEventListener("editSettingClickType",this.handler),this.selectClickDelayElement.addEventListener("editSettingClickDelay",this.handler),this.selectClickTypeElement.setAttribute("data-setting-values",this.clickTypeValues.join(",")),this.selectClickDelayElement.setAttribute("data-setting-values",this.clickDelayValues.join(",")),modeOfUseServiceInstance.getSetting("clickFacilite").then((t=>{this.settingValues=t.values.split(","),this.clickTypeValue=this.settingValues[t.valueSelected].split("_")[0],this.clickDelayValue=this.settingValues[t.valueSelected].split("_")[1];const n=this.clickTypeValues.findIndex((t=>t===`clickType_${this.clickTypeValue}`)),i=this.clickDelayValue?this.clickDelayValues.findIndex((t=>t===`clickDelay_${this.clickDelayValue}`)):0;this.selectClickTypeElement.setAttribute("data-index",n.toString()),this.selectClickDelayElement.setAttribute("data-index",i.toString())}))}setClickFacilite=()=>{let t="";t=this.clickTypeValue===DEFAULT_VALUE||"bigZone"===this.clickTypeValue?this.clickTypeValue:`${this.clickTypeValue}_${this.clickDelayValue}`;let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("clickFacilite",n,!0):modeOfUseServiceInstance.addSettingCustomValue("clickFacilite",3,t),clickFaciliteServiceInstance.setClickFacilite(t)};createHandler=()=>t=>{switch(t.type){case"editSettingClickType":this.clickTypeValue=t.detail.newValue.split("_")[1],this.selectClickDelayElement.classList.toggle("d-none",this.clickTypeValue===DEFAULT_VALUE||"bigZone"===this.clickTypeValue),this.setClickFacilite();break;case"editSettingClickDelay":this.clickDelayValue=t.detail.newValue.split("_")[1],this.setClickFacilite()}}}customElements.define("app-edit-click-facilite",EditClickFaciliteComponent);const editColorContrastLayout=document.createElement("template");editColorContrastLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="colorContrast"></app-select-edit-value>\n\t</form>\n';class EditColorContrastComponent extends HTMLElement{selectColorContrastElement=null;settingValues=null;colorContrastValues=[DEFAULT_VALUE,"reinforcedContrasts","ivory_black","black_ivory","white_red","black_yellow","white_blue","yellow_blue","black_green"];handler;constructor(){super(),this.appendChild(editColorContrastLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectColorContrastElement=this.querySelector("app-select-edit-value"),this.selectColorContrastElement.addEventListener("editSettingColorContrast",this.handler),this.selectColorContrastElement.setAttribute("data-setting-values",this.colorContrastValues.join(",")),modeOfUseServiceInstance.getSetting("colorContrast").then((t=>{this.settingValues=t.values.split(",");const n=this.colorContrastValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectColorContrastElement.setAttribute("data-index",n.toString())}))}setColorContrast=t=>{let n=this.settingValues.indexOf(t),i=t?.split("_")[0],s=t?.split("_")[1];"reinforcedContrasts"===t?(i="#000",s="#fff"):t===DEFAULT_VALUE&&(i="inherit",s="inherit"),this.selectColorContrastElement.querySelector("output").style.color=i,this.selectColorContrastElement.querySelector("output").style.backgroundColor=s,-1!==n?modeOfUseServiceInstance.setSettingValue("colorContrast",n,!0):modeOfUseServiceInstance.addSettingCustomValue("colorContrast",3,t),colorContrastServiceInstance.setColorsContrasts(t)};createHandler=()=>t=>{"editSettingColorContrast"===t.type&&this.setColorContrast(t.detail.newValue)}}customElements.define("app-edit-color-contrast",EditColorContrastComponent);const editCursorAspectLayout=document.createElement("template");editCursorAspectLayout.innerHTML=`\n\t<form class="d-flex flex-column gap-4">\n\t\t<app-select-edit-value id="${PREFIX}select-cursor-size" data-name="cursorSize" data-label="true"></app-select-edit-value>\n\t\t<app-select-edit-value id="${PREFIX}select-cursor-color" class="d-none" data-name="cursorColor" data-label="true"></app-select-edit-value>\n\n\t\t<div class="d-flex flex-wrap gap-2 bg-light p-3" id="${PREFIX}example-cursor"></div>\n\t</form>\n`;class EditCursorAspectComponent extends HTMLElement{selectCursorSizeElement=null;selectCursorColorElement=null;settingValues=null;cursorSizeValue="";cursorColorValue="";cursorSizeValues=[`cursorSize_${DEFAULT_VALUE}`,"cursorSize_bigCursor","cursorSize_hugeCursor"];cursorColorValues=[`cursorColor_${DEFAULT_VALUE}`,"cursorColor_white","cursorColor_blue","cursorColor_red","cursorColor_yellow","cursorColor_green","cursorColor_black"];handler;constructor(){super(),this.appendChild(editCursorAspectLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectCursorSizeElement=this.querySelector(`#${PREFIX}select-cursor-size`),this.selectCursorColorElement=this.querySelector(`#${PREFIX}select-cursor-color`),this.selectCursorSizeElement.addEventListener("editSettingCursorSize",this.handler),this.selectCursorColorElement.addEventListener("editSettingCursorColor",this.handler),this.selectCursorSizeElement.setAttribute("data-setting-values",this.cursorSizeValues.join(",")),this.selectCursorColorElement.setAttribute("data-setting-values",this.cursorColorValues.join(",")),modeOfUseServiceInstance.getSetting("cursorAspect").then((t=>{this.settingValues=t.values.split(","),this.cursorSizeValue=this.settingValues[t.valueSelected].split("_")[0],this.cursorColorValue=this.settingValues[t.valueSelected].split("_")[1];const n=this.cursorSizeValues.findIndex((t=>t===`cursorSize_${this.cursorSizeValue}`)),i=this.cursorColorValues.findIndex((t=>t===`cursorColor_${this.cursorColorValue}`));this.selectCursorSizeElement.setAttribute("data-index",n.toString()),this.selectCursorColorElement.setAttribute("data-index",i.toString())}))}setCursorAspect=()=>{let t="";this.cursorSizeValue===DEFAULT_VALUE?(t=DEFAULT_VALUE,this.setExampleCursor(!0)):(t=`${this.cursorSizeValue}_${this.cursorColorValue}`,this.setExampleCursor());let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("cursorAspect",n,!0):modeOfUseServiceInstance.addSettingCustomValue("cursorAspect",3,t),cursorAspectServiceInstance.setCursor(t)};setExampleCursor=(t=!1)=>{let n=this.querySelector(`#${PREFIX}example-cursor`);if(n.innerHTML="",t)n.innerText=i18nServiceInstance.getMessage("cursorAspect_empty_example");else{let t="bigCursor"===this.cursorSizeValue?56:128;[{name:"default",strokeWidth:6},{name:"pointer",strokeWidth:6},{name:"text",strokeWidth:4}].forEach((i=>{const s=cursorAspectServiceInstance.drawCursor(i.name,Number(t),this.cursorColorValue,i.strokeWidth);let a=(new DOMParser).parseFromString(s,"text/html");n.appendChild(a.documentElement.querySelector("svg"))}))}};createHandler=()=>t=>{switch(t.type){case"editSettingCursorSize":this.cursorSizeValue=t.detail.newValue.split("_")[1],this.selectCursorColorElement.classList.toggle("d-none",this.cursorSizeValue===`cursorSize_${DEFAULT_VALUE}`),this.setCursorAspect();break;case"editSettingCursorColor":this.cursorColorValue=t.detail.newValue.split("_")[1]===DEFAULT_VALUE?"black":t.detail.newValue.split("_")[1],this.setCursorAspect()}}}customElements.define("app-edit-cursor-aspect",EditCursorAspectComponent);const editDeleteBackgroundImagesLayout=document.createElement("template");editDeleteBackgroundImagesLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="deleteBackgroundImages"></app-select-edit-value>\n\t</form>\n';class EditDeleteBackgroundImagesComponent extends HTMLElement{selectDeleteBgImgElement=null;settingValues=null;deleteBackgroundImagesValues=[DEFAULT_VALUE,"backgroundTransparent","backgroundForegroundTransparent"];handler;constructor(){super(),this.appendChild(editDeleteBackgroundImagesLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectDeleteBgImgElement=this.querySelector("app-select-edit-value"),this.selectDeleteBgImgElement.addEventListener("editSettingDeleteBackgroundImages",this.handler),this.selectDeleteBgImgElement.setAttribute("data-setting-values",this.deleteBackgroundImagesValues.join(",")),modeOfUseServiceInstance.getSetting("deleteBackgroundImages").then((t=>{this.settingValues=t.values.split(",");const n=this.deleteBackgroundImagesValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectDeleteBgImgElement.setAttribute("data-index",n.toString())}))}setDeleteBackgroundImages=t=>{let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("deleteBackgroundImages",n,!0):modeOfUseServiceInstance.addSettingCustomValue("deleteBackgroundImages",3,t),deleteBackgroundImagesServiceInstance.setDeleteBackgroundImages(t)};createHandler=()=>t=>{"editSettingDeleteBackgroundImages"===t.type&&this.setDeleteBackgroundImages(t.detail.newValue)}}customElements.define("app-edit-delete-background-images",EditDeleteBackgroundImagesComponent);const editFocusAspectLayout=document.createElement("template");editFocusAspectLayout.innerHTML=`\n\t<form class="d-flex flex-column gap-4">\n\t\t<app-select-edit-value id="${PREFIX}select-focus-size" data-name="focusSize" data-label="true"></app-select-edit-value>\n\t\t<app-select-edit-value id="${PREFIX}select-focus-color" data-name="focusColor" data-label="true"></app-select-edit-value>\n\n\t\t<p>Exemple de texte avec le <span id="${PREFIX}example-focus">focus</span>.</p>\n\t</form>\n`;class EditFocusAspectComponent extends HTMLElement{selectFocusSizeElement=null;selectFocusColorElement=null;settingValues=null;focusSizeValue="";focusColorValue="";focusSizeValues=[DEFAULT_VALUE,"focusSize_big","focusSize_huge"];focusColorValues=[DEFAULT_VALUE,"focusColor_white","focusColor_blue","focusColor_red","focusColor_yellow","focusColor_green","focusColor_black"];handler;constructor(){super(),this.appendChild(editFocusAspectLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectFocusSizeElement=this.querySelector(`#${PREFIX}select-focus-size`),this.selectFocusColorElement=this.querySelector(`#${PREFIX}select-focus-color`),this.selectFocusSizeElement.addEventListener("editSettingFocusSize",this.handler),this.selectFocusColorElement.addEventListener("editSettingFocusColor",this.handler),this.selectFocusSizeElement.setAttribute("data-setting-values",this.focusSizeValues.join(",")),this.selectFocusColorElement.setAttribute("data-setting-values",this.focusColorValues.join(",")),modeOfUseServiceInstance.getSetting("focusAspect").then((t=>{this.settingValues=t.values.split(","),this.focusSizeValue=this.settingValues[t.valueSelected]?.split("_")[0],this.focusColorValue=this.settingValues[t.valueSelected]?.split("_")[1];const n=this.focusSizeValues.findIndex((t=>t===`focusSize_${this.focusSizeValue}`)),i=this.focusColorValues.findIndex((t=>t===`focusColor_${this.focusColorValue}`));this.selectFocusSizeElement.setAttribute("data-index",n.toString()),this.selectFocusColorElement.setAttribute("data-index",i.toString())}))}setFocusAspect=()=>{let t="";t=this.focusSizeValue===DEFAULT_VALUE&&this.focusColorValue===DEFAULT_VALUE?DEFAULT_VALUE:`${this.focusSizeValue}_${this.focusColorValue}`;let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("focusAspect",n,!0):modeOfUseServiceInstance.addSettingCustomValue("focusAspect",3,t),this.setExampleFocus(),focusAspectServiceInstance.setFocus(t)};setExampleFocus=()=>{let t=this.querySelector(`#${PREFIX}example-focus`),n=this.focusSizeValue,i=this.focusColorValue;const s=n!==DEFAULT_VALUE?"big"===n?"4px":"10px":"",a=i!==DEFAULT_VALUE?i:"";t.style.outlineStyle="solid",t.style.outlineWidth=s,t.style.outlineColor=a};createHandler=()=>t=>{switch(t.type){case"editSettingFocusSize":t.detail.newValue===DEFAULT_VALUE?this.focusSizeValue=DEFAULT_VALUE:this.focusSizeValue=t.detail.newValue.split("_")[1],this.setFocusAspect();break;case"editSettingFocusColor":t.detail.newValue===DEFAULT_VALUE?this.focusColorValue=DEFAULT_VALUE:this.focusColorValue=t.detail.newValue.split("_")[1],this.setFocusAspect()}}}customElements.define("app-edit-focus-aspect",EditFocusAspectComponent);const editFontFamilyLayout=document.createElement("template");editFontFamilyLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="fontFamily"></app-select-edit-value>\n\t</form>\n';class EditFontFamilyComponent extends HTMLElement{selectFontFamilyElement=null;settingValues=null;fontFamilyValues=[DEFAULT_VALUE,"AccessibleDfA","B612Mono","Airbus","ComicSansMS","LexendDeca","Luciole","SylexiadSans","Verdana"];handler;constructor(){super(),this.appendChild(editFontFamilyLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectFontFamilyElement=this.querySelector("app-select-edit-value"),this.selectFontFamilyElement.addEventListener("editSettingFontFamily",this.handler),this.selectFontFamilyElement.setAttribute("data-setting-values",this.fontFamilyValues.join(",")),modeOfUseServiceInstance.getSetting("fontFamily").then((t=>{this.settingValues=t.values.split(",");const n=this.fontFamilyValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectFontFamilyElement.setAttribute("data-index",n.toString())}))}setFontFamily=t=>{let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("fontFamily",n,!0):modeOfUseServiceInstance.addSettingCustomValue("fontFamily",3,t),fontFamilyServiceInstance.setFontFamily(t)};createHandler=()=>t=>{"editSettingFontFamily"===t.type&&this.setFontFamily(t.detail.newValue)}}customElements.define("app-edit-font-family",EditFontFamilyComponent);const editLinkStyleLayout=document.createElement("template");editLinkStyleLayout.innerHTML=`\n\t<form class="d-flex flex-column gap-4">\n\t\t<app-select-edit-value id="${PREFIX}select-color-link" data-name="linkColor" data-label="true"></app-select-edit-value>\n\t\t<app-select-edit-value id="${PREFIX}select-color-active-link" data-name="linkPointedColor" data-label="true"></app-select-edit-value>\n\t\t<app-select-edit-value id="${PREFIX}select-color-visited-link" data-name="linkVisitedColor" data-label="true"></app-select-edit-value>\n\t</form>\n`;class EditLinkStyleComponent extends HTMLElement{selectColorLinkElement=null;selectColorActiveLinkElement=null;selectColorVisitedLinkElement=null;settingValues=null;colorLinkValue="";colorActiveLinkValue="";colorVisitedLinkValue="";colorLinkValues=[`linkColor_${DEFAULT_VALUE}`,"linkColor_lightblue","linkColor_lightgreen","linkColor_yellow","linkColor_orange","linkColor_pink","linkColor_black","linkColor_darkblue","linkColor_darkgreen","linkColor_red","linkColor_purple","linkColor_brown"];handler;constructor(){super(),this.appendChild(editLinkStyleLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectColorLinkElement=this.querySelector(`#${PREFIX}select-color-link`),this.selectColorActiveLinkElement=this.querySelector(`#${PREFIX}select-color-active-link`),this.selectColorVisitedLinkElement=this.querySelector(`#${PREFIX}select-color-visited-link`),this.selectColorLinkElement.addEventListener("editSettingLinkColor",this.handler),this.selectColorActiveLinkElement.addEventListener("editSettingLinkPointedColor",this.handler),this.selectColorVisitedLinkElement.addEventListener("editSettingLinkVisitedColor",this.handler),this.selectColorLinkElement.setAttribute("data-setting-values",this.colorLinkValues.join(",")),this.selectColorActiveLinkElement.setAttribute("data-setting-values",this.colorLinkValues.join(",")),this.selectColorVisitedLinkElement.setAttribute("data-setting-values",this.colorLinkValues.join(",")),modeOfUseServiceInstance.getSetting("linkStyle").then((t=>{this.settingValues=t.values.split(","),this.colorLinkValue=this.settingValues[t.valueSelected]?.split("_")[0],this.colorActiveLinkValue=this.settingValues[t.valueSelected]?.split("_")[1],this.colorVisitedLinkValue=this.settingValues[t.valueSelected]?.split("_")[2];const n=this.colorLinkValues.findIndex((t=>t===`linkColor_${this.colorLinkValue}`)),i=this.colorLinkValues.findIndex((t=>t===`linkColor_${this.colorActiveLinkValue}`)),s=this.colorLinkValues.findIndex((t=>t===`linkColor_${this.colorVisitedLinkValue}`));this.selectColorLinkElement.setAttribute("data-index",n.toString()),this.selectColorActiveLinkElement.setAttribute("data-index",i.toString()),this.selectColorVisitedLinkElement.setAttribute("data-index",s.toString())}))}setLinkStyle=()=>{let t="";t=this.colorLinkValue===DEFAULT_VALUE&&this.colorActiveLinkValue===DEFAULT_VALUE&&this.colorVisitedLinkValue===DEFAULT_VALUE?DEFAULT_VALUE:`${this.colorLinkValue}_${this.colorActiveLinkValue}_${this.colorVisitedLinkValue}`;let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("linkStyle",n,!0):modeOfUseServiceInstance.addSettingCustomValue("linkStyle",3,t),linkStyleServiceInstance.setLinkStyle(t)};createHandler=()=>t=>{switch(t.type){case"editSettingLinkColor":this.colorLinkValue=t.detail.newValue.split("_")[1],this.setLinkStyle();break;case"editSettingLinkPointedColor":this.colorActiveLinkValue=t.detail.newValue.split("_")[1],this.setLinkStyle();break;case"editSettingLinkVisitedColor":this.colorVisitedLinkValue=t.detail.newValue.split("_")[1],this.setLinkStyle()}}}customElements.define("app-edit-link-style",EditLinkStyleComponent);const editMagnifierLayout=document.createElement("template");editMagnifierLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="magnifier"></app-select-edit-value>\n\t</form>\n';class EditMagnifierComponent extends HTMLElement{selectMagnifierElement=null;settingValues=null;magnifierValues=[DEFAULT_VALUE,"zoom2","zoom5","zoom10","zoom15"];handler;constructor(){super(),this.appendChild(editMagnifierLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectMagnifierElement=this.querySelector("app-select-edit-value"),this.selectMagnifierElement.addEventListener("editSettingMagnifier",this.handler),this.selectMagnifierElement.setAttribute("data-setting-values",this.magnifierValues.join(",")),this.querySelector("form").addEventListener("change",this.handler),modeOfUseServiceInstance.getSetting("magnifier").then((t=>{this.settingValues=t.values.split(",");const n=this.magnifierValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectMagnifierElement.setAttribute("data-index",n.toString())}))}setMagnifier=t=>{let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("magnifier",n,!0):modeOfUseServiceInstance.addSettingCustomValue("magnifier",3,t),magnifierServiceInstance.setMagnifier(t)};createHandler=()=>t=>{"editSettingMagnifier"===t.type&&this.setMagnifier(t.detail.newValue)}}customElements.define("app-edit-magnifier",EditMagnifierComponent);const editMarginAlignLayout=document.createElement("template");editMarginAlignLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="marginAlign"></app-select-edit-value>\n\t</form>\n';class EditMarginAlignComponent extends HTMLElement{selectMarginAlignElement=null;settingValues=null;marginAlignValues=[DEFAULT_VALUE,"alignLeft","marginLeft","marginList"];handler;constructor(){super(),this.appendChild(editMarginAlignLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectMarginAlignElement=this.querySelector("app-select-edit-value"),this.selectMarginAlignElement.addEventListener("editSettingMarginAlign",this.handler),this.selectMarginAlignElement.setAttribute("data-setting-values",this.marginAlignValues.join(",")),modeOfUseServiceInstance.getSetting("marginAlign").then((t=>{this.settingValues=t.values.split(",");const n=this.marginAlignValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectMarginAlignElement.setAttribute("data-index",n.toString())}))}setMarginAlign=t=>{let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("marginAlign",n,!0):modeOfUseServiceInstance.addSettingCustomValue("marginAlign",3,t),marginAlignServiceInstance.setMargin(t)};createHandler=()=>t=>{"editSettingMarginAlign"===t.type&&this.setMarginAlign(t.detail.newValue)}}customElements.define("app-edit-margin-align",EditMarginAlignComponent);const editNavigationAutoLayout=document.createElement("template");editNavigationAutoLayout.innerHTML=`\n\t<form class="d-flex flex-column gap-4">\n\t\t<fieldset>\n\t\t\t<legend class="fs-5" data-i18n="navigationAuto_label"></legend>\n\t\t\t<div class="btn-group w-100" role="group">\n\t\t\t\t\t<input class="btn-check" type="radio" name="navigationAuto" id="${PREFIX}${DEFAULT_VALUE}-navigation-auto" value="${DEFAULT_VALUE}" autocomplete="off">\n\t\t\t\t\t<label class="btn btn-secondary" for="${PREFIX}${DEFAULT_VALUE}-navigation-auto" data-i18n="navigationAuto_inactive"></label>\n\t\t\t\t\t<input class="btn-check" type="radio" name="navigationAuto" id="${PREFIX}autoFocus-navigation-auto" value="autoFocus" autocomplete="off">\n\t\t\t\t\t<label class="btn btn-secondary" for="${PREFIX}autoFocus-navigation-auto" data-i18n="navigationAuto_active"></label>\n\t\t\t</div>\n\t\t</fieldset>\n\n\t\t<app-select-edit-value class="d-none" data-name="navigationDelay"></app-select-edit-value>\n\t</form>\n`;class EditNavigationAutoComponent extends HTMLElement{selectNavigationDelayElement=null;settingValues=null;navigationDelayValues=["navigationDelay_delay1","navigationDelay_delay2","navigationDelay_delay3","navigationDelay_delay6"];navigationAuto;delay;handler;constructor(){super(),this.appendChild(editNavigationAutoLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectNavigationDelayElement=this.querySelector("app-select-edit-value"),this.selectNavigationDelayElement.addEventListener("editSettingNavigationDelay",this.handler),this.selectNavigationDelayElement.setAttribute("data-setting-values",this.navigationDelayValues.join(",")),this.querySelector("form").addEventListener("change",this.handler),modeOfUseServiceInstance.getSetting("navigationAuto").then((t=>{this.settingValues=t.values.split(","),this.navigationAuto=this.settingValues[t.valueSelected].split("_")[0],this.delay=this.settingValues[t.valueSelected].split("_")[1],this.querySelector(`input[name="navigationAuto"][id="${PREFIX}${this.navigationAuto}-navigation-auto"]`).checked=!0;const n=this.delay?this.navigationDelayValues.findIndex((t=>t===`navigationDelay_${this.delay}`)):0;this.selectNavigationDelayElement.classList.toggle("d-none",this.navigationAuto===DEFAULT_VALUE),this.selectNavigationDelayElement.setAttribute("data-index",n.toString())}))}setNavigationAuto=()=>{let t="";t=this.navigationAuto===DEFAULT_VALUE?DEFAULT_VALUE:`${this.navigationAuto}_${this.delay}`;let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("navigationAuto",n,!0):modeOfUseServiceInstance.addSettingCustomValue("navigationAuto",3,t),navigationAutoServiceInstance.setNavigationAuto(t)};createHandler=()=>t=>{switch(t.type){case"change":this.navigationAuto=this.querySelector('input[name="navigationAuto"]:checked').value,this.selectNavigationDelayElement.classList.toggle("d-none",this.navigationAuto===DEFAULT_VALUE),this.setNavigationAuto();break;case"editSettingNavigationDelay":this.delay=t.detail.newValue.split("_")[1],this.setNavigationAuto()}}}customElements.define("app-edit-navigation-auto",EditNavigationAutoComponent);const editReadAloudLayout=document.createElement("template");editReadAloudLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="readAloud"></app-select-edit-value>\n\t</form>\n';class EditReadAloudComponent extends HTMLElement{selectReadAloudElement=null;settingValues=null;readAloudValues=[DEFAULT_VALUE,"word","sentence","paragraph","all"];handler;constructor(){super(),this.appendChild(editReadAloudLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectReadAloudElement=this.querySelector("app-select-edit-value"),this.selectReadAloudElement.addEventListener("editSettingReadAloud",this.handler),this.selectReadAloudElement.setAttribute("data-setting-values",this.readAloudValues.join(",")),modeOfUseServiceInstance.getSetting("readAloud").then((t=>{this.settingValues=t.values.split(",");const n=this.readAloudValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectReadAloudElement.setAttribute("data-index",n.toString())}))}setReadAloud=t=>{let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("readAloud",n,!0):modeOfUseServiceInstance.addSettingCustomValue("readAloud",3,t),readAloudServiceInstance.setReadAloud(t)};createHandler=()=>t=>{"editSettingReadAloud"===t.type&&this.setReadAloud(t.detail.newValue)}}customElements.define("app-edit-read-aloud",EditReadAloudComponent);const editReadingGuideLayout=document.createElement("template");editReadingGuideLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="readingGuide"></app-select-edit-value>\n\t</form>\n';class EditReadingGuideComponent extends HTMLElement{selectReadingGuideElement=null;settingValues=null;readingGuideValues=[DEFAULT_VALUE,"ruleGuide","maskGuide"];handler;constructor(){super(),this.appendChild(editReadingGuideLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectReadingGuideElement=this.querySelector("app-select-edit-value"),this.selectReadingGuideElement.addEventListener("editSettingReadingGuide",this.handler),this.selectReadingGuideElement.setAttribute("data-setting-values",this.readingGuideValues.join(",")),modeOfUseServiceInstance.getSetting("readingGuide").then((t=>{this.settingValues=t.values.split(",");const n=this.readingGuideValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectReadingGuideElement.setAttribute("data-index",n.toString())}))}setReadingGuide=t=>{let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("readingGuide",n,!0):modeOfUseServiceInstance.addSettingCustomValue("readingGuide",3,t),readingGuideServiceInstance.setReadingMaskGuide(t)};createHandler=()=>t=>{"editSettingReadingGuide"===t.type&&this.setReadingGuide(t.detail.newValue)}}customElements.define("app-edit-reading-guide",EditReadingGuideComponent);const editScrollAspectLayout=document.createElement("template");editScrollAspectLayout.innerHTML=`\n\t<form class="d-flex flex-column gap-4">\n\t\t<app-select-edit-value id="${PREFIX}select-scroll-size" data-name="scrollSize" data-label="true"></app-select-edit-value>\n\t\t<app-select-edit-value id="${PREFIX}select-scroll-color" data-name="scrollColor" data-label="true"></app-select-edit-value>\n\t</form>\n`;class EditScrollAspectComponent extends HTMLElement{selectScrollSizeElement=null;selectScrollColorElement=null;settingValues=null;scrollSizeValue="";scrollColorValue="";scrollSizeValues=[DEFAULT_VALUE,"scrollSize_big","scrollSize_huge"];scrollColorValues=[DEFAULT_VALUE,"scrollColor_white","scrollColor_blue","scrollColor_red","scrollColor_yellow","scrollColor_green","scrollColor_black"];handler;constructor(){super(),this.appendChild(editScrollAspectLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectScrollSizeElement=this.querySelector(`#${PREFIX}select-scroll-size`),this.selectScrollColorElement=this.querySelector(`#${PREFIX}select-scroll-color`),this.selectScrollSizeElement.addEventListener("editSettingScrollSize",this.handler),this.selectScrollColorElement.addEventListener("editSettingScrollColor",this.handler),this.selectScrollSizeElement.setAttribute("data-setting-values",this.scrollSizeValues.join(",")),this.selectScrollColorElement.setAttribute("data-setting-values",this.scrollColorValues.join(",")),modeOfUseServiceInstance.getSetting("scrollAspect").then((t=>{this.settingValues=t.values?.split(","),this.scrollSizeValue=this.settingValues[t.valueSelected]?.split("_")[0],this.scrollColorValue=this.settingValues[t.valueSelected]?.split("_")[1];const n=this.scrollSizeValues.findIndex((t=>t===`scrollSize_${this.scrollSizeValue}`)),i=this.scrollColorValues.findIndex((t=>t===`scrollColor_${this.scrollColorValue}`));this.selectScrollSizeElement.setAttribute("data-index",n.toString()),this.selectScrollColorElement.setAttribute("data-index",i.toString())}))}setScrollAspect=()=>{let t="";t=this.scrollColorValue===DEFAULT_VALUE?this.scrollSizeValue:`${this.scrollSizeValue}_${this.scrollColorValue}`;let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("scrollAspect",n,!0):modeOfUseServiceInstance.addSettingCustomValue("scrollAspect",3,t),scrollAspectServiceInstance.setScrollAspect(t)};createHandler=()=>t=>{switch(t.type){case"editSettingScrollSize":t.detail.newValue===DEFAULT_VALUE?this.scrollSizeValue=DEFAULT_VALUE:this.scrollSizeValue=t.detail.newValue.split("_")[1],this.setScrollAspect();break;case"editSettingScrollColor":t.detail.newValue===DEFAULT_VALUE?this.scrollColorValue=DEFAULT_VALUE:this.scrollColorValue=t.detail.newValue.split("_")[1],this.setScrollAspect()}}}customElements.define("app-edit-scroll-aspect",EditScrollAspectComponent);const editTextSizeLayout=document.createElement("template");editTextSizeLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="textSize"></app-select-edit-value>\n\t</form>\n';class EditTextSizeComponent extends HTMLElement{selectTextSizeElement=null;settingValues=null;textSizeValues=[DEFAULT_VALUE,"110","130","160","200","350","500"];handler;constructor(){super(),this.appendChild(editTextSizeLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectTextSizeElement=this.querySelector("app-select-edit-value"),this.selectTextSizeElement.addEventListener("editSettingTextSize",this.handler),this.selectTextSizeElement.setAttribute("data-setting-values",this.textSizeValues.join(",")),modeOfUseServiceInstance.getSetting("textSize").then((t=>{this.settingValues=t.values.split(",");const n=this.textSizeValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectTextSizeElement.setAttribute("data-index",n.toString())}))}setTextSize=t=>{let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("textSize",n,!0):modeOfUseServiceInstance.addSettingCustomValue("textSize",3,t),textSizeServiceInstance.setFontSize(t)};createHandler=()=>t=>{"editSettingTextSize"===t.type&&this.setTextSize(t.detail.newValue)}}customElements.define("app-edit-text-size",EditTextSizeComponent);const editTextSpacingLayout=document.createElement("template");editTextSpacingLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="textSpacing"></app-select-edit-value>\n\t</form>\n';class EditTextSpacingComponent extends HTMLElement{selectTextSpacingElement=null;settingValues=null;textSpacingValues=[DEFAULT_VALUE,"spacingTextSmall","spacingTextBig","spacingTextHuge"];handler;constructor(){super(),this.appendChild(editTextSpacingLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectTextSpacingElement=this.querySelector("app-select-edit-value"),this.selectTextSpacingElement.addEventListener("editSettingTextSpacing",this.handler),this.selectTextSpacingElement.setAttribute("data-setting-values",this.textSpacingValues.join(",")),modeOfUseServiceInstance.getSetting("textSpacing").then((t=>{this.settingValues=t.values.split(",");const n=this.textSpacingValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectTextSpacingElement.setAttribute("data-index",n.toString())}))}setSpacingText=t=>{let n=this.settingValues.indexOf(t);-1!==n?modeOfUseServiceInstance.setSettingValue("textSpacing",n,!0):modeOfUseServiceInstance.addSettingCustomValue("textSpacing",3,t),textSpacingServiceInstance.setSpacingText(t)};createHandler=()=>t=>{"editSettingTextSpacing"===t.type&&this.setSpacingText(t.detail.newValue)}}customElements.define("app-edit-text-spacing",EditTextSpacingComponent);const editZoomLayout=document.createElement("template");editZoomLayout.innerHTML='\n\t<form>\n\t\t<app-select-edit-value data-name="zoom"></app-select-edit-value>\n\t</form>\n';class EditZoomComponent extends HTMLElement{selectZoomElement=null;settingValues=null;zoomValues=[DEFAULT_VALUE,"110","130","160","200","350","500"];handler;constructor(){super(),this.appendChild(editZoomLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectZoomElement=this.querySelector("app-select-edit-value"),this.selectZoomElement.addEventListener("editSettingZoom",this.handler),this.selectZoomElement.setAttribute("data-setting-values",this.zoomValues.join(",")),modeOfUseServiceInstance.getSetting("zoom").then((t=>{this.settingValues=t.values.split(",");const n=this.zoomValues.findIndex((n=>n===this.settingValues[t.valueSelected]));this.selectZoomElement.setAttribute("data-index",n.toString())}))}setZoom(t){let n=this.settingValues.indexOf(t);-1===n?modeOfUseServiceInstance.addSettingCustomValue("zoom",3,t):modeOfUseServiceInstance.setSettingValue("zoom",n,!0),zoomServiceInstance.setZoom(t)}createHandler=()=>t=>{"editSettingZoom"===t.type&&this.setZoom(t.detail.newValue)}}customElements.define("app-edit-zoom",EditZoomComponent);const homeLayout=document.createElement("template");homeLayout.innerHTML='\n<section class="bg-dark p-3 d-flex align-items-center justify-content-between">\n\t<button id="change-mode-btn" type="button" class="btn btn-secondary bg-dark gap-2 p-0 border-0" data-i18n-title="otherUsagesModes">\n\t\t<span class="visually-hidden" data-i18n="otherUsagesModes"></span>\n\t\t<div class="sc-home__icon-mode bg-body rounded-circle text-body">\n\t\t\t<app-icon data-size="2.5em"></app-icon>\n\t\t</div>\n\t\t<div class="d-flex flex-column align-items-start">\n\t\t\t<span class="text-white" data-i18n="profile"></span>\n\t\t\t<span id="mode-name" class="fs-4 fw-bold text-primary"></span>\n\t\t</div>\n\t</button>\n\t<div class="d-grid gap-3 d-md-block">\n\t\t<button id="pause-btn" type="button" class="btn btn-icon btn-inverse btn-secondary" data-i18n-title="pause">\n\t\t\t<span id="pause-label" class="visually-hidden" data-i18n="pause"></span>\n\t\t\t<app-icon id="pause-icon" data-name="Pause"></app-icon>\n\t\t</button>\n\t</div>\n</section>\n\n<section class="gap-3 p-3">\n\t<p id="pause-info" class="d-none" data-i18n="pauseInfo"></p>\n\t<div class="sc-home__settings gap-3">\n\t\t<app-mode></app-mode>\n\t\t<button id="settings-btn" type="button" class="btn btn-secondary">\n\t\t\t<app-icon class="me-1" data-name="Settings"></app-icon>\n\t\t\t<span data-i18n="othersSettings"></span>\n\t\t</button>\n\t</div>\n</section>\n';class HomeComponent extends HTMLElement{static observedAttributes=["data-modes","data-custom"];changeModeBtn=null;settingsBtn=null;pauseBtn=null;modeName=null;modeIcon=null;currentMode=null;currentModeSettings;pauseState=!1;handler;constructor(){super(),this.appendChild(homeLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.changeModeBtn=this.querySelector("#change-mode-btn"),this.settingsBtn=this.querySelector("#settings-btn"),this.pauseBtn=this.querySelector("#pause-btn"),this.modeName=this.querySelector("#mode-name"),this.modeIcon=this.querySelector("app-icon"),this.currentMode=this.querySelector("app-mode"),this.changeModeBtn?.addEventListener("click",this.handler),this.settingsBtn?.addEventListener("click",this.handler),this.pauseBtn?.addEventListener("click",this.handler)}disconnectedCallback(){this.changeModeBtn?.removeEventListener("click",this.handler),this.settingsBtn?.removeEventListener("click",this.handler),this.pauseBtn?.removeEventListener("click",this.handler)}attributeChangedCallback(t,n,i){if("data-modes"===t){let t=modeOfUseServiceInstance.getSelectedMode(JSON.parse(i)),n=Object.entries(JSON.parse(t))[0][0];this.modeName.innerText=i18nServiceInstance.getMessage(`${n}Name`),this.modeIcon?.setAttribute("data-name",n),this.currentModeSettings=JSON.stringify(Object.entries(JSON.parse(t))[0][1]),this.currentMode.setAttribute("data-settings",this.currentModeSettings),localStorageServiceInstance.getItem("is-paused").then((t=>{t&&this.setPauseState()}))}}createHandler=()=>t=>{if("click"===t.type)switch(t.currentTarget){case this.changeModeBtn:this.changeModeButtonEvent();break;case this.settingsBtn:this.settingsButtonEvent();break;case this.pauseBtn:this.setPauseState()}};changeModeButtonEvent=()=>{let t=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:"modes"}});this.changeModeBtn?.dispatchEvent(t)};settingsButtonEvent=()=>{let t=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:"settings"}});this.settingsBtn?.dispatchEvent(t)};setPauseState=()=>{this.pauseState=!this.pauseState,this.querySelector("#pause-icon").setAttribute("data-name",this.pauseState?"Play":"Pause"),localStorageServiceInstance.setItem("is-paused",this.pauseState),this.pauseState?(pauseServiceInstance.pauseSettings(this.currentModeSettings),this.settingsBtn.disabled=!0,this.changeModeBtn.disabled=!0,this.pauseBtn.setAttribute("title",i18nServiceInstance.getMessage("play")),this.pauseBtn.querySelector("#pause-label").innerText=i18nServiceInstance.getMessage("play"),this.querySelector("#pause-info").classList.remove("d-none"),this.currentMode.setAttribute("data-pause","true")):(pauseServiceInstance.playSettings(),this.settingsBtn.disabled=!1,this.changeModeBtn.disabled=!1,this.pauseBtn.setAttribute("title",i18nServiceInstance.getMessage("pause")),this.pauseBtn.querySelector("#pause-label").innerText=i18nServiceInstance.getMessage("pause"),this.querySelector("#pause-info").classList.add("d-none"),this.currentMode.setAttribute("data-pause","false"))}}customElements.define("app-home",HomeComponent);const tmplMode=document.createElement("template");tmplMode.innerHTML='\n<div id="mode-content" class="sc-mode__setting-grid gap-2">\n\t<app-font-family class="sc-mode__setting"></app-font-family>\n\t<app-text-size class="sc-mode__setting"></app-text-size>\n\t<app-capital-letters class="sc-mode__setting"></app-capital-letters>\n\t<app-text-spacing class="sc-mode__setting"></app-text-spacing>\n\t<app-reading-guide class="sc-mode__setting"></app-reading-guide>\n\t<app-margin-align class="sc-mode__setting"></app-margin-align>\n\t<app-magnifier class="sc-mode__setting"></app-magnifier>\n\t<app-read-aloud class="sc-mode__setting"></app-read-aloud>\n\t<app-text-color class="sc-mode__setting"></app-text-color>\n\t<app-cursor-aspect class="sc-mode__setting"></app-cursor-aspect>\n\t<app-focus-aspect class="sc-mode__setting"></app-focus-aspect>\n\t<app-color-contrast class="sc-mode__setting"></app-color-contrast>\n\t<app-link-style class="sc-mode__setting"></app-link-style>\n\t<app-clearly-links class="sc-mode__setting"></app-clearly-links>\n\t<app-stop-animations class="sc-mode__setting"></app-stop-animations>\n\t<app-delete-background-images class="sc-mode__setting"></app-delete-background-images>\n\t<app-scroll-aspect class="sc-mode__setting"></app-scroll-aspect>\n\t<app-skip-to-content class="sc-mode__setting"></app-skip-to-content>\n\t<app-navigation-buttons class="sc-mode__setting"></app-navigation-buttons>\n\t<app-scroll-type class="sc-mode__setting"></app-scroll-type>\n\t<app-restart-top-left class="sc-mode__setting"></app-restart-top-left>\n\t<app-click-facilite class="sc-mode__setting"></app-click-facilite>\n\t<app-navigation-auto class="sc-mode__setting"></app-navigation-auto>\n\t<app-zoom class="sc-mode__setting"></app-zoom>\n</div>\n';class ModeComponent extends HTMLElement{static observedAttributes=["data-settings","data-pause"];modeContent=null;settingsDictionnary=[];constructor(){super(),this.appendChild(tmplMode.content.cloneNode(!0)),this.querySelectorAll(".sc-mode__setting").forEach((t=>{this.settingsDictionnary.push({name:stringServiceInstance.normalizeSettingName(t.tagName),element:t.tagName})}))}connectedCallback(){this.modeContent=this.querySelector("#mode-content")}attributeChangedCallback(t,n,i){"data-settings"===t&&this.displaySettings(JSON.parse(i)),"data-pause"===t&&this.disableSettings("true"===i)}displaySettings=t=>{let n=[],i=[];this.querySelectorAll(".sc-mode__setting").forEach((t=>{t.classList.add("d-none")})),t.forEach((t=>{const s=Object.values(t)[0];let a=Object.keys(t)[0],o=this.settingsDictionnary.find((t=>t.name===stringServiceInstance.normalizeSettingName(a))),l=this.querySelector(o?.element);l&&(l.setAttribute("data-values",JSON.stringify(s)),l.classList.toggle("d-none",!s.isTool),s.order?n[s.order-1]=l:i.push(l),l.remove())})),n.filter((t=>t)).concat(i).forEach((t=>{this.modeContent.appendChild(t)}))};disableSettings=t=>{this.querySelectorAll(".sc-mode__setting").forEach((n=>{n.querySelector("app-btn-setting").setAttribute("data-disabled",String(t))}))}}customElements.define("app-mode",ModeComponent);const modesLayout=document.createElement("template");modesLayout.innerHTML='\n<form class="p-3">\n\t<fieldset class="d-grid gap-2 mb-4 text-body">\n\t\t<legend class="fs-6 fw-normal" data-i18n="chooseModeAndValidate"></legend>\n\t\t<div id="select-mode-zone" class="d-grid gap-1">\n\t\t</div>\n\t</fieldset>\n</form>\n';class ModesComponent extends HTMLElement{static observedAttributes=["data-modes"];selectModeForm=null;selectModeZone=null;handler;constructor(){super(),this.appendChild(modesLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.selectModeForm=this.querySelector("form"),this.selectModeZone=this.querySelector("#select-mode-zone"),this.selectModeForm?.addEventListener("submit",this.handler)}disconnectedCallback(){this.selectModeForm?.removeEventListener("submit",this.handler)}attributeChangedCallback(t,n,i){"data-modes"===t&&this.displayListMode(JSON.parse(i))}displayListMode=t=>{const n=t.modes,i=t.selectedMode;let s="";n.forEach((t=>{let n=0===Object.entries(t)[0][1].length,a=Object.keys(t)[0]===i,o=`<app-select-mode data-label="${Object.keys(t)[0]}" data-checked="${a}" data-disabled="${n}"></app-select-mode>`;s+=o})),this.selectModeZone.innerHTML=s};getSelectedMode=()=>this.querySelector("input:checked").value;createHandler=()=>t=>{"submit"===t.type&&this.selectModeFormEvent(t)};selectModeFormEvent=t=>{t.preventDefault(),localStorageServiceInstance.setItem("current-category",null),modeOfUseServiceInstance.setSelectedMode(this.getSelectedMode());let n=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:"home"}});this.dispatchEvent(n)}}customElements.define("app-modes",ModesComponent);const settingsLayout=document.createElement("template");settingsLayout.innerHTML=`\n\t<section class="accordion mb-2">\n\t\t<app-text class="c-settings__category accordion-item"></app-text>\n\t\t<app-layout class="c-settings__category accordion-item"></app-layout>\n\t\t<app-picture-video class="c-settings__category accordion-item"></app-picture-video>\n\t\t<app-sound class="c-settings__category accordion-item"></app-sound>\n\t\t<app-navigation class="c-settings__category accordion-item"></app-navigation>\n\t\t<div class="border-top border-light border-1"></div>\n\t</section>\n\n\t<div class="p-3">\n\t\t<button id="${PREFIX}reset-mode" type="button" class="btn btn-secondary w-100" data-i18n="resetThisMode" data-i18n-title="resetThisModeTitle"></button>\n\t</div>\n\n`;class SettingsComponent extends HTMLElement{static observedAttributes=["data-modes"];resetModeElement=null;selectedMode="";handler;constructor(){super(),this.appendChild(settingsLayout.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.resetModeElement=this.querySelector(`#${PREFIX}reset-mode`),this.resetModeElement.addEventListener("click",this.handler),this.addEventListener("collapsedCategory",this.handler)}disconnectedCallback(){this.removeEventListener("collapsedCategory",this.handler)}attributeChangedCallback(t,n,i){if("data-modes"===t){this.openOrHideCategories(i),this.selectedMode=JSON.parse(i).selectedMode;let t=modeOfUseServiceInstance.getSelectedMode(JSON.parse(i)),n=this.querySelectorAll(".c-settings__category");const s=Object.entries(JSON.parse(t))[0][1];n.forEach((t=>{t.setAttribute("data-settings",JSON.stringify(s))}))}}openOrHideCategories=t=>{categoriesServiceInstance.openMainCategory(JSON.parse(t).selectedMode).then((t=>{t.forEach((t=>{this.querySelector(t.name).setAttribute("data-open",(!t.open).toString())}))}))};createHandler=()=>t=>{switch(t.type){case"collapsedCategory":categoriesServiceInstance.settingAccordions.forEach((t=>{this.querySelector(t.name).setAttribute("data-open",(!t.open).toString())}));break;case"click":modeOfUseServiceInstance.setSelectedMode(this.selectedMode)}}}customElements.define("app-settings",SettingsComponent);class AbstractCategory extends HTMLElement{static observedAttributes=["data-settings","data-open"];btnAccordion=null;accordionContainer=null;settingsContainer=null;btnMoreSettings=null;settingsDictionnary=[];settingsElements=[];displayAllSettings=!1;CLASS_NAME_SHOW="show";CLASS_NAME_COLLAPSED="collapsed";_triggerArray=[];handler;constructor(){super(),this.handler=this.createHandler()}connectedCallback(){this.btnAccordion=this.querySelector("button.accordion-button"),this.accordionContainer=this.querySelector("div.accordion-collapse"),this.settingsContainer=this.querySelector(".c-category__settings-container"),this.btnMoreSettings=this.querySelector(".c-category__btn-more"),this.querySelectorAll(".c-category__setting").forEach((t=>{this.settingsDictionnary.push({name:stringServiceInstance.normalizeSettingName(t.tagName),element:t.tagName}),this.settingsElements.push(this.querySelector(t.tagName))})),this._triggerArray.push(this.btnAccordion),this.btnAccordion?.addEventListener("click",this.handler),this.btnMoreSettings?.addEventListener("click",this.handler)}disconnectedCallback(){this.btnAccordion?.removeEventListener("click",this.handler),this.btnMoreSettings?.removeEventListener("click",this.handler)}attributeChangedCallback(t,n,i){"data-settings"===t&&this.displaySettings(JSON.parse(i)),"data-open"===t&&this.addAriaAndCollapsedClass(this._triggerArray,JSON.parse(i))}addAriaAndCollapsedClass=(t,n)=>{if(t.length)for(const i of t)this.accordionContainer?.classList.toggle(this.CLASS_NAME_SHOW,!n),i?.classList.toggle(this.CLASS_NAME_COLLAPSED,n),i?.setAttribute("aria-expanded",String(n))};displaySettings=t=>{this.btnMoreSettings?.classList.add("d-none"),this.displayAllSettings||this.settingsElements.forEach((t=>{t.removeAttribute("data-default-setting"),t.classList.add("d-none")}));let n=0;t.forEach((t=>{let i=this.settingsDictionnary.find((n=>n.name===stringServiceInstance.normalizeSettingName(Object.keys(t)[0]))),s=this.querySelector(i?.element);s?.setAttribute("data-values",JSON.stringify(Object.entries(t)[0][1])),s?.setAttribute("data-default-setting","true"),s?.classList.remove("d-none"),i&&n++})),n!==this.settingsDictionnary.length&&this.btnMoreSettings?.classList.remove("d-none")};displayOrHideOthersSettings=()=>{this.displayAllSettings=!this.displayAllSettings,this.settingsElements.forEach((t=>{t.hasAttribute("data-default-setting")||(t.classList.contains("d-none")?this.btnMoreSettings.innerText=i18nServiceInstance.getMessage("lessSettings"):this.btnMoreSettings.innerText=i18nServiceInstance.getMessage("moreSettings"),t.classList.toggle("d-none"))}))};createHandler=()=>t=>{if("click"===t.type)if(t.currentTarget===this.btnAccordion||this.btnAccordion.contains(t.currentTarget)){categoriesServiceInstance.openCategory(this.tagName);let t=new CustomEvent("collapsedCategory",{bubbles:!0});this.btnAccordion?.dispatchEvent(t)}else t.currentTarget===this.btnMoreSettings&&this.displayOrHideOthersSettings()}}const tmplLayout=document.createElement("template");tmplLayout.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button collapsed gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-layout">\n\t\t\t<app-icon data-name="Affichage" data-size="2em"></app-icon>\n\t\t\t<span data-i18n="layout"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-layout">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="d-flex flex-column gap-2">\n\t\t\t\t<app-magnifier class="c-category__setting" data-can-edit="true"></app-magnifier>\n\t\t\t\t<app-cursor-aspect class="c-category__setting" data-can-edit="true"></app-cursor-aspect>\n\t\t\t\t<app-focus-aspect class="c-category__setting" data-can-edit="true"></app-focus-aspect>\n\t\t\t\t<app-color-contrast class="c-category__setting" data-can-edit="true"></app-color-contrast>\n\t\t\t\t<app-link-style class="c-category__setting" data-can-edit="true"></app-link-style>\n\t\t\t\t<app-clearly-links class="c-category__setting" data-can-edit="true"></app-clearly-links>\n\t\t\t\t<app-zoom class="c-category__setting" data-can-edit="true"></app-zoom>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary mt-3" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class LayoutComponent extends AbstractCategory{constructor(){super(),this.appendChild(tmplLayout.content.cloneNode(!0))}}customElements.define("app-layout",LayoutComponent);const tmplNavigation=document.createElement("template");tmplNavigation.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button collapsed gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-navigation">\n\t\t\t<app-icon data-name="Navigation" data-size="2em"></app-icon>\n\t\t\t<span data-i18n="navigation"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-navigation">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="d-flex flex-column gap-2">\n\t\t\t\t<app-click-facilite class="c-category__setting" data-can-edit="true"></app-click-facilite>\n\t\t\t\t<app-skip-to-content class="c-category__setting" data-can-edit="true"></app-skip-to-content>\n\t\t\t\t<app-scroll-aspect class="c-category__setting" data-can-edit="true"></app-scroll-aspect>\n\t\t\t\t<app-scroll-type class="c-category__setting" data-can-edit="true"></app-scroll-type>\n\t\t\t\t<app-navigation-buttons class="c-category__setting" data-can-edit="true"></app-navigation-buttons>\n\t\t\t\t<app-navigation-auto class="c-category__setting" data-can-edit="true"></app-navigation-auto>\n\t\t\t\t<app-restart-top-left class="c-category__setting" data-can-edit="true"></app-restart-top-left>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary mt-3" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class NavigationComponent extends AbstractCategory{constructor(){super(),this.appendChild(tmplNavigation.content.cloneNode(!0))}}customElements.define("app-navigation",NavigationComponent);const tmplPictureVideo=document.createElement("template");tmplPictureVideo.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button collapsed gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-picture-video">\n\t\t\t<app-icon data-name="Photo_Video" data-size="2em"></app-icon>\n\t\t\t<span data-i18n="medias"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-picture-video">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="d-flex flex-column gap-2">\n\t\t\t\t<app-stop-animations class="c-category__setting" data-can-edit="true"></app-stop-animations>\n\t\t\t\t<app-delete-background-images class="c-category__setting" data-can-edit="true"></app-delete-background-images>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary mt-3" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class PictureVideoComponent extends AbstractCategory{constructor(){super(),this.appendChild(tmplPictureVideo.content.cloneNode(!0))}}customElements.define("app-picture-video",PictureVideoComponent);const tmplSound=document.createElement("template");tmplSound.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button collapsed gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-sound">\n\t\t\t<app-icon data-name="Audio" data-size="2em"></app-icon>\n\t\t\t<span data-i18n="audio"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-sound">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="d-flex flex-column gap-2">\n\t\t\t\t<app-read-aloud class="c-category__setting" data-can-edit="true"></app-read-aloud>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary mt-3" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class SoundComponent extends AbstractCategory{constructor(){super(),this.appendChild(tmplSound.content.cloneNode(!0))}}customElements.define("app-sound",SoundComponent);const tmplText=document.createElement("template");tmplText.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button collapsed gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-text">\n\t\t\t<app-icon data-name="Text" data-size="2em"></app-icon>\n\t\t\t<span data-i18n="text"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-text">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="d-flex flex-column gap-2">\n\t\t\t\t<app-text-size class="c-category__setting" data-can-edit="true"></app-text-size>\n\t\t\t\t<app-font-family class="c-category__setting" data-can-edit="true"></app-font-family>\n\t\t\t\t<app-capital-letters class="c-category__setting" data-can-edit="true"></app-capital-letters>\n\t\t\t\t<app-color-contrast class="c-category__setting" data-can-edit="true"></app-color-contrast>\n\t\t\t\t<app-text-spacing class="c-category__setting" data-can-edit="true"></app-text-spacing>\n\t\t\t\t<app-reading-guide class="c-category__setting" data-can-edit="true"></app-reading-guide>\n\t\t\t\t<app-margin-align class="c-category__setting" data-can-edit="true"></app-margin-align>\n\t\t\t\t<app-text-color class="c-category__setting" data-can-edit="true"></app-text-color>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary mt-3" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class TextComponent extends AbstractCategory{constructor(){super(),this.appendChild(tmplText.content.cloneNode(!0))}}customElements.define("app-text",TextComponent);const tmplToolbar=document.createElement("template");tmplToolbar.innerHTML='\n<app-header id="header"></app-header>\n';class ToolbarComponent extends HTMLElement{header=null;json;defaultJson;handler;state;constructor(){super(),this.appendChild(tmplToolbar.content.cloneNode(!0)),this.handler=this.createHandler()}connectedCallback(){this.header=this.querySelector("#header"),this.state=this.parentNode.parentNode.host.getAttribute("data-state"),filesServiceInstance.getJSONFile("modes-of-use").then((t=>{this.defaultJson=t,localStorageServiceInstance.getItem(JSON_NAME).then((t=>{t&&0!==Object.keys(t).length&&t.version===this.defaultJson.version?this.json=t:(this.json=this.defaultJson,localStorageServiceInstance.setItem(JSON_NAME,this.defaultJson)),this.initCurrentMode("restored"===this.state)}))})),window.addEventListener(`storage-${JSON_NAME}`,this.handler),this.addEventListener("changeRoute",this.handler)}initCurrentMode=(t=!1)=>{this.json.selectedMode?routeServiceInstance.initPages(this,t).then((t=>{t&&this.setCurrentPage(t)})):routeServiceInstance.navigate("modes")};setCurrentPage=t=>{this.header?.setAttribute("data-selected-mode",this.json.selectedMode),setTimeout((()=>{let n=this.querySelector(`app-${t}`);n&&(n?.setAttribute("data-modes",JSON.stringify(this.json)),"edit-setting"===t&&localStorageServiceInstance.getItem("current-setting").then((t=>{if(t){const n=this.querySelector("app-edit-setting");n?.setAttribute("data-setting",t)}})))}))};createHandler=()=>t=>{switch(t.type){case"changeRoute":this.changeRouteEvent(t);break;case`storage-${JSON_NAME}`:this.storageEvent()}};changeRouteEvent=t=>{let n=t.detail.route;if(this.header?.focus(),t.detail.mode&&(this.json.selectedMode=t.detail.mode,this.querySelector("app-home")?.focus()),routeServiceInstance.navigate(n),this.setCurrentPage(n),t.detail.setting){const n=this.querySelector("app-edit-setting");n?.setAttribute("data-setting",t.detail.setting)}};storageEvent=()=>{localStorageServiceInstance.getItem(JSON_NAME).then((t=>{this.json=t,this.setCurrentPage(routeServiceInstance.currentRoute)}))}}customElements.define("app-toolbar",ToolbarComponent);const appRootElt=document.createElement(APP_NAME);document.body.prepend(appRootElt);
//# sourceMappingURL=toolbar.min.js.map