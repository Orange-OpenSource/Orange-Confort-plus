/*
 * orange-confort-plus - version 4.3.0 - 16/01/2024
 * Enhance user experience on web sites
 * Â© 2014 - 2024 Orange SA
 */
"use strict";class FilesService{path="";constructor(){this.path=`${window.location.origin}/`}getModesOfUse(){return fetch(`${this.path}assets/json/modes-of-use.json`).then((t=>t.json())).catch((t=>(console.error(`Error when retrieving JSON file : ${t}.`),t)))}}class I18nService{locale="en";path="";constructor(){this.path=`${window.location.origin}/`,["en","fr"].some((t=>navigator.language.startsWith(t)))&&(this.locale=navigator.language.slice(0,2)),this.getJSON().then((t=>{localStorage.setItem("orange-i18n",JSON.stringify(t))}))}getJSON(){return fetch(`${this.path}_locales/${this.locale}/messages.json`).then((t=>t.json())).catch((t=>(console.error(`Error when retrieving JSON file : ${t}.`),t)))}getMessages(){return localStorage.getItem("orange-i18n")}getMessage(t){const e=JSON.parse(this.getMessages());return e[t]?.message}translate(t){const e=t.querySelectorAll("[data-i18n]");for(const t of e)t.innerHTML=this.getMessage(t.dataset?.i18n);const n=t.querySelectorAll("[data-i18n-title]");for(const t of n)t.title=this.getMessage(t.dataset?.i18nTitle)}}class PathService{path="";constructor(){this.path=`${window.location.origin}/`}}class iconsService{constructor(){}get path(){return`${window.location.origin}/assets/icons/orange-icons-sprite.svg`}loadSprite(t){}}class LocalStorageService{prefix="cplus-";constructor(){}setItem(t,e){localStorage.setItem(`${this.prefix}${t}`,JSON.stringify(e));let n=new CustomEvent(`storage-${t}`,{bubbles:!0});window.dispatchEvent(n)}getItem(t){return new Promise(((e,n)=>{e(JSON.parse(localStorage.getItem(`${this.prefix}${t}`))),n(new Error("KO"))}))}removeItem(t){localStorage.removeItem(`${this.prefix}${t}`)}}const template=document.createElement("template");template.innerHTML='\n<div data-bs-theme="light">\n\t<button type="button" class="btn btn-icon btn-primary btn-lg sc-confort-plus" id="confort" data-i18n-title="mainButton">\n\t\t<span class="visually-hidden" data-i18n="mainButton"></span>\n\t\t<app-icon data-size="3rem" data-name="Accessibility"></app-icon>\n\t</button>\n\t<app-toolbar class="bg-body position-fixed top-0 end-0" id="toolbar"></app-toolbar>\n</div>\n';class AppComponent extends HTMLElement{openConfortPlus=!1;confortPlusBtn=null;confortPlusToolbar=null;i18nService;pathService;iconsService;path;link;constructor(){super(),this.pathService=new PathService,this.path=this.pathService.path,this.i18nService=new I18nService,this.iconsService=new iconsService,this.attachShadow({mode:"open"}),this?.shadowRoot?.appendChild(template.content.cloneNode(!0)),this.link=document.createElement("link"),this.link.rel="stylesheet",this.link.href=`${this.path}css/styles.min.css`,this.shadowRoot?.appendChild(this.link)}connectedCallback(){customElements.upgrade(this),this.iconsService.loadSprite(this.shadowRoot),setTimeout((()=>{this.i18nService.translate(this.shadowRoot)})),this.confortPlusBtn=this?.shadowRoot?.getElementById("confort"),this.confortPlusToolbar=this?.shadowRoot?.getElementById("toolbar"),this.confortPlusToolbar.style.transform="translateX(100%)",this.confortPlusBtn&&this.confortPlusToolbar&&(this.confortPlusToolbar.addEventListener("closeEvent",this.toggleToolbar),this.confortPlusBtn.addEventListener("click",this.toggleToolbar))}disconnectedCallback(){this.confortPlusToolbar?.removeEventListener("closeEvent",this.toggleToolbar),this.confortPlusBtn?.removeEventListener("click",this.toggleToolbar)}toggleToolbar=()=>{this.openConfortPlus=!this.openConfortPlus,this.openConfortPlus?this.confortPlusToolbar.style.removeProperty("transform"):this.confortPlusToolbar.style.transform="translateX(100%)"}}customElements.define("app-root",AppComponent);class AbstractSetting extends HTMLElement{static observedAttributes=["data-values"];settingBtn=null;modalBtn=null;canEdit=!1;localStorageService;i18nService;activesValues;separator=",";callback;constructor(){super(),this.i18nService=new I18nService,this.localStorageService=new LocalStorageService,this.canEdit="true"===this.dataset?.canEdit||this.canEdit}connectedCallback(t){this.settingBtn=this.querySelector("app-btn-setting"),this.modalBtn=this.querySelector("app-btn-modal"),this.canEdit&&(this.modalBtn.classList.remove("d-none"),this.settingBtn.classList.add("sc-btn-setting--with-btn-modal")),this.setSettingBtn(this.activesValues),this.settingBtn.addEventListener("changeSettingEvent",(e=>{let n=e.detail.index;this.localStorageService.getItem("modeOfUse").then((e=>{let s=e;s.modes.forEach((e=>{if(Object.keys(e)[0]===s.selectedMode){let s=Object.entries(e)[0][1].find((e=>Object.keys(e)[0]===t));Object.entries(s)[0][1].activeValue=n}})),this.localStorageService.setItem("modeOfUse",s)}))}))}disconnectedCallback(){this.modalBtn.removeEventListener("clickModalEvent",(()=>{}))}attributeChangedCallback(t,e,n){"data-values"===t&&(this.activesValues=JSON.parse(n),this.setSettingBtn(this.activesValues),this.callback&&this.callback(this.activesValues.values.split(",")[this.activesValues.activeValue]))}setSettingBtn=t=>{this.settingBtn.setAttribute("data-values",t.values),this.settingBtn.setAttribute("data-active-value",t.activeValue),this.modalBtn.setAttribute("data-value",this.i18nService.getMessage(t.values.split(",")[t.activeValue]))};setCallback=t=>{this.callback=t}}const tmplColorContrast=document.createElement("template");tmplColorContrast.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="colorsContrasts" data-icon="Contrast"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class ColorContrastComponent extends AbstractSetting{activesValues={values:"noModifications,reinforcedContrasts,white+black",activeValue:0};constructor(){super(),this.setCallback(this.setColorsContrasts.bind(this)),this.appendChild(tmplColorContrast.content.cloneNode(!0))}connectedCallback(){super.connectedCallback("colorContrast")}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn.removeEventListener("changeSettingEvent",(()=>{}))}setColorsContrasts=t=>{if("noModifications"===t)document.querySelector("#cplus-styles-contrast")?.remove();else{let e="",n="";"reinforcedContrasts"===t||"daltonism"===t?(e="#000",n="#fff"):(e=t.split("+")[0],n=t.split("+")[1]);let s=`\n\t\t\t\t\t\t\t* {\n\t\t\t\t\t\t\t\tcolor: ${e} !important;\n\t\t\t\t\t\t\t\tbackground-color: ${n} !important;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tli a {\n\t\t\t\t\t\t\t\tcolor: ${e} !important;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfieldset,\n\t\t\t\t\t\t\tbutton {\n\t\t\t\t\t\t\t\tborder-color: ${e} !important;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tinput, td, th {\n\t\t\t\t\t\t\t\tborder: 2px solid ${e} !important;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttd, th {\n\t\t\t\t\t\t\t\tpadding: .2em !important;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttable {\n\t\t\t\t\t\t\t\tborder-collapse: collapse !important;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t*:link,\n\t\t\t\t\t\t\t*:visited,\n\t\t\t\t\t\t\t*:hover {\n\t\t\t\t\t\t\t\tcolor: ${e} !important;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`;if(0===document.querySelectorAll("#cplus-styles-contrast").length){let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.setAttribute("id","cplus-styles-contrast"),e.innerHTML=s,t.appendChild(e)}else document.querySelector("#cplus-styles-contrast").innerHTML=s}}}customElements.define("app-color-contrast",ColorContrastComponent);const tmplCursorAspect=document.createElement("template");tmplCursorAspect.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="cursorAspect" data-icon="CursorSetting"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class CursorAspectComponent extends AbstractSetting{activesValues={values:"noModifications,big+black,huge+green",activeValue:0};constructor(){super(),this.setCallback(this.setCursor.bind(this)),this.appendChild(tmplCursorAspect.content.cloneNode(!0))}connectedCallback(){super.connectedCallback("cursorAspect")}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn.removeEventListener("changeSettingEvent",(()=>{}))}setCursor=t=>{if("noModifications"===t)document.querySelector("#cplus-styles-cursor")?.remove();else{let e=t.split("+")[1],n=`\n\t\t\t\t\t\t\t* {\n\t\t\t\t\t\t\t\tcursor: url('data:image/svg+xml;utf8,${"big"===t.split("+")[0]?`<svg width="56" height="56" viewbox="0 0 56 56" xmlns="http://www.w3.org/2000/svg"><path d="M2.1875 3.93386C2.1875 3.07793 3.19283 2.61758 3.84083 3.17679L35.3653 30.3817C36.039 30.9631 35.6748 32.0687 34.7875 32.1359L22.9084 33.0354C22.2046 33.0887 21.776 33.8346 22.0844 34.4695L29.2853 49.2945C29.5344 49.8073 29.3051 50.4242 28.7816 50.6498L22.336 53.4272C21.8383 53.6416 21.2604 53.4206 21.0328 52.9288L14.1035 37.9578C13.8313 37.3697 13.0802 37.1919 12.5732 37.5955L3.81035 44.572C3.15521 45.0936 2.1875 44.6271 2.1875 43.7897V3.93386Z" fill="${e}" stroke="black" stroke-width="5"/></svg>`:`<svg width="128" height="128" viewbox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><path d="M5 6.18386C5 5.32793 6.00533 4.86758 6.65333 5.42679L83.1778 71.4657C83.8515 72.0471 83.4873 73.1527 82.6 73.2199L50.4764 75.6523C49.7726 75.7056 49.344 76.4515 49.6524 77.0864L67.5257 113.883C67.7748 114.396 67.5455 115.013 67.0219 115.238L49.904 122.615C49.4063 122.829 48.8284 122.608 48.6008 122.116L31.5493 85.2757C31.2771 84.6875 30.5259 84.5097 30.0189 84.9134L6.62285 103.54C5.96772 104.062 5 103.595 5 102.758V6.18386Z" fill="${e}" stroke="black" stroke-width="10"/></svg>`}') 0 0, auto !important;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`;if(0===document.querySelectorAll("#cplus-styles-cursor").length){let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.setAttribute("id","cplus-styles-cursor"),e.innerHTML=n,t.appendChild(e)}else document.querySelector("#cplus-styles-cursor").innerHTML=n}}}customElements.define("app-cursor-aspect",CursorAspectComponent);const tmplFocusAspect=document.createElement("template");tmplFocusAspect.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="focusAspect" data-icon="Focus"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class FocusAspectComponent extends AbstractSetting{activesValues={values:"noModifications,big+blue,veryBig+red",activeValue:0};constructor(){super(),this.setCallback(this.setFocus.bind(this)),this.appendChild(tmplFocusAspect.content.cloneNode(!0))}connectedCallback(){super.connectedCallback("focusAspect"),this.settingBtn.addEventListener("changeSettingEvent",(t=>{this.setFocus(t.detail.value)}))}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn.removeEventListener("changeSettingEvent",(()=>{}))}setFocus=t=>{if("noModifications"===t)document.querySelector("#cplus-styles-focus")?.remove();else{let e="big"===t.split("+")[0]?"4px":"10px",n=`\n\t\t\t\t*:focus, *:focus-visible {\n\t\t\t\t\toutline: ${t.split("+")[1]} solid ${e} !important;\n\t\t\t\t}\n\t\t\t`;if(0===document.querySelectorAll("#cplus-styles-focus").length){let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.setAttribute("id","cplus-styles-focus"),e.innerHTML=n,t.appendChild(e)}else document.querySelector("#cplus-styles-focus").innerHTML=n}}}customElements.define("app-focus-aspect",FocusAspectComponent);const tmplFontFamily=document.createElement("template");tmplFontFamily.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="textFont" data-icon="Police"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class FontFamilyComponent extends AbstractSetting{pathService;path;activesValues={values:"noModifications,Accessible-DFA,Luciole",activeValue:0};fontDictionnary=[{name:"Accessible-DFA",folder:"accessibleDFA",files:[{name:"AccessibleDFA-Bold.woff2",style:"normal",weight:"700"},{name:"AccessibleDFA-Italic.woff2",style:"italic",weight:"400"},{name:"AccessibleDFA-Regular.woff2",style:"normal",weight:"400"}]},{name:"B612 Mono",folder:"B612",files:[{name:"B612Mono-Bold.woff2",style:"normal",weight:"700"},{name:"B612Mono-BoldItalic.woff2",style:"italic",weight:"700"},{name:"B612Mono-Italic.woff2",style:"italic",weight:"400"},{name:"B612Mono-Regular.woff2",style:"normal",weight:"400"}]},{name:"Comic Sans MS",folder:"comic",files:[{name:"comic-Sans-MS.woff2",style:"normal",weight:"400"}]},{name:"Lexand Deca",folder:"lexendDeca",files:[{name:"LexendDeca-Black.woff2",style:"normal",weight:"900"},{name:"LexendDeca-Bold.woff2",style:"normal",weight:"700"},{name:"LexendDeca-ExtraBold.woff2",style:"normal",weight:"800"},{name:"LexendDeca-ExtraLight.woff2",style:"normal",weight:"200"},{name:"LexendDeca-Light.woff2",style:"normal",weight:"300"},{name:"LexendDeca-Medium.woff2",style:"normal",weight:"500"},{name:"LexendDeca-Regular.woff2",style:"normal",weight:"400"},{name:"LexendDeca-SemiBold.woff2",style:"normal",weight:"600"},{name:"LexendDeca-Thin.woff2",style:"normal",weight:"100"}]},{name:"Luciole",folder:"luciole",files:[{name:"Luciole-Bold-Italic.woff2",style:"italic",weight:"700"},{name:"Luciole-Bold.woff2",style:"normal",weight:"700"},{name:"Luciole-Regular-Italic.woff2",style:"italic",weight:"400"},{name:"Luciole-Regular.woff2",style:"normal",weight:"400"}]},{name:"Sylexiad Sans",folder:"sylexiadSans",files:[{name:"SylexiadSansMedium-BoldItalic.woff2",style:"italic",weight:"700"},{name:"SylexiadSansMedium-Bold.woff2",style:"normal",weight:"700"},{name:"SylexiadSansMedium-Italic.woff2",style:"italic",weight:"400"},{name:"SylexiadSansMedium.woff2",style:"normal",weight:"400"},{name:"SylexiadSansSpacedMed-BoldItalic.woff2",style:"italic",weight:"700"},{name:"SylexiadSansSpacedMed-Bold.woff2",style:"normal",weight:"700"},{name:"SylexiadSansSpacedMed-Italic.woff2",style:"italic",weight:"400"},{name:"SylexiadSansSpacedMed.woff2",style:"normal",weight:"400"},{name:"SylexiadSansSpacedThin-BoldItalic.woff2",style:"italic",weight:"700"},{name:"SylexiadSansSpacedThin-Bold.woff2",style:"normal",weight:"700"},{name:"SylexiadSansSpacedThin-Italic.woff2",style:"italic",weight:"400"},{name:"SylexiadSansSpacedThin.woff2",style:"normal",weight:"400"},{name:"SylexiadSansThin-BoldItalic.woff2",style:"italic",weight:"700"},{name:"SylexiadSansThin-Bold.woff2",style:"normal",weight:"700"},{name:"SylexiadSansThin-Italic.woff2",style:"italic",weight:"400"},{name:"SylexiadSansThin.woff2",style:"normal",weight:"400"}]},{name:"Verdana",folder:"verdana",files:[{name:"Verdana-Bold-Italic.woff2",style:"italic",weight:"700"},{name:"Verdana-Bold.woff2",style:"normal",weight:"700"},{name:"Verdana-Italic.woff2",style:"italic",weight:"400"},{name:"Verdana.woff2",style:"normal",weight:"400"}]}];constructor(){super(),this.setCallback(this.setFontFamily.bind(this)),this.pathService=new PathService,this.path=this.pathService.path,this.appendChild(tmplFontFamily.content.cloneNode(!0));let t=document.head||document.getElementsByTagName("head")[0];if(0===document.querySelectorAll("#cplus-styles-fonts").length){let e=document.createElement("style");e.setAttribute("id","cplus-styles-fonts"),t.appendChild(e);const n=[];this.fontDictionnary.forEach((t=>{for(const e of t.files)n.push(`\n\t\t\t\t\t\t@font-face {\n\t\t\t\t\t\t\tfont-family:"${t.name}";\n\t\t\t\t\t\t\tsrc: local("${t.name}"), url("${this.path}assets/fonts/${t.folder}/${e.name}");\n\t\t\t\t\t\t\tfont-style: ${e.style}; font-weight: ${e.weight};\n\t\t\t\t\t\t\tfont-display: swap; }`)})),e.innerHTML=n.join("")}}connectedCallback(){super.connectedCallback("textFont")}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn.removeEventListener("changeSettingEvent",(()=>{}))}setFontFamily=t=>{document.body.style.fontFamily="noModifications"===t?null:t}}customElements.define("app-font-family",FontFamilyComponent);const tmplIncreaseTextSize=document.createElement("template");tmplIncreaseTextSize.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="textSize" data-icon="Text_Size"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class IncreaseTextSizeComponent extends AbstractSetting{activesValues={values:"noModifications,110%,130%",activeValue:0};constructor(){super(),this.setCallback(this.setFontSize.bind(this)),this.appendChild(tmplIncreaseTextSize.content.cloneNode(!0))}connectedCallback(){super.connectedCallback("textSize"),this.settingBtn.addEventListener("changeSettingEvent",(t=>{this.setFontSize(t.detail.value)}))}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn.removeEventListener("changeSettingEvent",(()=>{}))}setFontSize=t=>{document.body.style.fontSize="noModifications"===t?null:t}}customElements.define("app-increase-text-size",IncreaseTextSizeComponent);const tmplLinkStyle=document.createElement("template");tmplLinkStyle.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="linksStyle" data-icon="Links"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class LinkStyleComponent extends AbstractSetting{activesValues={values:"noModifications,lightblue+orange+lightgreen,yellow+orange+lightgreen",activeValue:0};constructor(){super(),this.setCallback(this.setLinkStyle.bind(this)),this.appendChild(tmplLinkStyle.content.cloneNode(!0))}connectedCallback(){super.connectedCallback("linkStyle")}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn?.removeEventListener("changeSettingEvent",(()=>{}))}setLinkStyle=t=>{if("noModifications"===t)document.querySelector("#cplus-styles-links")?.remove();else{let e=t.split("+")[0],n=t.split("+")[1],s=`\n\t\t\t\ta:link {\n\t\t\t\t\tcolor: ${e} !important;\n\t\t\t\t}\n\t\t\t\ta:visited {\n\t\t\t\t\tcolor: ${t.split("+")[2]} !important;\n\t\t\t\t}\n\t\t\t\ta:active, a:hover, a:focus {\n\t\t\t\t\tcolor: ${n} !important;\n\t\t\t\t}\n\t\t\t`;if(0===document.querySelectorAll("#cplus-styles-links").length){let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.setAttribute("id","cplus-styles-links"),e.innerHTML=s,t.appendChild(e)}else document.querySelector("#cplus-styles-links").innerHTML=s}}}customElements.define("app-link-style",LinkStyleComponent);const tmplMarginAlign=document.createElement("template");tmplMarginAlign.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="margin" data-icon="Text_Marge"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class MarginAlignComponent extends AbstractSetting{activesValues={values:"noModifications,alignLeft,margeList",activeValue:0};constructor(){super(),this.setCallback(this.setMargin.bind(this)),this.appendChild(tmplMarginAlign.content.cloneNode(!0))}connectedCallback(){super.connectedCallback("marginAlign")}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn.removeEventListener("changeSettingEvent",(()=>{}))}setMargin=t=>{("margeList"===t?document.querySelectorAll("ul, ol"):document.body.querySelectorAll("*")).forEach((e=>{const n=e;switch(t){case"alignLeft":n.style.textAlign="left";break;case"marginLeft":n.style.textAlign="left",n.style.marginLeft="40px";break;case"margeList":n.style.listStylePosition="initial",n.style.listStyleImage="none",n.style.listStyleType="decimal";break;default:n.style.textAlign=null,n.style.marginLeft=null,n.style.listStylePosition=null,n.style.listStyleImage=null,n.style.listStyleType=null}}))}}customElements.define("app-margin-align",MarginAlignComponent);const tmplReadingGuide=document.createElement("template");tmplReadingGuide.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="readingMask" data-icon="Reading_Ruler"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class ReadingGuideComponent extends AbstractSetting{topGuideElt=null;bottomGuideElt=null;readingGuideElt=null;guideType="";sizeGuide=40;activesValues={values:"noModifications,readingGuide,maskGuide",activeValue:0};classReadingGuide="\n\t\t#cplus-vertical-guide-elt {\n\t\t\tborder-left: 1px solid black;\n\t\t\theight: 100%;\n\t\t\tposition: fixed;\n\t\t\ttop: 0;\n\t\t}\n\t";classMaskGuide="\n\t\t#cplus-mask-guide--top-elt,\n\t\t#cplus-mask-guide--bottom-elt {\n\t\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\t\tposition: fixed;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t}\n\t\t#cplus-mask-guide--top-elt {\n\t\t\ttop: 0;\n\t\t}\n\t\t#cplus-mask-guide--bottom-elt {\n\t\t\tbottom: 0;\n\t\t}\n\t";constructor(){super(),this.setCallback(this.setReadingMaskGuide.bind(this)),this.appendChild(tmplReadingGuide.content.cloneNode(!0)),this.readingGuideElt=this.querySelector("#cplus-vertical-guide-elt"),this.topGuideElt=this.querySelector("#cplus-top-guide-elt"),this.bottomGuideElt=this.querySelector("#cplus-bottom-guide-elt")}connectedCallback(){super.connectedCallback("readingGuide")}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn?.removeEventListener("changeSettingEvent",(()=>{}))}setReadingMaskGuide=t=>{switch(t){case"readingGuide":this.resetGuide(),this.guideType="reading",this.setGuide();break;case"maskGuide":this.resetGuide(),this.guideType="mask",this.setGuide();break;default:this.resetGuide()}};setGuide=()=>{let t="";if("reading"===this.guideType?t=this.classReadingGuide:"mask"===this.guideType&&(t=this.classMaskGuide),0===document.querySelectorAll("#cplus-reading-guide").length){let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("id","cplus-reading-guide"),n.innerHTML=t,e.appendChild(n)}if("reading"===this.guideType){const t=document.createElement("div");t.setAttribute("id","cplus-vertical-guide-elt"),document.body.appendChild(t)}else if("mask"===this.guideType){const t=document.createElement("div"),e=document.createElement("div");t.setAttribute("id","cplus-mask-guide--top-elt"),e.setAttribute("id","cplus-mask-guide--bottom-elt"),document.body.appendChild(t),document.body.appendChild(e)}document.addEventListener("mousemove",(t=>{"reading"===this.guideType?document.querySelector("#cplus-vertical-guide-elt").style.left=`${t.x+2}px`:"mask"===this.guideType&&(document.querySelector("#cplus-mask-guide--top-elt").style.height=t.y-this.sizeGuide+"px",document.querySelector("#cplus-mask-guide--bottom-elt").style.height=window.innerHeight-t.y-this.sizeGuide+"px"),t.stopPropagation()}))};resetGuide=()=>{this.guideType="",document.querySelector("#cplus-reading-guide")?.remove(),document.querySelector("#cplus-vertical-guide-elt")?.remove(),document.querySelector("#cplus-mask-guide--top-elt")?.remove(),document.querySelector("#cplus-mask-guide--bottom-elt")?.remove()}}customElements.define("app-reading-guide",ReadingGuideComponent);const tmplScroll=document.createElement("template");tmplScroll.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="lift" data-icon="Scroll"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class ScrollComponent extends AbstractSetting{btnScrollUp=null;btnScrollDown=null;btnState="";scrollSteps=100;activesValues={values:"noModifications,bigScroll,scrollOnMouseover",activeValue:0};constructor(){super(),this.setCallback(this.setScroll.bind(this)),this.appendChild(tmplScroll.content.cloneNode(!0))}connectedCallback(){super.connectedCallback("scroll"),this.setScrollClass()}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn?.removeEventListener("changeSettingEvent",(()=>{})),this.btnScrollUp?.removeEventListener("click",(()=>{})),this.btnScrollUp?.removeEventListener("mouseover",(()=>{})),this.btnScrollDown?.removeEventListener("click",(()=>{})),this.btnScrollDown?.removeEventListener("mouseover",(()=>{}))}setScroll=t=>{switch(t){case"bigScroll":this.resetScroll(),this.setBigScroll();break;case"scrollOnClick":this.resetScroll(),this.btnState="click",this.setBtnScroll();break;case"scrollOnMouseover":this.resetScroll(),this.btnState="mouseover",this.setBtnScroll();break;default:this.resetScroll()}};setScrollClass=()=>{if(0===document.querySelectorAll("#cplus-scroll").length){let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.setAttribute("id","cplus-scroll"),e.innerHTML="\n\t\t\t.cplus-big-scroll::-webkit-scrollbar, .cplus-big-scroll *::-webkit-scrollbar {\n\t\t\t\t\twidth: 2rem;\n\t\t\t}\n\t\t\t.cplus-big-scroll::-webkit-scrollbar-thumb, .cplus-big-scroll *::-webkit-scrollbar-thumb {\n\t\t\t\tbackground-color: lightgrey;\n\t\t\t\tborder-radius: 1.75rem\n\t\t\t\twidth: 2rem;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t.cplus-big-scroll::-webkit-scrollbar-thumb:hover, .cplus-big-scroll *::-webkit-scrollbar-thumb:hover {\n\t\t\t\tbackground-color: grey;\n\t\t\t}\n\n\t\t\t#cplus-container-scroll-buttons {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 1rem;\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 1rem;\n\t\t\t\tright: 1rem;\n\t\t\t\tz-index: 2147483647;\n\t\t\t}\n\t\t",t.appendChild(e)}};setBigScroll=()=>{document.body.classList.add("cplus-big-scroll")};setBtnScroll=()=>{const t=document.createElement("div");t.setAttribute("id","cplus-container-scroll-buttons");let e=[];e.push('<button id="cplus-scroll-up" class="btn btn-primary">Monter</button>','<button id="cplus-scroll-down" class="btn btn-primary">Descendre</button>'),t.innerHTML=e.join(""),document.body.appendChild(t),this.btnScrollUp=document.querySelector("#cplus-scroll-up"),this.btnScrollDown=document.querySelector("#cplus-scroll-down"),this.btnScrollUp.addEventListener(this.btnState,(t=>{window.scrollBy(0,-this.scrollSteps)})),this.btnScrollDown.addEventListener(this.btnState,(t=>{window.scrollBy(0,this.scrollSteps)}))};resetScroll=()=>{this.btnState="",document.body.classList.remove("cplus-big-scroll"),document.querySelector("#cplus-container-scroll-buttons")?.remove()}}customElements.define("app-scroll",ScrollComponent);const tmplSpacingText=document.createElement("template");tmplSpacingText.innerHTML='\n<div class="d-flex align-items-center gap-3">\n\t<app-btn-setting data-label="spacingText" data-icon="Text_Espacement_Ligne"></app-btn-setting>\n\t<app-btn-modal class="d-none"></app-btn-modal>\n</div>\n';class TextSpacingComponent extends AbstractSetting{activesValues={values:"noModifications,spacingTextLabelSmall,spacingTextLabelBig",activeValue:0};constructor(){super(),this.setCallback(this.setSpacingText.bind(this)),this.appendChild(tmplSpacingText.content.cloneNode(!0))}connectedCallback(){super.connectedCallback("spacingText")}disconnectedCallback(){super.disconnectedCallback(),this.settingBtn.removeEventListener("changeSettingEvent",(()=>{}))}setSpacingText=t=>{const e=[{name:"spacingTextLabelSmall",wordSpacing:".10em",lineHeight:"2em",letterSpacing:".0625em"},{name:"spacingTextLabelBig",wordSpacing:".25em",lineHeight:"2.5em",letterSpacing:".25em"},{name:"spacingTextLabelHuge",wordSpacing:".5em",lineHeight:"3em",letterSpacing:".5em"}];if("noModifications"===t)document.querySelector("#cplus-styles-spacing-text")?.remove();else{let n=e?.find((e=>e.name===t)),s=`\n\t\t\t\t* {\n\t\t\t\t\tword-spacing: ${n.wordSpacing} !important;\n\t\t\t\t\tline-height: ${n.lineHeight} !important;\n\t\t\t\t\tletter-spacing: ${n.letterSpacing} !important;\n\t\t\t\t}\n\t\t\t`;if(0===document.querySelectorAll("#cplus-styles-spacing-text").length){let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.setAttribute("id","cplus-styles-spacing-text"),e.innerHTML=s,t.appendChild(e)}else document.querySelector("#cplus-styles-spacing-text").innerHTML=s}}}customElements.define("app-spacing-text",TextSpacingComponent);const tmplTextTransform=document.createElement("template");tmplTextTransform.innerHTML='\n<style>\n\t\tapp-text-transform {\n\t\t\t\tmargin-bottom: 1rem;\n\t\t}\n</style>\n<button id="normal-btn" data-i18n="default"></button>\n<button id="first-letter-btn" data-i18n="firstLetter"></button>\n<button id="lowercase-btn" data-i18n="lowercase"></button>\n<button id="uppercase-btn" data-i18n="uppercase"></button>\n';class TextTransformComponent extends HTMLElement{normalBtn=null;firstLetterBtn=null;lowercaseBtn=null;uppercaseBtn=null;constructor(){super(),this.appendChild(tmplTextTransform.content.cloneNode(!0)),this.normalBtn=this.querySelector("#normal-btn"),this.firstLetterBtn=this.querySelector("#first-letter-btn"),this.lowercaseBtn=this.querySelector("#lowercase-btn"),this.uppercaseBtn=this.querySelector("#uppercase-btn")}connectedCallback(){const t=document.body;this.normalBtn?.addEventListener("click",(()=>{t.style.textTransform=""})),this.firstLetterBtn?.addEventListener("click",(()=>{t.style.textTransform="capitalize"})),this.lowercaseBtn?.addEventListener("click",(()=>{t.style.textTransform="lowercase"})),this.uppercaseBtn?.addEventListener("click",(()=>{t.style.textTransform="uppercase"}))}disconnectedCallback(){this.normalBtn?.removeEventListener("click",(()=>{})),this.firstLetterBtn?.removeEventListener("click",(()=>{})),this.lowercaseBtn?.removeEventListener("click",(()=>{})),this.uppercaseBtn?.removeEventListener("click",(()=>{}))}}customElements.define("app-text-transform",TextTransformComponent);const btnModalLayout=document.createElement("template");btnModalLayout.innerHTML='<button type="button" class="btn btn-primary pe-4 sc-btn-modal"></button>';class BtnModalComponent extends HTMLElement{static observedAttributes=["data-value","data-label"];modalBtn=null;value=null;constructor(){super(),this.value=this.dataset?.value||this.value,this.appendChild(btnModalLayout.content.cloneNode(!0))}connectedCallback(){this.modalBtn=this.querySelector("button"),this.modalBtn?.addEventListener("click",(()=>{let t=new CustomEvent("clickModalEvent",{bubbles:!0});this.modalBtn?.dispatchEvent(t)}))}disconnectedCallback(){this.modalBtn?.removeEventListener("click",(()=>{}))}attributeChangedCallback(t,e,n){"data-value"===t&&(this.modalBtn.innerText=n),"data-label"===t&&this.setA11yName(n)}setA11yName=t=>{let e=document.createElement("span");e.classList.add("visually-hidden"),e.innerText=t,this.modalBtn?.appendChild(e),this.modalBtn.setAttribute("title",t)}}customElements.define("app-btn-modal",BtnModalComponent);const btnSettingLayout=document.createElement("template");btnSettingLayout.innerHTML='\n\t<button class="sc-btn-setting btn btn-primary flex-column justify-content-between w-100 px-1">\n\t\t<div class="d-flex flex-column">\n\t\t\t<span></span>\n\t\t\t<app-icon></app-icon>\n\t\t</div>\n\t\t<ul class="d-flex gap-1 align-items-center mt-2 mb-0 list-unstyled"></ul>\n\t</button>\n';class BtnSettingComponent extends HTMLElement{static observedAttributes=["data-values","data-active-value","data-label","data-icon"];settingBtn=null;btnContentSlots=null;icon=null;index;value;label="";slot="";separator=",";settingsList=[];i18nService;constructor(){super(),this.i18nService=new I18nService,this.appendChild(btnSettingLayout.content.cloneNode(!0))}connectedCallback(){this.settingBtn=this.querySelector("button"),this.btnContentSlots=this.querySelector("ul"),this.settingBtn?.addEventListener("click",(()=>{this.setIndex();let t=new CustomEvent("changeSettingEvent",{bubbles:!0,detail:{value:this.value,index:this.index}});this.settingBtn?.dispatchEvent(t)}))}disconnectedCallback(){this.settingBtn?.removeEventListener("click",(()=>{}))}attributeChangedCallback(t,e,n){"data-values"===t&&(this.settingsList=n.split(this.separator)),"data-active-value"===t&&this.setIndex(Number(n)),"data-label"===t&&(this.label=n,this.querySelector("span").innerText=this.i18nService.getMessage(n)),"data-icon"===t&&(this.icon=this.querySelector("app-icon"),this.icon?.setAttribute("data-name",n))}setIndex=t=>{if(t?.toString())this.index=t;else{let t=this.index+1;this.index=t>=this.settingsList.length?0:t}0===this.index?this.settingBtn?.classList.add("sc-btn-setting--default"):this.settingBtn?.classList.remove("sc-btn-setting--default"),this.calculateList()};calculateList=()=>{this.slot="",this.settingsList.forEach(((t,e)=>{let n='<li class="bg-white rounded-circle sc-btn-setting__btn-slot"></li>';e===this.index&&(n='<li class="border border-4 border-black rounded-circle"></li>',this.value=t),this.slot=`${this.slot}${n}`})),this.btnContentSlots.innerHTML=this.slot}}customElements.define("app-btn-setting",BtnSettingComponent);const headerLayout=document.createElement("template");headerLayout.innerHTML='\n\t<header class="d-flex justify-content-between bg-secondary px-3 py-2">\n\t\t<div class="d-flex align-items-center">\n\t\t\t<button id="prev-toolbar" type="button" class="btn btn-icon btn-inverse btn-secondary" data-i18n-title="previous">\n\t\t\t\t<span class="visually-hidden" data-i18n="previous"></span>\n\t\t\t\t<app-icon data-name="Form_Chevron_left"></app-icon>\n\t\t\t</button>\n\n\t\t\t<span id="title-page-block" class="d-flex gap-1 align-items-center fs-6 fw-bold text-white ms-2">\n\t\t\t\t<app-icon id="title-page-icon" data-size="1.5rem" data-name="Eye" class="border-end border-white pe-1"></app-icon>\n\t\t\t\t<app-icon data-size="1.5rem" data-name="Settings"></app-icon>\n\t\t\t\t<span id="title-page"></span>\n\t\t\t</span>\n\n\t\t\t<span id="title-app" class="d-flex gap-1 align-items-center fs-3 fw-bold text-white">\n\t\t\t\t<app-icon data-size="2rem" data-name="Accessibility"></app-icon>\n\t\t\t\t<span data-i18n="mainTitle"></span>\n\t\t\t\t<span class="text-primary">+</span>\n\t\t\t</span>\n\t\t</div>\n\t\t<button id="close-toolbar" type="button" class="btn btn-icon btn-inverse btn-primary" data-i18n-title="close">\n\t\t\t\t<span class="visually-hidden" data-i18n="close"></span>\n\t\t\t\t<app-icon data-name="Reduire_C+"></app-icon>\n\t\t</button>\n\t</header>\n';class HeaderComponent extends HTMLElement{static observedAttributes=["data-display","data-title-page","data-prev-route","data-selected-mode"];closeBtn=null;prevBtn=null;titleApp=null;titlePageBlock=null;titlePage=null;titlePageIcon=null;display="primary";i18nService;routeService;prevRoute="";constructor(){super(),this.i18nService=new I18nService,this.routeService=new RouteService,this.appendChild(headerLayout.content.cloneNode(!0))}connectedCallback(){this.closeBtn=this.querySelector("#close-toolbar"),this.prevBtn=this.querySelector("#prev-toolbar"),this.titleApp=this.querySelector("#title-app"),this.titlePageBlock=this.querySelector("#title-page-block"),this.titlePage=this.querySelector("#title-page"),this.titlePageIcon=this.querySelector("#title-page-icon"),this.displayMode(this.display),this.closeBtn?.addEventListener("click",(()=>{let t=new CustomEvent("closeEvent",{bubbles:!0});this.closeBtn?.dispatchEvent(t)})),this.prevBtn?.addEventListener("click",(()=>{let t=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:this.prevRoute,isPrev:!0}});this.prevBtn?.dispatchEvent(t)}))}disconnectedCallback(){this.closeBtn?.removeEventListener("click",(()=>{})),this.prevBtn?.removeEventListener("click",(()=>{}))}attributeChangedCallback(t,e,n){"data-display"===t&&this.displayMode(n),"data-title-page"===t&&(this.titlePage.innerText=this.i18nService.getMessage(n)),"data-prev-route"===t&&(this.prevRoute=n),"data-selected-mode"===t&&this.titlePageIcon?.setAttribute("data-name",n)}displayMode=t=>{this.prevBtn?.classList.toggle("d-none","primary"===t),this.titlePageBlock?.classList.toggle("d-none","primary"===t),this.titleApp?.classList.toggle("d-none","secondary"===t)}}customElements.define("app-header",HeaderComponent);const iconLayout=document.createElement("template");iconLayout.innerHTML='<svg fill="currentColor" aria-hidden="true" focusable="false"><use/></svg>';class IconComponent extends HTMLElement{static observedAttributes=["data-name"];sprite="";iconService;icon="";size="1.25rem";constructor(){super(),this.iconService=new iconsService,this.sprite=this.iconService.path,this.icon=this.dataset?.name||this.icon,this.size=this.dataset?.size||this.size,this.appendChild(iconLayout.content.cloneNode(!0))}connectedCallback(){let t=this.querySelector("svg");t?.setAttribute("width",this.size),t?.setAttribute("height",this.size);let e=this.querySelector("use");e?.setAttribute("href",`${this.sprite}#ic_${this.icon}`)}attributeChangedCallback(t,e,n){let s=this.querySelector("use");"data-name"===t&&s?.setAttribute("href",`${this.sprite}#ic_${n}`)}}customElements.define("app-icon",IconComponent);const selectModeLayout=document.createElement("template");selectModeLayout.innerHTML='\n\t<input type="radio" name="modes" class="sc-select-mode__input">\n\t<label class="d-flex flex-column align-items-start gap-1 p-1 sc-select-mode__label btn btn-tertiary">\n\t\t<div class="d-flex align-items-center gap-2">\n\t\t\t<app-icon data-size="2rem"></app-icon>\n\t\t\t<span class="fs-5 text"></span>\n\t\t</div>\n\t\t<span class="fs-6 fw-normal m-0"></span>\n\t</label>\n';class SelectModeComponent extends HTMLElement{inputElement=null;iconElement=null;labelElement=null;textElement=null;descriptionElement=null;label="";checked=!1;i18nService;constructor(){super(),this.i18nService=new I18nService,this.label=this.dataset?.label||this.label,this.checked="true"===this.dataset?.checked||this.checked,this.appendChild(selectModeLayout.content.cloneNode(!0))}connectedCallback(){this.inputElement=this.querySelector("input"),this.labelElement=this.querySelector("label"),this.iconElement=this.querySelector("app-icon"),this.textElement=this.querySelector("div span"),this.descriptionElement=this.querySelector("label > span"),this.inputElement.id=this.normalizeString(this.label),this.inputElement.value=this.label,this.inputElement.checked=this.checked,this.labelElement?.setAttribute("for",this.normalizeString(this.label)),this.iconElement?.setAttribute("data-name",this.label),this.textElement.innerText=this.i18nService.getMessage(`${this.label}Name`),this.descriptionElement.innerText=this.i18nService.getMessage(`${this.label}Description`)}normalizeString=t=>t?.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f\s]/g,"").split("-").join("")}customElements.define("app-select-mode",SelectModeComponent);const editSettingLayout=document.createElement("template");editSettingLayout.innerHTML="";class EditSettingComponent extends HTMLElement{constructor(){super(),this.appendChild(editSettingLayout.content.cloneNode(!0))}}customElements.define("app-edit-setting",EditSettingComponent);const homeLayout=document.createElement("template");homeLayout.innerHTML='\n<section class="bg-dark p-3 d-flex align-items-center justify-content-between">\n    <div class="d-flex gap-2">\n        <div class="sc-home__icon-mode bg-body rounded-circle">\n\t\t\t\t\t\t<app-icon data-size="5rem"></app-icon>\n        </div>\n        <div class="d-flex justify-content-center flex-column">\n            <span class="text-white" data-i18n="profile"></span>\n            <span id="mode-name" class="fs-4 fw-bold text-primary"></span>\n        </div>\n    </div>\n    <div class="d-grid gap-3 d-md-block">\n        <button id="settings-btn" type="button" class="btn btn-icon btn-inverse btn-secondary" data-i18n-title="openSettingsMode">\n            <span class="visually-hidden" data-i18n="openSettingsMode"></span>\n\t\t\t\t\t\t<app-icon data-name="Settings"></app-icon>\n        </button>\n        <button type="button" class="btn btn-icon btn-inverse btn-secondary" data-i18n-title="pause">\n            <span class="visually-hidden" data-i18n="pause"></span>\n\t\t\t\t\t\t<app-icon data-name="Pause"></app-icon>\n        </button>\n    </div>\n</section>\n\n<section class="sc-home__settings gap-3 p-3">\n\t<app-mode></app-mode>\n\t<div class="d-grid">\n\t\t<button id="change-mode-btn" class="btn btn-secondary" type="button" data-i18n="otherModes"></button>\n\t</div>\n</section>\n';class HomeComponent extends HTMLElement{static observedAttributes=["data-mode","data-custom"];changeModeBtn=null;settingsBtn=null;modeName=null;modeIcon=null;currentMode=null;i18nService;routeService;settings=[];constructor(){super(),this.i18nService=new I18nService,this.routeService=new RouteService,this.appendChild(homeLayout.content.cloneNode(!0))}connectedCallback(){this.changeModeBtn=this.querySelector("#change-mode-btn"),this.settingsBtn=this.querySelector("#settings-btn"),this.modeName=this.querySelector("#mode-name"),this.modeIcon=this.querySelector("app-icon"),this.currentMode=this.querySelector("app-mode"),this.changeModeBtn?.addEventListener("click",(()=>{let t=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:this.routeService.PAGE_MODES}});this.changeModeBtn?.dispatchEvent(t)})),this.settingsBtn?.addEventListener("click",(()=>{let t=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:this.routeService.PAGE_SETTINGS}});this.settingsBtn?.dispatchEvent(t)}))}disconnectedCallback(){this.changeModeBtn?.removeEventListener("click",(()=>{})),this.settingsBtn?.removeEventListener("click",(()=>{}))}attributeChangedCallback(t,e,n){if("data-mode"===t&&(this.modeName.innerText=this.i18nService.getMessage(`${Object.entries(JSON.parse(n))[0][0]}Name`),this.currentMode.setAttribute("data-settings",JSON.stringify(Object.entries(JSON.parse(n))[0][1])),this.modeIcon?.setAttribute("data-name",Object.entries(JSON.parse(n))[0][0])),"data-custom"===t){const t=this.modeName.innerText;this.modeName.innerText="true"===n?`${t}*`:`${t}`}}}customElements.define("app-home",HomeComponent);const tmplMode=document.createElement("template");tmplMode.innerHTML='\n<div id="mode-content" class="sc-mode__setting-grid gap-2">\n\t<app-font-family class="sc-mode__setting"></app-font-family>\n\t<app-increase-text-size class="sc-mode__setting"></app-increase-text-size>\n\t<app-spacing-text class="sc-mode__setting"></app-spacing-text>\n\t<app-reading-guide class="sc-mode__setting"></app-reading-guide>\n\t<app-margin-align class="sc-mode__setting"></app-margin-align>\n\t<app-focus-aspect class="sc-mode__setting"></app-focus-aspect>\n\t<app-color-contrast class="sc-mode__setting"></app-color-contrast>\n\t<app-cursor-aspect class="sc-mode__setting"></app-cursor-aspect>\n\t<app-scroll class="sc-mode__setting"></app-scroll>\n\t<app-link-style class="sc-mode__setting"></app-link-style>\n</div>\n';class ModeComponent extends HTMLElement{static observedAttributes=["data-settings"];modeContent=null;settingsDictionnary=[{name:"textSize",element:"app-increase-text-size"},{name:"textFont",element:"app-font-family"},{name:"spacingText",element:"app-spacing-text"},{name:"readingGuide",element:"app-reading-guide"},{name:"marginAlign",element:"app-margin-align"},{name:"focusAspect",element:"app-focus-aspect"},{name:"colorContrast",element:"app-color-contrast"},{name:"cursorAspect",element:"app-cursor-aspect"},{name:"scroll",element:"app-scroll"},{name:"linkStyle",element:"app-link-style"}];constructor(){super(),this.appendChild(tmplMode.content.cloneNode(!0))}connectedCallback(){this.modeContent=this.querySelector("#mode-content")}attributeChangedCallback(t,e,n){"data-settings"===t&&this.displaySettings(JSON.parse(n))}displaySettings=t=>{this.querySelectorAll(".sc-mode__setting").forEach((t=>{t.classList.add("d-none")})),t.forEach((t=>{let e=this.settingsDictionnary.find((e=>e.name===Object.keys(t)[0])),n=this.querySelector(e?.element);n.setAttribute("data-values",JSON.stringify(Object.entries(t)[0][1])),n?.classList.remove("d-none")}))}}customElements.define("app-mode",ModeComponent);const modesLayout=document.createElement("template");modesLayout.innerHTML='\n<section class="p-3">\n\t<fieldset class="d-grid gap-2 mb-4">\n\t\t<legend class="fs-6 fw-normal" data-i18n="chooseModeAndValidate"></legend>\n\t\t<div id="select-mode-zone" class="d-grid gap-1">\n\t\t</div>\n\t</fieldset>\n\n\t<div class="d-grid">\n\t\t<button id="select-mode-btn" class="btn btn-primary" type="button" data-i18n="validateThisMode"></button>\n\t</div>\n</section>\n';class ModesComponent extends HTMLElement{static observedAttributes=["data-list-mode"];selectModeBtn=null;routeService;localStorageService;selectModeZone=null;constructor(){super(),this.routeService=new RouteService,this.localStorageService=new LocalStorageService,this.appendChild(modesLayout.content.cloneNode(!0))}connectedCallback(){this.selectModeBtn=this.querySelector("#select-mode-btn"),this.selectModeZone=this.querySelector("#select-mode-zone"),this.selectModeBtn?.addEventListener("click",(()=>{let t=new CustomEvent("changeRoute",{bubbles:!0,detail:{route:this.routeService.PAGE_HOME,isPrev:!0}});this.localStorageService.getItem("modeOfUse").then((t=>{let e=t;e.selectedMode=this.getSelectedMode(),this.localStorageService.setItem("modeOfUse",e)})),this.selectModeBtn?.dispatchEvent(t)}))}disconnectedCallback(){this.selectModeBtn?.removeEventListener("click",(()=>{}))}attributeChangedCallback(t,e,n){"data-list-mode"===t&&this.displayListMode(JSON.parse(n))}displayListMode=t=>{const e=t.modes,n=t.selectedMode;let s="";e.forEach((t=>{let e=Object.entries(t)[0][0]===n,i=`<app-select-mode data-label="${Object.entries(t)[0][0]}" data-checked="${e}"></app-select-mode>`;s+=i})),this.selectModeZone.innerHTML=s};getSelectedMode=()=>this.querySelector("input:checked").value}customElements.define("app-modes",ModesComponent);const settingsLayout=document.createElement("template");settingsLayout.innerHTML='\n<section class="accordion mb-2">\n\t<app-text class="c-settings__category accordion-item"></app-text>\n\t<app-layout class="c-settings__category accordion-item"></app-layout>\n\t<app-picture-video class="c-settings__category accordion-item"></app-picture-video>\n\t<app-sound class="c-settings__category accordion-item"></app-sound>\n\t<app-pointer class="c-settings__category accordion-item"></app-pointer>\n\t<app-navigation class="c-settings__category accordion-item"></app-navigation>\n</section>\n';class SettingsComponent extends HTMLElement{static observedAttributes=["data-mode"];constructor(){super(),this.appendChild(settingsLayout.content.cloneNode(!0))}attributeChangedCallback(t,e,n){if("data-mode"===t){let t=this.querySelectorAll(".c-settings__category");const e=Object.entries(JSON.parse(n))[0][1];t.forEach((t=>{t.setAttribute("data-settings",JSON.stringify(e))}))}}}customElements.define("app-settings",SettingsComponent);class AbstractCategory extends HTMLElement{static observedAttributes=["data-settings"];btnAccordion=null;accordionContainer=null;settingsContainer=null;btnMoreSettings=null;settingsDictionnary=[];settingsElements=[];i18nService;CLASS_NAME_SHOW="show";CLASS_NAME_COLLAPSED="collapsed";_triggerArray=[];constructor(t){super(),this.i18nService=new I18nService,this.settingsDictionnary=t}connectedCallback(){this.btnAccordion=this.querySelector("button.accordion-button"),this.accordionContainer=this.querySelector("div.accordion-collapse"),this.settingsContainer=this.querySelector(".c-category__settings-container"),this.btnMoreSettings=this.querySelector(".c-category__btn-more"),this._triggerArray.push(this.btnAccordion),this.btnAccordion?.addEventListener("click",(()=>{this.addAriaAndCollapsedClass(this._triggerArray,this.isShown())})),this.btnMoreSettings?.addEventListener("click",(()=>{this.displayOrHideOthersSettings()}))}disconnectedCallback(){this.btnAccordion?.removeEventListener("click",(()=>{})),this.btnMoreSettings?.removeEventListener("click",(()=>{}))}attributeChangedCallback(t,e,n){"data-settings"===t&&this.displaySettings(JSON.parse(n))}isShown=(t=this.accordionContainer)=>t.classList.contains(this.CLASS_NAME_SHOW);addAriaAndCollapsedClass=(t,e)=>{if(t.length)for(const n of t)this.accordionContainer?.classList.toggle(this.CLASS_NAME_SHOW,!e),n?.classList.toggle(this.CLASS_NAME_COLLAPSED,!e),n?.setAttribute("aria-expanded",String(e))};displaySettings=t=>{this.btnMoreSettings?.classList.add("d-none"),this.settingsElements.forEach((t=>{t.classList.add("d-none"),t.removeAttribute("data-default-setting")}));let e=0;t.forEach((t=>{let n=this.settingsDictionnary.find((e=>e.name===Object.keys(t)[0])),s=this.querySelector(n?.element);s?.setAttribute("data-values",JSON.stringify(Object.entries(t)[0][1])),s?.setAttribute("data-default-setting","true"),s?.classList.remove("d-none"),n&&e++})),e!==this.settingsDictionnary.length&&this.btnMoreSettings?.classList.remove("d-none")};displayOrHideOthersSettings=()=>{this.settingsElements.forEach((t=>{t.hasAttribute("data-default-setting")||(t.classList.contains("d-none")?this.btnMoreSettings.innerText=this.i18nService.getMessage("lessSettings"):this.btnMoreSettings.innerText=this.i18nService.getMessage("moreSettings"),t.classList.toggle("d-none"))}))}}const tmplLayout=document.createElement("template");tmplLayout.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-layout">\n\t\t\t<app-icon data-name="Agencement" data-size="2rem"></app-icon>\n\t\t\t<span data-i18n="layout"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-layout">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="c-category__settings-container d-flex flex-column gap-2 mb-3">\n\t\t\t\t<app-margin-align class="c-layout__setting" data-can-edit="true"></app-margin-align>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class LayoutComponent extends AbstractCategory{constructor(){super([{name:"marginAlign",element:"app-margin-align"}]),this.appendChild(tmplLayout.content.cloneNode(!0))}connectedCallback(){this.settingsElements=[...this.querySelectorAll(".c-layout__setting")],super.connectedCallback()}}customElements.define("app-layout",LayoutComponent);const tmplNavigation=document.createElement("template");tmplNavigation.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-navigation">\n\t\t\t<app-icon data-name="Nav" data-size="2rem"></app-icon>\n\t\t\t<span data-i18n="navigation"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-navigation">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="c-category__settings-container d-flex flex-column gap-2 mb-3">\n\t\t\t\t<app-focus-aspect class="c-navigation__setting" data-can-edit="true"></app-focus-aspect>\n\t\t\t\t<app-scroll class="c-navigation__setting" data-can-edit="true"></app-scroll>\n\t\t\t\t<app-link-style class="c-navigation__setting" data-can-edit="true"></app-link-style>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class NavigationComponent extends AbstractCategory{constructor(){super([{name:"focusAspect",element:"app-focus-aspect"},{name:"scroll",element:"app-scroll"},{name:"linkStyle",element:"app-link-style"}]),this.appendChild(tmplNavigation.content.cloneNode(!0))}connectedCallback(){this.settingsElements=[...this.querySelectorAll(".c-navigation__setting")],super.connectedCallback()}}customElements.define("app-navigation",NavigationComponent);const tmplPictureVideo=document.createElement("template");tmplPictureVideo.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-picture-video">\n\t\t\t<app-icon data-name="Photo_Video" data-size="2rem"></app-icon>\n\t\t\t<span data-i18n="medias"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-picture-video">\n\t\t<div class="accordion-body px-3">\n\t\t</div>\n\t</div>\n';class PictureVideoComponent extends AbstractCategory{constructor(){super([]),this.appendChild(tmplPictureVideo.content.cloneNode(!0))}}customElements.define("app-picture-video",PictureVideoComponent);const tmplPointer=document.createElement("template");tmplPointer.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-pointer">\n\t\t\t<app-icon data-name="Pointeur" data-size="2rem"></app-icon>\n\t\t\t<span data-i18n="pointer"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-pointer">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="c-category__settings-container d-flex flex-column gap-2 mb-3">\n\t\t\t\t<app-cursor-aspect class="c-pointer__setting" data-can-edit="true"></app-cursor-aspect>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class PointerComponent extends AbstractCategory{constructor(){super([{name:"cursorAspect",element:"app-cursor-aspect"}]),this.appendChild(tmplPointer.content.cloneNode(!0))}connectedCallback(){this.settingsElements=[...this.querySelectorAll(".c-pointer__setting")],super.connectedCallback()}}customElements.define("app-pointer",PointerComponent);const tmplSound=document.createElement("template");tmplSound.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-sound">\n\t\t\t<app-icon data-name="Audio" data-size="2rem"></app-icon>\n\t\t\t<span data-i18n="audio"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-sound">\n\t\t<div class="accordion-body px-3">\n\t\t</div>\n\t</div>\n';class SoundComponent extends AbstractCategory{constructor(){super([]),this.appendChild(tmplSound.content.cloneNode(!0))}}customElements.define("app-sound",SoundComponent);const tmplText=document.createElement("template");tmplText.innerHTML='\n\t<div class="accordion-header">\n\t\t<button class="accordion-button gap-2 fs-4 px-3" type="button" aria-expanded="false" aria-controls="category-text">\n\t\t\t<app-icon data-name="Text" data-size="2rem"></app-icon>\n\t\t\t<span data-i18n="text"></span>\n\t\t</button>\n\t</div>\n\t<div class="accordion-collapse collapse" id="category-text">\n\t\t<div class="accordion-body px-3">\n\t\t\t<div class="c-category__settings-container d-flex flex-column gap-2 mb-3">\n\t\t\t\t<app-font-family class="c-text__setting" data-can-edit="true"></app-font-family>\n\t\t\t\t<app-increase-text-size class="c-text__setting" data-can-edit="true"></app-increase-text-size>\n\t\t\t\t<app-color-contrast class="c-text__setting" data-can-edit="true"></app-color-contrast>\n\t\t\t\t<app-reading-guide class="c-text__setting" data-can-edit="true"></app-reading-guide>\n\t\t\t\t<app-spacing-text class="c-text__setting" data-can-edit="true"></app-spacing-text>\n\t\t\t</div>\n\t\t\t<button class="c-category__btn-more btn btn-tertiary" type="button" data-i18n="moreSettings"></button>\n\t\t</div>\n\t</div>\n';class TextComponent extends AbstractCategory{settingsElements=[];constructor(){super([{name:"textSize",element:"app-increase-text-size"},{name:"textFont",element:"app-font-family"},{name:"colorContrast",element:"app-color-contrast"},{name:"readingGuide",element:"app-reading-guide"},{name:"spacingText",element:"app-spacing-text"}]),this.appendChild(tmplText.content.cloneNode(!0))}connectedCallback(){this.settingsElements=[...this.querySelectorAll(".c-text__setting")],super.connectedCallback()}}customElements.define("app-text",TextComponent);const tmplToolbar=document.createElement("template");tmplToolbar.innerHTML='\n<app-header id="header"></app-header>\n\n<app-home class="d-none"></app-home>\n<app-modes class="d-none"></app-modes>\n<app-settings class="d-none"></app-settings>\n<app-edit-setting class="d-none"></app-edit-setting>\n';class ToolbarComponent extends HTMLElement{header=null;home=null;modes=null;settings=null;routeService;filesService;localStorageService;historyRoute=[];json="";defaultJson="";constructor(){super(),this.routeService=new RouteService,this.filesService=new FilesService,this.localStorageService=new LocalStorageService,this.appendChild(tmplToolbar.content.cloneNode(!0))}connectedCallback(){this.header=this.querySelector("#header"),this.home=this.querySelector("app-home"),this.modes=this.querySelector("app-modes"),this.settings=this.querySelector("app-settings"),this.filesService.getModesOfUse().then((t=>{this.defaultJson=t,this.localStorageService.getItem("modeOfUse").then((t=>{t&&0!==Object.keys(t).length?this.json=t:(this.localStorageService.setItem("modeOfUse",this.defaultJson),this.json=this.defaultJson),this.setCurrentMode()}))})),window.addEventListener("storage-modeOfUse",(t=>{this.localStorageService.getItem("modeOfUse").then((t=>{this.json=t,this.setCurrentMode()}))})),this.routeService.initPages(this),this.addEventListener("changeRoute",(t=>{t.detail.isPrev?this.historyRoute.pop():this.historyRoute.push(this.routeService.currentRoute),t.detail.setting&&(this.json.selectedMode=t.detail.mode,this.setCurrentMode()),this.routeService.navigate(t.detail.route),this.setHeaderDisplay(t.detail.route),this.header?.focus(),this.header?.setAttribute("data-prev-route",this.historyRoute[this.historyRoute.length-1])}))}setHeaderDisplay=t=>{switch(t){case this.routeService.PAGE_HOME:this.header?.setAttribute("data-display","primary"),this.header?.setAttribute("data-title-page","");break;case this.routeService.PAGE_MODES:this.header?.setAttribute("data-display","secondary"),this.header?.setAttribute("data-title-page","pageTitleModes");break;case this.routeService.PAGE_SETTINGS:this.header?.setAttribute("data-display","secondary"),this.header?.setAttribute("data-title-page","pageTitleSettings");break;case this.routeService.PAGE_EDIT_SETTING:this.header?.setAttribute("data-display","secondary"),this.header?.setAttribute("data-title-page","pageTitleEditSetting")}};setCurrentMode=()=>{this.json.selectedMode?this.json.modes.forEach((t=>{Object.entries(t)[0][0]===this.json.selectedMode&&(this.header?.setAttribute("data-selected-mode",this.json.selectedMode),this.home?.setAttribute("data-mode",JSON.stringify(t)),this.settings?.setAttribute("data-mode",JSON.stringify(t)),this.modes?.setAttribute("data-list-mode",JSON.stringify(this.json)))})):this.routeService.navigate(this.routeService.PAGE_MODES),this.setCustomState()};setCustomState=()=>{let t,e;this.defaultJson.modes.forEach((e=>{Object.keys(e)[0]===this.json.selectedMode&&(t=JSON.stringify(e))})),this.json.modes.forEach((t=>{Object.keys(t)[0]===this.json.selectedMode&&(e=JSON.stringify(t))}));const n=!(e===t);this.home?.setAttribute("data-custom",n.toString())}}customElements.define("app-toolbar",ToolbarComponent);class RouteService{currentRoute;PAGE_HOME="home";PAGE_MODES="modes";PAGE_SETTINGS="settings";PAGE_EDIT_SETTING="edit-setting";homeElement=null;modeElement=null;settingsElement=null;editSettingElement=null;routes=[{path:this.PAGE_HOME,selector:"app-home",element:this.homeElement},{path:this.PAGE_MODES,selector:"app-modes",element:this.modeElement},{path:this.PAGE_SETTINGS,selector:"app-settings",element:this.settingsElement},{path:this.PAGE_EDIT_SETTING,selector:"app-edit-setting",element:this.editSettingElement}];initPages(t){this.routes.forEach((e=>{e.element=t.querySelector(e.selector)})),this.navigate(this.PAGE_HOME)}navigate(t){this.routes.forEach((e=>{e.path===this.currentRoute?e.element.classList.add("d-none"):e.path===t&&e.element.classList.remove("d-none")})),this.currentRoute=t}}const appRootElt=document.createElement("app-root");document.body.prepend(appRootElt);
//# sourceMappingURL=toolbar.min.js.map